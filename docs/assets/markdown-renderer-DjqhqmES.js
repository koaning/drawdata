import{s as w}from"./chunk-LvLJmgfZ.js";import{u as _}from"./useEvent-DlWF5OMa.js";import{t as S}from"./react-BGmjiNul.js";import{jt as A,w as $,wt as I}from"./cells-CmJW_FeD.js";import{t as j}from"./compiler-runtime-DeeZ7FnK.js";import{o as q}from"./utils-Czt8B2GX.js";import{t as z}from"./jsx-runtime-DN_bIXfG.js";import{t as b}from"./button-B8cGZzP5.js";import{at as M}from"./dist-CAcX026F.js";import{t as D}from"./createLucideIcon-CW2xpJ57.js";import{n as L,t as O}from"./LazyAnyLanguageCodeMirror-Dr2G5gxJ.js";import{r as R}from"./useTheme-BSVRc0kJ.js";import{t as T}from"./copy-DRhpWiOq.js";import{i as U}from"./chunk-OGVTOU66-DQphfHw1.js";import{r as V}from"./es-BJsT6vfZ.js";import{o as W}from"./focus-KGgBDCvb.js";var B=D("chevrons-up-down",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]),E=j(),g=w(S(),1),v={};function F(t){let e=(0,E.c)(5),[r,a]=(0,g.useState)(v[t]??!1),s;e[0]===t?s=e[1]:(s=o=>{a(o),v[t]=o},e[0]=t,e[1]=s);let n;return e[2]!==r||e[3]!==s?(n=[r,s],e[2]=r,e[3]=s,e[4]=n):n=e[4],n}function H(t){return t==null||t.data==null||t.data===""}function P(t,e){return`data:${e};base64,${t}`}function Q(t){return t.startsWith("data:")&&t.includes(";base64,")}function G(t){return t.split(",")[1]}function k(t){let e=window.atob(t);return Uint8Array.from(e,r=>r.charCodeAt(0))}function C(t){let e=k(t);return new DataView(e.buffer)}function J(t){let e=Array.from(t,r=>String.fromCharCode(r));return window.btoa(e.join(""))}function K(t){return J(new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function X(t){return(t.buffers??[]).map(C)}var y=j(),l=w(z(),1),Y=[M.lineWrapping],Z=new Set(["python","markdown","sql","json","yaml","toml","shell","javascript","typescript","jsx","tsx","css","html"]);function ee(t,e){return t?t==="python"?{language:t,code:e}:t==="sql"?{language:"python",code:I.fromQuery(e)}:t==="markdown"?{language:"python",code:A.fromMarkdown(e)}:t==="shell"||t==="bash"?{language:"python",code:`import subprocess
subprocess.run("${e}")`}:{language:"python",code:`_${t} = """
${e}
"""`}:{language:"python",code:e}}var te=t=>{let e=(0,y.c)(9),{code:r,language:a}=t,{createNewCell:s}=$(),n=W(),o=_(q),i;e[0]!==o||e[1]!==r||e[2]!==s||e[3]!==a||e[4]!==n?(i=()=>{let u=ee(a,r);a==="sql"&&V({autoInstantiate:o,createNewCell:s,fromCellId:n}),s({code:u.code,before:!1,cellId:n??"__end__"})},e[0]=o,e[1]=r,e[2]=s,e[3]=a,e[4]=n,e[5]=i):i=e[5];let c=i,m;e[6]===Symbol.for("react.memo_cache_sentinel")?(m=(0,l.jsx)(L,{className:"ml-2 h-4 w-4"}),e[6]=m):m=e[6];let d;return e[7]===c?d=e[8]:(d=(0,l.jsxs)(b,{size:"xs",variant:"outline",onClick:c,children:["Add to Notebook",m]}),e[7]=c,e[8]=d),d},re=t=>{let e=(0,y.c)(17),{code:r,language:a}=t,{theme:s}=R(),[n,o]=(0,g.useState)(r);n!==r&&o(r);let i;e[0]===n?i=e[1]:(i=async()=>{await T(n)},e[0]=n,e[1]=i);let c=i,m=s==="dark"?"dark":"light",d=a&&Z.has(a)?a:void 0,u;e[2]!==m||e[3]!==d||e[4]!==n?(u=(0,l.jsx)(g.Suspense,{children:(0,l.jsx)(O,{theme:m,language:d,className:"cm border rounded overflow-hidden",extensions:Y,value:n,onChange:o})}),e[2]=m,e[3]=d,e[4]=n,e[5]=u):u=e[5];let f;e[6]===c?f=e[7]:(f=(0,l.jsx)(ae,{size:"xs",variant:"outline",onClick:c,children:"Copy"}),e[6]=c,e[7]=f);let p;e[8]!==a||e[9]!==n?(p=(0,l.jsx)(te,{code:n,language:a}),e[8]=a,e[9]=n,e[10]=p):p=e[10];let h;e[11]!==f||e[12]!==p?(h=(0,l.jsxs)("div",{className:"flex justify-end mt-2 space-x-2",children:[f,p]}),e[11]=f,e[12]=p,e[13]=h):h=e[13];let x;return e[14]!==u||e[15]!==h?(x=(0,l.jsxs)("div",{className:"relative",children:[u,h]}),e[14]=u,e[15]=h,e[16]=x):x=e[16],x},ae=t=>{let e=(0,y.c)(9),r,a;e[0]===t?(r=e[1],a=e[2]):({onClick:r,...a}=t,e[0]=t,e[1]=r,e[2]=a);let[s,n]=(0,g.useState)(!1),o;e[3]===r?o=e[4]:(o=m=>{r==null||r(m),n(!0),setTimeout(()=>n(!1),1e3)},e[3]=r,e[4]=o);let i=s?"Copied":"Copy",c;return e[5]!==a||e[6]!==o||e[7]!==i?(c=(0,l.jsx)(b,{...a,onClick:o,children:i}),e[5]=a,e[6]=o,e[7]=i,e[8]=c):c=e[8],c},ne={code:({children:t,className:e})=>{let r=e==null?void 0:e.replace("language-","");if(r&&typeof t=="string"){let a=t.trim();return(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-xs text-muted-foreground pl-1",children:r}),(0,l.jsx)(re,{code:a,language:r})]})}return(0,l.jsx)("code",{className:e,children:t})}};const N=(0,g.memo)(t=>{let e=(0,y.c)(2),{content:r}=t,a;return e[0]===r?a=e[1]:(a=(0,l.jsx)(U,{components:ne,className:"mo-markdown-renderer",children:r}),e[0]=r,e[1]=a),a});N.displayName="MarkdownRenderer";export{K as a,X as c,B as d,k as i,H as l,P as n,G as o,C as r,Q as s,N as t,F as u};
