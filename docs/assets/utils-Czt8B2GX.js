import{d as k,i as x,l as z,p as o,u as C}from"./useEvent-DlWF5OMa.js";import{A as n,B as D,I as j,J as I,N as d,P as h,R as t,T as l,U as J,b as r,w as _}from"./zod-Cg4WLWh2.js";import{t as N}from"./compiler-runtime-DeeZ7FnK.js";import{t as R}from"./merge-BBX6ug-N.js";import{d as f,n as S,u as U}from"./hotkeys-uKX61F1_.js";import{t as F}from"./invariant-C6yE60hi.js";const M=["pip","uv","rye","poetry","pixi"];var $=["normal","compact","medium","full","columns"],q=["auto","native","polars","lazy-polars","pandas"];const G="openai/gpt-4o";var O=["html","markdown","ipynb"];const H=["manual","ask","agent"];var u=h({api_key:t().optional(),base_url:t().optional(),project:t().optional()}).loose(),K=h({chat_model:t().nullish(),edit_model:t().nullish(),autocomplete_model:t().nullish(),displayed_models:_(t()).default([]),custom_models:_(t()).default([])});const y=n({completion:h({activate_on_typing:l().prefault(!0),signature_hint_on_typing:l().prefault(!1),copilot:D([l(),r(["github","codeium","custom"])]).prefault(!1).transform(a=>a===!0?"github":a),codeium_api_key:t().nullish()}).prefault({}),save:n({autosave:r(["off","after_delay"]).prefault("after_delay"),autosave_delay:d().nonnegative().transform(a=>Math.max(a,1e3)).prefault(1e3),format_on_save:l().prefault(!1)}).prefault({}),formatting:n({line_length:d().nonnegative().prefault(79).transform(a=>Math.min(a,1e3))}).prefault({}),keymap:n({preset:r(["default","vim"]).prefault("default"),overrides:j(t(),t()).prefault({}),destructive_delete:l().prefault(!0)}).prefault({}),runtime:n({auto_instantiate:l().prefault(!0),on_cell_change:r(["lazy","autorun"]).prefault("autorun"),auto_reload:r(["off","lazy","autorun"]).prefault("off"),reactive_tests:l().prefault(!0),watcher_on_save:r(["lazy","autorun"]).prefault("lazy"),default_sql_output:r(q).prefault("auto"),default_auto_download:_(r(O)).prefault([])}).prefault({}),display:n({theme:r(["light","dark","system"]).prefault("light"),code_editor_font_size:d().nonnegative().prefault(14),cell_output:r(["above","below"]).prefault("below"),dataframes:r(["rich","plain"]).prefault("rich"),default_table_page_size:d().prefault(10),default_table_max_columns:d().prefault(50),default_width:r($).prefault("medium").transform(a=>a==="normal"?"compact":a),locale:t().nullable().optional(),reference_highlighting:l().prefault(!0)}).prefault({}),package_management:n({manager:r(M).prefault("pip")}).prefault({}),ai:n({rules:t().prefault(""),mode:r(H).prefault("manual"),inline_tooltip:l().prefault(!1),open_ai:u.optional(),anthropic:u.optional(),google:u.optional(),ollama:u.optional(),openrouter:u.optional(),wandb:u.optional(),open_ai_compatible:u.optional(),azure:u.optional(),bedrock:n({region_name:t().optional(),profile_name:t().optional(),aws_access_key_id:t().optional(),aws_secret_access_key:t().optional()}).optional(),custom_providers:j(t(),u).prefault({}),models:K.prefault({displayed_models:[],custom_models:[]})}).prefault({}),experimental:n({markdown:l().optional(),rtc:l().optional()}).prefault(()=>({})),server:n({disable_file_downloads:l().optional()}).prefault(()=>({})),diagnostics:n({enabled:l().optional(),sql_linter:l().optional()}).prefault(()=>({})),sharing:n({html:l().optional(),wasm:l().optional()}).optional(),mcp:n({presets:_(r(["marimo","context7"])).optional()}).optional().prefault({})}).partial().prefault(()=>({completion:{},save:{},formatting:{},keymap:{},runtime:{},display:{},diagnostics:{},experimental:{},server:{},ai:{},package_management:{},mcp:{}})),A=t(),L=r(q).prefault("auto"),b=h({width:r($).prefault("medium").transform(a=>a==="normal"?"compact":a),app_title:A.nullish(),css_file:t().nullish(),html_head_file:t().nullish(),auto_download:_(r(O)).prefault([]),sql_output:L}).prefault(()=>({width:"medium",auto_download:[],sql_output:"auto"}));function E(a){try{return b.parse(a)}catch(e){return f.error(`Marimo got an unexpected value in the configuration file: ${e}`),b.parse({})}}function Q(a){try{let e=y.parse(a);for(let[p,s]of Object.entries(e.experimental??{}))s===!0&&f.log(`\u{1F9EA} Experimental feature "${p}" is enabled.`);return e}catch(e){return e instanceof J?f.error(`Marimo got an unexpected value in the configuration file: ${I(e)}`):f.error(`Marimo got an unexpected value in the configuration file: ${e}`),P()}}function V(a){try{let e=a;return F(typeof e=="object","internal-error: marimo-config-overrides is not an object"),Object.keys(e).length>0&&f.log("\u{1F527} Project configuration overrides:",e),e}catch(e){return f.error(`Marimo got an unexpected configuration overrides: ${e}`),{}}}function P(){return y.parse({completion:{},save:{},formatting:{},keymap:{},runtime:{},display:{},diagnostics:{},experimental:{},server:{},ai:{},package_management:{},mcp:{}})}var W=N();const v=o(P()),T=o({}),i=o(a=>{let e=a(T);return R({},a(v),e)}),X=o(a=>a(i).runtime.auto_instantiate),Y=o(a=>a(i).keymap.overrides??{}),Z=o(U()),aa=o(a=>new S(a(Y),{platform:a(Z)})),ea=o(a=>a(i).save),ta=o(a=>a(i).ai),oa=o(a=>a(i).completion),ra=o(a=>a(i).keymap.preset);function la(){return z(v)}function na(){let a=(0,W.c)(3),e=C(i),p=k(v),s;return a[0]!==e||a[1]!==p?(s=[e,p],a[0]=e,a[1]=p,a[2]=s):s=a[2],s}function ia(){return x.get(i)}const sa=o(a=>B(a(i)));o(a=>a(i).display.code_editor_font_size);const pa=o(a=>a(i).display.locale);function B(a){var e,p,s,m,c,w;return!!((p=(e=a.ai)==null?void 0:e.models)!=null&&p.chat_model)||!!((m=(s=a.ai)==null?void 0:s.models)!=null&&m.edit_model)||!!((w=(c=a.ai)==null?void 0:c.models)!=null&&w.autocomplete_model)}const g=o(E({}));function ua(){return z(g)}function fa(){return k(g)}function ma(){return x.get(g)}const ca=o(a=>a(g).width);o(a=>{var m,c;let e=a(i),p=((m=e.snippets)==null?void 0:m.custom_paths)??[],s=(c=e.snippets)==null?void 0:c.include_default_snippets;return p.length>0||s===!0});const da=o(a=>{var e;return((e=a(i).server)==null?void 0:e.disable_file_downloads)??!1});function _a(){return!1}export{Q as A,b as C,y as D,M as E,E as O,v as S,G as T,i as _,ca as a,fa as b,oa as c,ma as d,ia as f,pa as g,ra as h,g as i,V as k,T as l,B as m,ta as n,X as o,aa as p,sa as r,ea as s,_a as t,da as u,ua as v,A as w,la as x,na as y};
