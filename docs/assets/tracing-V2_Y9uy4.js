const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-LBDztilZ.js","./VegaLite-D07JSyC_.js","./index-D3XtisvU.js","./index-33Q7xM_A.css","./compile-CsTNKzEk.js","./time-CJGz9Moa.js","./timer-DFzT7np-.js","./linear-BuATvq_r.js","./init-DLRA0X12.js","./range-CtcPcB_L.js","./zoom-COrs4lFh.js","./ordinal-DDUp3AbE.js","./colors-bszWmPJw.js","./arc-Cuwikxov.js","./step-BwsUM5iJ.js","./index-BelAJDbG.js"])))=>i.map(i=>d[i]);
import{u as e,d as s,T as t,aj as r,af as i,S as o,j as l,R as a,ak as n,al as m,am as p,an as c,ag as d,ao as j,ap as u,aq as h,ar as x,as as f}from"./index-D3XtisvU.js";import{P as g,C as v,f as y,E as b,a as I,u as S}from"./edit-page-B4HrwYMr.js";import{c as k}from"./compile-CsTNKzEk.js";import{r as N,b as T}from"./useMarimoWebSocket-CD_ahDOI.js";import{A as w}from"./tree-Drwx15ob.js";import{C as R}from"./circle-play-BsTGrgLY.js";import"./_createAggregator-ReXtltZy.js";import"./_baseEach-DHNYGtOc.js";import"./transform-DjHZbYKP.js";import"./timer-DFzT7np-.js";import"./zoom-COrs4lFh.js";import"./sortBy-CK8BMETd.js";import"./_baseMap-BXW0_SVK.js";import"./time-CJGz9Moa.js";import"./linear-BuATvq_r.js";import"./init-DLRA0X12.js";import"./range-CtcPcB_L.js";import"./ordinal-DDUp3AbE.js";import"./colors-bszWmPJw.js";import"./arc-Cuwikxov.js";import"./step-BwsUM5iJ.js";import"./index-CVDTCVTM.js";import"./index-Dp1UlEue.js";import"./index-C5qq019G.js";import"./index-CHikDVPK.js";import"./index-G0VFubTN.js";import"./index-DhYqkk4c.js";import"./index-D3MhxVn3.js";import"./index-CNDjQ5fe.js";import"./index-CcWoIc_r.js";import"./index-DNj9MLhG.js";import"./index-D4PFrLQX.js";import"./index-BbzuPatt.js";import"./index-DvyY1C0d.js";import"./apl-CXdQSnD-.js";import"./asciiarmor-D5V0T9Cu.js";import"./asterisk-B46aRdXb.js";import"./brainfuck-CtZaYBKt.js";import"./clike-BgBwzOhw.js";import"./cmake-DXn5xaP-.js";import"./cobol-stawOqaz.js";import"./coffeescript-BTDxI-eT.js";import"./commonlisp-vq6DHwts.js";import"./crystal-CRzZ78HM.js";import"./cypher-gJDei3ni.js";import"./d-BShv7fp-.js";import"./diff-UJJ5BM9S.js";import"./dockerfile-knGOOxt4.js";import"./simple-mode-C3vEBAcb.js";import"./dtd-DI9Herc-.js";import"./dylan-CHJ5qNM_.js";import"./ebnf-B-Df8AvO.js";import"./ecl-DPFc0Uaf.js";import"./eiffel-DR5c0IrL.js";import"./elm-D7xaZ7Da.js";import"./erlang-BuqgqA5h.js";import"./factor-CFXhaUWb.js";import"./fcl-CVaBTCzQ.js";import"./forth-Dri_5nFc.js";import"./fortran-DL7KluxX.js";import"./gas-5kEe4nk0.js";import"./gherkin-B6X1vGSW.js";import"./groovy-DnIzCrpZ.js";import"./haskell-CmdsSjFB.js";import"./haxe-D25e-2l-.js";import"./http-BKJkqRj4.js";import"./idl-pcmmZuaN.js";import"./jinja2-DhgKlfW7.js";import"./julia-DjdwvFuI.js";import"./livescript-HO6ttBFx.js";import"./lua-8DXOpKDz.js";import"./mathematica-IIbmv7SK.js";import"./mbox-DoeuZPxA.js";import"./mirc-DkvFAiy5.js";import"./modelica-DSrSSXCg.js";import"./mscgen-B2igx18G.js";import"./mumps-zvxmGV4l.js";import"./nginx-B4hAVlXN.js";import"./nsis-BvKfQ9lQ.js";import"./ntriples-FFvkTduk.js";import"./octave-C4hdQ5Hf.js";import"./oz-qQq7irPq.js";import"./pascal-CafrKXZF.js";import"./perl-tdMlh9QA.js";import"./pig-CwGJVRC4.js";import"./powershell-D1ly3AHC.js";import"./properties-_nPj978X.js";import"./protobuf-B4y9do6W.js";import"./puppet-Bc-yJKzi.js";import"./q-B0kTJ4cI.js";import"./r-BA4EbLKE.js";import"./ruby-CR-u2WLS.js";import"./sas-Bqaci40L.js";import"./scheme-qjP0V5Ag.js";import"./shell-BLav31RL.js";import"./sieve-r025o_jW.js";import"./smalltalk-C7J3IyEP.js";import"./solr-78MBEUkU.js";import"./sparql-BRLJFz69.js";import"./spreadsheet-CGlWr0eM.js";import"./stylus-OdhglgkO.js";import"./swift-B_XXVlXX.js";import"./tcl-B2fODqDH.js";import"./textile-BuVhTOzU.js";import"./tiddlywiki-BgR6AEZu.js";import"./tiki-CI-ztowC.js";import"./toml-BQXy8elZ.js";import"./troff-Ce85hlLp.js";import"./ttcn-BxnYHtq8.js";import"./turtle-BkSuIpt-.js";import"./vb-BHgjm0DN.js";import"./vbscript-Dawdd5GZ.js";import"./velocity-BdD_26Jv.js";import"./verilog-B4LBqg_1.js";import"./vhdl-CWWH2SUo.js";import"./webidl-CGwyPRYs.js";import"./xquery-CVDBqZPY.js";import"./yacas-I8QjZlxf.js";import"./z80-D8p3gKXp.js";import"./index-BelAJDbG.js";
/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=e("circle-ellipsis",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M17 12h.01",key:"1m0b6t"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M7 12h.01",key:"eqddd0"}]]),M="hoveredCellId",_="cellHover",C="startTimestamp",$="endTimestamp";const z=r(new Map),L=()=>{const e=s.c(28),{runIds:r,runMap:a}=t(N),n=t(z),{clearRuns:m}=T(),{theme:p}=i(),[c,d]=o.useState("above");let j;e[0]!==c?(j=()=>{d("above"===c?"sideBySide":"above")},e[0]=c,e[1]=j):j=e[1];const u=j;if(0===r.length){let s;return e[2]===Symbol.for("react.memo_cache_sentinel")?(s=l.jsx(g,{title:"No traces",description:l.jsx("span",{children:"Cells that have ran will appear here."}),icon:l.jsx(w,{})}),e[2]=s):s=e[2],s}let h;e[3]===Symbol.for("react.memo_cache_sentinel")?(h=l.jsx("label",{htmlFor:"chartPosition",className:"text-xs",children:"Inline chart"}),e[3]=h):h=e[3];const x="sideBySide"===c;let f,y,b,I,S,k;if(e[4]!==x||e[5]!==u?(f=l.jsxs("div",{className:"flex flex-row gap-1 items-center",children:[h,l.jsx("input",{type:"checkbox",name:"chartPosition",id:"chartPosition",onClick:u,defaultChecked:x,className:"h-3 cursor-pointer"})]}),e[4]=x,e[5]=u,e[6]=f):f=e[6],e[7]!==m?(y=l.jsx(v,{dataTestId:"clear-traces-button",onClick:m}),e[7]=m,e[8]=y):y=e[8],e[9]!==f||e[10]!==y?(b=l.jsxs("div",{className:"flex flex-row justify-end gap-3",children:[f,y]}),e[9]=f,e[10]=y,e[11]=b):b=e[11],e[12]!==c||e[13]!==n||e[14]!==r||e[15]!==a||e[16]!==p){let s;e[18]!==c||e[19]!==n||e[20]!==a||e[21]!==p?(s=(e,s)=>{const t=a.get(e);if(t)return l.jsx(B,{run:t,isExpanded:n.get(t.runId),isMostRecentRun:0===s,chartPosition:c,theme:p},t.runId)},e[18]=c,e[19]=n,e[20]=a,e[21]=p,e[22]=s):s=e[22],I=r.map(s),e[12]=c,e[13]=n,e[14]=r,e[15]=a,e[16]=p,e[17]=I}else I=e[17];return e[23]!==I?(S=l.jsx("div",{className:"flex flex-col gap-3",children:I}),e[23]=I,e[24]=S):S=e[24],e[25]!==b||e[26]!==S?(k=l.jsxs("div",{className:"py-1 px-2 overflow-y-scroll",children:[b,S]}),e[25]=b,e[26]=S,e[27]=k):k=e[27],k},P=a.lazy((()=>n((()=>import("./index-LBDztilZ.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]),import.meta.url).then((e=>({default:e.Vega}))))),q=e=>{const t=s.c(10),{ref:r,width:i}=S(),o=void 0===i?300:i,a="dark"===e.theme?"dark":void 0,n=o-50;let m,p;return t[0]!==e.height||t[1]!==e.signalListeners||t[2]!==e.vegaSpec||t[3]!==a||t[4]!==n?(m=l.jsx(P,{spec:e.vegaSpec,theme:a,width:n,height:e.height,signalListeners:e.signalListeners,actions:!1}),t[0]=e.height,t[1]=e.signalListeners,t[2]=e.vegaSpec,t[3]=a,t[4]=n,t[5]=m):m=t[5],t[6]!==e.className||t[7]!==r||t[8]!==m?(p=l.jsx("div",{className:e.className,ref:r,children:m}),t[6]=e.className,t[7]=r,t[8]=m,t[9]=p):p=t[9],p},B=({run:e,isMostRecentRun:s,chartPosition:t,isExpanded:r,theme:i})=>{const o=m(z),a=(r=r??s)?h:x,n=l.jsx(a,{height:16,className:"inline"}),c=l.jsxs("span",{className:"text-sm cursor-pointer",onClick:()=>{o((s=>{const t=new Map(s);return t.set(e.runId,!r),t}))},children:["Run - ",p(e.runStartTime),n]});return r?l.jsx(H,{run:e,chartPosition:t,theme:i,title:c},e.runId):l.jsx("div",{className:"flex flex-col",children:l.jsx("pre",{className:"font-mono font-semibold",children:c})},e.runId)},H=e=>{const t=s.c(32),{run:r,chartPosition:i,theme:a,title:n}=e,[m,p]=o.useState();let d;t[0]===Symbol.for("react.memo_cache_sentinel")?(d={[_]:(e,s)=>{var t;const r=null==(t=s.cell)?void 0:t[0];p(r??null)}},t[0]=d):d=t[0];const j=d,u=c();let h,x;if(t[1]!==u||t[2]!==i||t[3]!==r.cellRuns||t[4]!==r.runId||t[5]!==a){const e=[...r.cellRuns.values()].map((e=>{const s=e.elapsedTime??0;return{cell:e.cellId,cellNum:u.inOrderIds.indexOf(e.cellId),startTimestamp:O(e.startTime),endTimestamp:O(e.startTime+s),elapsedTime:y(1e3*s),status:e.status}}));h=`hiddenInputElement-${r.runId}`,x=k(function(e,s,t,r){return{$schema:"https://vega.github.io/schema/vega-lite/v5.json",background:"dark"===r?"black":void 0,mark:{type:"bar",cornerRadius:2},params:[{name:M,bind:{element:`#${s}`}},{name:_,select:{type:"point",on:"mouseover",fields:["cell"],clear:"mouseout"}}],height:{step:"above"===t?21:26},encoding:{y:{field:"cellNum",scale:{paddingInner:.2},sort:{field:C},title:"cell",axis:"sideBySide"===t?null:void 0},x:{field:C,type:"temporal",axis:{orient:"top",title:null}},x2:{field:$,type:"temporal"},tooltip:[{field:C,type:"temporal",timeUnit:"hoursminutessecondsmilliseconds",title:"Start"},{field:$,type:"temporal",timeUnit:"hoursminutessecondsmilliseconds",title:"End"}],size:{value:{expr:`${M} == toString(datum.cell) ? 19.5 : 18`}},color:{field:"status",scale:{domain:["success","error"],range:["#37BE5F","red"]},legend:null}},data:{values:e},config:{view:{stroke:"transparent"}}}}(e,h,i,a)),t[1]=u,t[2]=i,t[3]=r.cellRuns,t[4]=r.runId,t[5]=a,t[6]=h,t[7]=x}else h=t[6],x=t[7];const f=x.spec;let g;t[8]!==h||t[9]!==m||t[10]!==r?(g=l.jsx(A,{run:r,hoveredCellId:m,hiddenInputElementId:h}),t[8]=h,t[9]=m,t[10]=r,t[11]=g):g=t[11];const v=g;if("above"===i){let e,s,i;return t[12]!==a||t[13]!==f?(e=l.jsx(q,{vegaSpec:f,height:120,signalListeners:j,theme:a}),t[12]=a,t[13]=f,t[14]=e):e=t[14],t[15]!==e||t[16]!==n||t[17]!==v?(s=l.jsxs("pre",{className:"font-mono font-semibold",children:[n,e,v]}),t[15]=e,t[16]=n,t[17]=v,t[18]=s):s=t[18],t[19]!==r.runId||t[20]!==s?(i=l.jsx("div",{className:"flex flex-col",children:s},r.runId),t[19]=r.runId,t[20]=s,t[21]=i):i=t[21],i}let b,I,S;return t[22]!==n||t[23]!==v?(b=l.jsxs("pre",{className:"font-mono font-semibold",children:[n,v]}),t[22]=n,t[23]=v,t[24]=b):b=t[24],t[25]!==a||t[26]!==f?(I=l.jsx(q,{className:"-mt-0.5 flex-1",vegaSpec:f,height:100,signalListeners:j,theme:a}),t[25]=a,t[26]=f,t[27]=I):I=t[27],t[28]!==r.runId||t[29]!==b||t[30]!==I?(S=l.jsxs("div",{className:"flex flex-row",children:[b,I]},r.runId),t[28]=r.runId,t[29]=b,t[30]=I,t[31]=S):S=t[31],S},A=e=>{const t=s.c(12),{run:r,hoveredCellId:i,hiddenInputElementId:a}=e,n=o.useRef(null);let m;t[0]===Symbol.for("react.memo_cache_sentinel")?(m=e=>{n.current&&(n.current.value=String(e),n.current.dispatchEvent(new Event("input",{bubbles:!0})))},t[0]=m):m=t[0];const p=m,c=i||"";let d,j,u,h;return t[1]!==a||t[2]!==c?(d=l.jsx("input",{type:"text",id:a,defaultValue:c,hidden:!0,ref:n}),t[1]=a,t[2]=c,t[3]=d):d=t[3],t[4]!==r.cellRuns?(j=[...r.cellRuns.values()],t[4]=r.cellRuns,t[5]=j):j=t[5],t[6]!==i||t[7]!==j?(u=j.map((e=>l.jsx(F,{cellRun:e,hovered:e.cellId===i,dispatchHoverEvent:p},e.cellId))),t[6]=i,t[7]=j,t[8]=u):u=t[8],t[9]!==d||t[10]!==u?(h=l.jsxs("div",{className:"text-xs mt-0.5 ml-3 flex flex-col gap-0.5",children:[d,u]}),t[9]=d,t[10]=u,t[11]=h):h=t[11],h},D={success:l.jsx(I,{color:"green",size:14}),running:l.jsx(R,{color:"var(--blue-10)",size:14}),error:l.jsx(f,{color:"red",size:14}),queued:l.jsx(E,{color:"grey",size:14})},F=e=>{const t=s.c(39),{cellRun:r,hovered:i,dispatchHoverEvent:o}=e;let a;t[0]!==r.elapsedTime?(a=r.elapsedTime?y(1e3*r.elapsedTime):"-",t[0]=r.elapsedTime,t[1]=a):a=t[1];const n=a;let m;t[2]!==r.elapsedTime||t[3]!==n?(m=r.elapsedTime?l.jsxs("span",{children:["This cell took ",l.jsx(b,{elapsedTime:n})," to run"]}):l.jsx("span",{children:"This cell has not been run"}),t[2]=r.elapsedTime,t[3]=n,t[4]=m):m=t[4];const c=m;let h;t[5]!==r.cellId||t[6]!==o?(h=()=>{o(r.cellId)},t[5]=r.cellId,t[6]=o,t[7]=h):h=t[7];const x=h;let f;t[8]!==o?(f=()=>{o(null)},t[8]=o,t[9]=f):f=t[9];const g=f,v=i&&"bg-[var(--gray-3)] opacity-100";let I,S,k,N,T,w,R;t[10]!==v?(I=d("flex flex-row gap-2 py-1 px-1 opacity-70 hover:bg-[var(--gray-3)] hover:opacity-100",v),t[10]=v,t[11]=I):I=t[11],t[12]!==r.startTime?(S=p(r.startTime),t[12]=r.startTime,t[13]=S):S=t[13],t[14]!==S?(k=l.jsxs("span",{className:"text-[var(--gray-10)] dark:text-[var(--gray-11)]",children:["[",S,"]"]}),t[14]=S,t[15]=k):k=t[15],t[16]!==r.cellId?(N=l.jsxs("span",{className:"text-[var(--gray-10)] w-16",children:["(",l.jsx(j,{cellId:r.cellId}),")"]}),t[16]=r.cellId,t[17]=N):N=t[17],t[18]!==r.code?(T=l.jsx("span",{className:"w-40 truncate -ml-1",children:r.code}),t[18]=r.code,t[19]=T):T=t[19],t[20]!==n?(w=l.jsx("span",{className:"text-[var(--gray-10)] dark:text-[var(--gray-11)]",children:n}),t[20]=n,t[21]=w):w=t[21],t[22]!==c||t[23]!==w?(R=l.jsx(u,{content:c,children:w}),t[22]=c,t[23]=w,t[24]=R):R=t[24];const E=D[r.status];let M,_,C;return t[25]!==r.status||t[26]!==E?(M=l.jsx(u,{content:r.status,children:E}),t[25]=r.status,t[26]=E,t[27]=M):M=t[27],t[28]!==R||t[29]!==M?(_=l.jsxs("div",{className:"flex flex-row gap-1 w-16 justify-end -ml-2",children:[R,M]}),t[28]=R,t[29]=M,t[30]=_):_=t[30],t[31]!==x||t[32]!==g||t[33]!==T||t[34]!==_||t[35]!==I||t[36]!==k||t[37]!==N?(C=l.jsxs("div",{className:I,onMouseEnter:x,onMouseLeave:g,children:[k,N,T,_]}),t[31]=x,t[32]=g,t[33]=T,t[34]=_,t[35]=I,t[36]=k,t[37]=N,t[38]=C):C=t[38],C};function O(e){try{const s=new Date(1e3*e),t=s.getFullYear(),r=String(s.getMonth()+1).padStart(2,"0"),i=String(s.getDate()).padStart(2,"0"),o=String(s.getHours()).padStart(2,"0"),l=String(s.getMinutes()).padStart(2,"0"),a=String(s.getSeconds()).padStart(2,"0");return`${t}-${r}-${i} ${o}:${l}:${a}.${String(s.getMilliseconds()).padStart(3,"0")}`}catch{return""}}export{L as Tracing,O as formatChartTime};
