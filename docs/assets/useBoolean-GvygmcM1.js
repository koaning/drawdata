import{s as T}from"./chunk-LvLJmgfZ.js";import{t as N}from"./react-BGmjiNul.js";import{t as _}from"./compiler-runtime-DeeZ7FnK.js";import{d as f,s as b}from"./hotkeys-uKX61F1_.js";import{r as k}from"./constants-Bkp4R3bQ.js";import{j as C}from"./config-CENq_7Pd.js";import{t as F}from"./createLucideIcon-CW2xpJ57.js";import{P as M}from"./usePress-C2LPFxyv.js";var A=F("case-sensitive",[["path",{d:"m2 16 4.039-9.69a.5.5 0 0 1 .923 0L11 16",key:"d5nyq2"}],["path",{d:"M22 9v7",key:"pvm9v3"}],["path",{d:"M3.304 13h6.392",key:"1q3zxz"}],["circle",{cx:"18.5",cy:"12.5",r:"3.5",key:"z97x68"}]]),R=typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,w=new WeakMap,s=[];function P(t,e){let r=M(t==null?void 0:t[0]),a=e instanceof r.Element?{root:e}:e,l=(a==null?void 0:a.root)??document.body,h=(a==null?void 0:a.shouldUseInert)&&R,m=new Set(t),u=new Set,v=n=>h&&n instanceof r.HTMLElement?n.inert:n.getAttribute("aria-hidden")==="true",o=(n,i)=>{h&&n instanceof r.HTMLElement?n.inert=i:i?n.setAttribute("aria-hidden","true"):(n.removeAttribute("aria-hidden"),n instanceof r.HTMLElement&&(n.inert=!1))},p=n=>{for(let d of n.querySelectorAll("[data-live-announcer], [data-react-aria-top-layer]"))m.add(d);let i=d=>{if(u.has(d)||m.has(d)||d.parentElement&&u.has(d.parentElement)&&d.parentElement.getAttribute("role")!=="row")return NodeFilter.FILTER_REJECT;for(let L of m)if(d.contains(L))return NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_ACCEPT},c=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:i}),S=i(n);if(S===NodeFilter.FILTER_ACCEPT&&x(n),S!==NodeFilter.FILTER_REJECT){let d=c.nextNode();for(;d!=null;)x(d),d=c.nextNode()}},x=n=>{let i=w.get(n)??0;v(n)&&i===0||(i===0&&o(n,!0),u.add(n),w.set(n,i+1))};s.length&&s[s.length-1].disconnect(),p(l);let E=new MutationObserver(n=>{for(let i of n)if(i.type==="childList"&&![...m,...u].some(c=>c.contains(i.target)))for(let c of i.addedNodes)(c instanceof HTMLElement||c instanceof SVGElement)&&(c.dataset.liveAnnouncer==="true"||c.dataset.reactAriaTopLayer==="true")?m.add(c):c instanceof Element&&p(c)});E.observe(l,{childList:!0,subtree:!0});let y={visibleNodes:m,hiddenNodes:u,observe(){E.observe(l,{childList:!0,subtree:!0})},disconnect(){E.disconnect()}};return s.push(y),()=>{E.disconnect();for(let n of u){let i=w.get(n);i!=null&&(i===1?(o(n,!1),w.delete(n)):w.set(n,i-1))}y===s[s.length-1]?(s.pop(),s.length&&s[s.length-1].observe()):s.splice(s.indexOf(y),1)}}function H(t){let e=s[s.length-1];if(e&&!e.visibleNodes.has(t))return e.visibleNodes.add(t),()=>{e.visibleNodes.delete(t)}}const I=typeof window<"u"&&window.parent!==window;function K(){new URLSearchParams(window.location.search).has(k.vscode)&&(!I||C()||(f.log("[vscode] Registering VS Code bindings"),W(),D(),q(),z()))}function D(){window.addEventListener("copy",()=>{var t;g({command:"copy",text:((t=window.getSelection())==null?void 0:t.toString())??""})}),window.addEventListener("cut",()=>{var e;let t=((e=window.getSelection())==null?void 0:e.toString())??"";b()&&document.execCommand("insertText",!1,""),g({command:"cut",text:t})}),window.addEventListener("message",async t=>{try{let e=t.data,r=b();switch(e.command){case"paste":if(f.log(`[vscode] Received paste mac=${r}`,e),r){let a=document.activeElement;if(!a){f.warn("[vscode] No active element to paste into"),document.execCommand("insertText",!1,e.text);return}let l=new DataTransfer;l.setData("text/plain",e.text),a.dispatchEvent(new ClipboardEvent("paste",{clipboardData:l}))}else f.log("[vscode] Not pasting on mac");return}}catch(e){f.error("Error in paste message handler",e)}})}function W(){document.addEventListener("keydown",t=>{var e,r;if((t.ctrlKey||t.metaKey)&&t.key==="c"){let a=((e=window.getSelection())==null?void 0:e.toString())??"";f.log("[vscode] Sending copy",a),g({command:"copy",text:a});return}if((t.ctrlKey||t.metaKey)&&t.key==="x"){let a=((r=window.getSelection())==null?void 0:r.toString())??"";b()&&document.execCommand("insertText",!1,""),f.log("[vscode] Sending cut",a),g({command:"cut",text:a});return}if((t.ctrlKey||t.metaKey)&&t.key==="v"){f.log("[vscode] Sending paste"),g({command:"paste"});return}})}function q(){document.addEventListener("click",t=>{let e=t.target;if(e.tagName!=="A")return;let r=e.getAttribute("href");r&&(r.startsWith("http://")||r.startsWith("https://"))&&(t.preventDefault(),g({command:"external_link",url:r}))})}function z(){document.addEventListener("contextmenu",t=>{t.preventDefault(),g({command:"context_menu"})})}function g(t){var e;(e=window.parent)==null||e.postMessage(t,"*")}var O=_(),J=T(N(),1);function U(t){let e=(0,O.c)(6),[r,a]=(0,J.useState)(t),l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=o=>{var p;(p=o==null?void 0:o.stopPropagation)==null||p.call(o),a(!0)},e[0]=l):l=e[0];let h;e[1]===Symbol.for("react.memo_cache_sentinel")?(h=o=>{var p;(p=o==null?void 0:o.stopPropagation)==null||p.call(o),a(!1)},e[1]=h):h=e[1];let m;e[2]===Symbol.for("react.memo_cache_sentinel")?(m=o=>{var p;(p=o==null?void 0:o.stopPropagation)==null||p.call(o),a(V)},e[2]=m):m=e[2];let u;e[3]===Symbol.for("react.memo_cache_sentinel")?(u={setTrue:l,setFalse:h,toggle:m},e[3]=u):u=e[3];let v;return e[4]===r?v=e[5]:(v=[r,u],e[4]=r,e[5]=v),v}function V(t){return!t}export{P as a,H as i,K as n,A as o,g as r,U as t};
