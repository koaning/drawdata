import{ca as e,aI as t,u as n,el as r,R as i,d as o,f6 as s,j as a,bs as l,ac as c,bB as u,dM as d,ap as h,f7 as f,S as p,cx as g,ag as m,f8 as v,eb as y,aj as x,f9 as b,fa as j,bc as w,fb as I,L as S,fc as O,fd as C,fe as k,ff as N,fg as D,ch as E,fh as T,a8 as _,al as P,bw as A,bK as M,fi as R,a2 as L,dI as F,eB as H,a9 as z,a7 as U,fj as q,fk as V,fl as B,fm as W,fn as K,fo as G,fp as $,fq as Y,fr as X,fs as Q,ft as Z,fu as J,di as ee,f0 as te,fv as ne,fw as re,fx as ie,fy as oe,fz as se,fA as ae,aH as le,T as ce,fB as ue,bb as de,fC as he,aJ as fe,e0 as pe,fD as ge,fE as me,bI as ve,fF as ye,fG as xe,fH as be,a0 as je,fI as we,fJ as Ie,a3 as Se,a4 as Oe,a5 as Ce,aE as ke,fK as Ne,fL as De,as as Ee,fM as Te,bt as _e,fN as Pe,fO as Ae,E as Me,fP as Re,fQ as Le,fR as Fe,fS as He,fT as ze,eZ as Ue,fU as qe,fV as Ve,fW as Be,fX as We,fY as Ke,fZ as Ge,f_ as $e,f$ as Ye,g0 as Xe,g1 as Qe,g2 as Ze,g3 as Je,g4 as et,g5 as tt,g6 as nt,bJ as rt,g7 as it,g8 as ot,dG as st,dz as at,bG as lt,g9 as ct,cd as ut,ga as dt,gb as ht,eQ as ft,gc as pt,gd as gt,ge as mt,gf as vt,a1 as yt,gg as xt,gh as bt,gi as jt,gj as wt,gk as It}from"./index-D3XtisvU.js";import{e as St}from"./index-BelAJDbG.js";
/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Ot=n("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),Ct=n("book-marked",[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]),kt=n("box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),Nt=n("brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]),Dt=n("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Et=n("cpu",[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]]),Tt=n("flask-conical",[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]]),_t=n("folder-cog",[["path",{d:"M10.3 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.98a2 2 0 0 1 1.69.9l.66 1.2A2 2 0 0 0 12 6h8a2 2 0 0 1 2 2v3.3",key:"128dxu"}],["path",{d:"m14.305 19.53.923-.382",key:"3m78fa"}],["path",{d:"m15.228 16.852-.923-.383",key:"npixar"}],["path",{d:"m16.852 15.228-.383-.923",key:"5xggr7"}],["path",{d:"m16.852 20.772-.383.924",key:"dpfhf9"}],["path",{d:"m19.148 15.228.383-.923",key:"1reyyz"}],["path",{d:"m19.53 21.696-.382-.924",key:"1goivc"}],["path",{d:"m20.772 16.852.924-.383",key:"htqkph"}],["path",{d:"m20.772 19.148.924.383",key:"9w9pjp"}],["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}]]),Pt=n("github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]),At=n("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),Mt=n("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),Rt=n("messages-square",[["path",{d:"M14 9a2 2 0 0 1-2 2H6l-4 4V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2z",key:"p1xzt8"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v11l-4-4h-6a2 2 0 0 1-2-2v-1",key:"1cx29u"}]]),Lt=n("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),Ft=n("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),Ht=n("power-off",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),zt=n("youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);function Ut(e,t){return(Ut=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function qt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}const Vt=r("flex items-center justify-center m-0 leading-none font-medium border border-foreground/10 shadow-xsSolid hover:cursor-pointer active:shadow-none dark:border-border text-sm",{variants:{color:{gray:"mo-button gray",white:"mo-button white",green:"mo-button green",red:"mo-button red",yellow:"mo-button yellow","hint-green":"mo-button hint-green",disabled:"mo-button disabled"},shape:{rectangle:"rounded",circle:"rounded-full"},size:{small:"",medium:""}},compoundVariants:[{size:"small",shape:"circle",class:"h-[24px] w-[24px] px-[5.5px] py-[5.5px]"},{size:"medium",shape:"circle",class:"px-2 py-2"},{size:"small",shape:"rectangle",class:"px-1 py-1 h-[24px] w-[24px]"},{size:"medium",shape:"rectangle",class:"px-3 py-2"}],defaultVariants:{color:"gray",size:"medium",shape:"rectangle"}}),Bt=r("font-mono w-full flex-1 inline-flex items-center justify-center rounded px-2.5 text-foreground/60 h-[36px] hover:shadow-md hover:cursor-pointer focus:shadow-md focus:outline-none text-[hsl(0, 0%, 43.5%)] bg-transparent hover:bg-background focus:bg-background"),Wt=i.forwardRef(((e,t)=>{const n=o.c(15);let r,i,l,c,u,d,h;return n[0]!==e?(({color:i,shape:c,size:u,className:r,...l}=e),n[0]=e,n[1]=r,n[2]=i,n[3]=l,n[4]=c,n[5]=u):(r=n[1],i=n[2],l=n[3],c=n[4],u=n[5]),n[6]!==r||n[7]!==i||n[8]!==c||n[9]!==u?(d=s(Vt({color:i,shape:c,size:u}),r),n[6]=r,n[7]=i,n[8]=c,n[9]=u,n[10]=d):d=n[10],n[11]!==l||n[12]!==t||n[13]!==d?(h=a.jsx("button",{ref:t,className:d,...l,children:l.children}),n[11]=l,n[12]=t,n[13]=d,n[14]=h):h=n[14],h}));Wt.displayName="Button";i.forwardRef(((e,t)=>{const n=o.c(9);let r,i,l,c;return n[0]!==e?(({className:r,...i}=e),n[0]=e,n[1]=r,n[2]=i):(r=n[1],i=n[2]),n[3]!==r?(l=s(Bt(),r),n[3]=r,n[4]=l):l=n[4],n[5]!==i||n[6]!==t||n[7]!==l?(c=a.jsx("input",{ref:t,className:l,...i}),n[5]=i,n[6]=t,n[7]=l,n[8]=c):c=n[8],c})).displayName="Input";const Kt=e=>{const t=o.c(7),{openConfirm:n,closeModal:r}=l(),i=$t;if(c())return null;let s,f,p;return t[0]!==r||t[1]!==n||t[2]!==e.description?(s=t=>{t.stopPropagation(),n({title:"Shutdown",description:e.description,variant:"destructive",confirmAction:a.jsx(u,{onClick:e=>{i(),r()},"aria-label":"Confirm Shutdown",children:"Shutdown"})})},t[0]=r,t[1]=n,t[2]=e.description,t[3]=s):s=t[3],t[4]===Symbol.for("react.memo_cache_sentinel")?(f=a.jsx(d,{strokeWidth:1}),t[4]=f):f=t[4],t[5]!==s?(p=a.jsx(h,{content:"Shutdown",children:a.jsx(Wt,{"aria-label":"Shutdown","data-testid":"shutdown-button",shape:"circle",size:"small",color:"red",className:"h-[27px] w-[27px]",onClick:s,children:f})}),t[5]=s,t[6]=p):p=t[6],p};function Gt(){window.close()}function $t(){f(),setTimeout(Gt,200)}function Yt(e,t){const n=o.c(11),{delayMs:r,whenVisible:i,disabled:s}=t,a=void 0!==s&&s,l=p.useRef();let c,u,d,h,f;return n[0]!==e?(c=()=>{l.current=e},u=[e],n[0]=e,n[1]=c,n[2]=u):(c=n[1],u=n[2]),p.useEffect(c,u),n[3]!==r||n[4]!==a||n[5]!==i?(d=()=>{if(null===r||a)return;const e=setInterval((()=>{var e;i&&"visible"!==document.visibilityState||null==(e=l.current)||e.call(l)}),r);return()=>clearInterval(e)},h=[r,i,a],n[3]=r,n[4]=a,n[5]=i,n[6]=d,n[7]=h):(d=n[6],h=n[7]),p.useEffect(d,h),n[8]!==a||n[9]!==i?(f=()=>{var e;"visible"===document.visibilityState&&i&&!a&&(null==(e=l.current)||e.call(l))},n[8]=a,n[9]=i,n[10]=f):f=n[10],g(document,"visibilitychange",f),null}const Xt=e=>{const t=o.c(2),{children:n}=e;let r;return t[0]!==n?(r=a.jsx("div",{className:"text-md font-semibold text-muted-foreground uppercase tracking-wide  mb-1",children:n}),t[0]=n,t[1]=r):r=t[1],r},Qt=e=>{const t=o.c(10);let n,r,i,s,l;return t[0]!==e?(({children:n,className:r,...i}=e),t[0]=e,t[1]=n,t[2]=r,t[3]=i):(n=t[1],r=t[2],i=t[3]),t[4]!==r?(s=m("text-base font-semibold underline-offset-2 text-accent-foreground uppercase tracking-wide",r),t[4]=r,t[5]=s):s=t[5],t[6]!==n||t[7]!==i||t[8]!==s?(l=a.jsx("div",{...i,className:s,children:n}),t[6]=n,t[7]=i,t[8]=s,t[9]=l):l=t[9],l},Zt=e=>{const t=o.c(2),{children:n}=e;let r;return t[0]!==n?(r=a.jsx("p",{className:"text-sm text-muted-foreground",children:n}),t[0]=n,t[1]=r):r=t[1],r},Jt="marimo:copilot:signedIn",en=w(Jt,null,void 0,{getOnInit:!0}),tn=x(null),nn=x(null);function rn(){const e="true"===localStorage.getItem(Jt),t=v();return e&&"github"===t.completion.copilot}class on extends I{constructor(...n){super(...n),this.documentVersion=0,this.hasOpenedDocument=!1,this.getCompletionInternal=async(e,t)=>await this._request("getCompletions",{doc:{...e.doc,version:t}}),this.throttledGetCompletionInternal=function(n,r,i){var o=!0,s=!0;if("function"!=typeof n)throw new TypeError("Expected a function");return e(i)&&(o="leading"in i?!!i.leading:o,s="trailing"in i?!!i.trailing:s),t(n,r,{leading:o,maxWait:r,trailing:s})}(this.getCompletionInternal,200)}async _request(e,t){try{return await this.request(e,t)}catch(n){throw S.error("CopilotLanguageServerClient#request: Error",n),n}}isDisabled(){return!rn()}async textDocumentDidOpen(e){return this.isDisabled()?e:(this.hasOpenedDocument=!0,super.textDocumentDidOpen(e))}async textDocumentCompletion(e){return[]}async textDocumentDidChange(e){if(this.isDisabled())return e;this.hasOpenedDocument||await this.textDocumentDidOpen({textDocument:{uri:e.textDocument.uri,languageId:"python",version:e.textDocument.version,text:e.contentChanges[0].text}});const t=e.contentChanges;1!==t.length&&S.warn("CopilotLanguageServerClient#textDocumentDidChange: Multiple changes detected. This is not supported.",t);const n=t[0];"range"in n&&S.warn("CopilotLanguageServerClient#textDocumentDidChange: Copilot doesn't support range changes.",n);const r=O(n.text);return super.textDocumentDidChange({...e,contentChanges:[{text:r}],textDocument:C.VersionedTextDocumentIdentifier.create(e.textDocument.uri,++this.documentVersion)})}textDocumentHover(e){return Promise.resolve({contents:[]})}signOut(){return this._request("signOut",{})}async signInInitiate(){S.log("Copilot#signInInitiate: Starting sign-in flow");try{const e=await this._request("signInInitiate",{});return S.log("Copilot#signInInitiate: Sign-in flow started successfully"),e}catch(e){throw S.warn("Copilot#signInInitiate: Failed to start sign-in flow",e),e}}async signInConfirm(e){S.log("Copilot#signInConfirm: Confirming sign-in");try{const t=await this._request("signInConfirm",e);return S.log("Copilot#signInConfirm: Sign-in confirmed successfully"),t}catch(t){throw S.warn("Copilot#signInConfirm: Failed to confirm sign-in",t),t}}async signedIn(){try{const{status:e}=await this._request("checkStatus",{});return S.log("Copilot#signedIn: Status check completed",{status:e}),"SignedIn"===e||"AlreadySignedIn"===e||"OK"===e}catch(e){throw S.warn("Copilot#signedIn: Failed to check sign-in status",e),e}}acceptCompletion(e){return this._request("notifyAccepted",e)}rejectCompletions(e){return this._request("notifyRejected",e)}async getCompletion(e){if(this.isDisabled())return{completions:[]};const t=this.documentVersion;if(e.doc.version=t,0===t)return{completions:[]};var n;n=t,y.set(nn,n);const r=await this.throttledGetCompletionInternal(e,t);var i;return i=t,y.get(nn)===i&&y.set(nn,null),t!==this.documentVersion?{completions:[]}:r||{completions:[]}}}var sn=k();async function an(e){return new Promise(((t,n)=>{const r=new WebSocket(e);r.onopen=()=>{r.close(),t(e)},r.onerror=t=>{r.close(),n(new Error(`Failed to connect to ${e}: ${t.type}`))}}))}const ln="/__marimo_copilot__.py",cn="copilot",un=`file://${ln}`,dn=D((()=>new hn));class hn extends sn.Transport{constructor(){super(),this.delegate=void 0,this.WS_URL=E("lsp/copilot"),this.delegate=void 0}async tryConnect(e=3,t=1e3){for(let r=1;r<=e;r++)try{return this.delegate||(this.delegate=new T.WebSocketTransport(this.WS_URL)),await this.delegate.connect(),void S.log("Copilot#connect: Connected successfully")}catch(n){if(S.warn(`Copilot#connect: Connection attempt ${r}/${e} failed`,n),r===e)throw this.delegate=void 0,_({variant:"danger",title:"GitHub Copilot Connection Error",description:"Failed to connect to GitHub Copilot. Please check settings and try again."}),n;await new Promise((e=>setTimeout(e,t)))}}async connect(){return await b(j,(e=>"github"===e.completion.copilot)),await async function(e,t=5){for(let n=0;n<t;n++)try{return await an(e)}catch{await new Promise((e=>setTimeout(e,1e3*(n+1))))}throw new Error(`Failed to connect to ${e}`)}(this.WS_URL,3),this.tryConnect()}close(){var e;null==(e=this.delegate)||e.close(),this.delegate=void 0}async sendData(e,t){var n;return t=Math.min(t??5e3,5e3),null==(n=this.delegate)?void 0:n.sendData(e,t)}}const fn=D((()=>new on({rootUri:un,workspaceFolders:null,transport:dn()})));function pn(){return N({documentUri:un,client:fn(),languageId:cn,hoverEnabled:!1,completionEnabled:!1,definitionEnabled:!1,renameEnabled:!1,codeActionsEnabled:!1,signatureHelpEnabled:!1,diagnosticsEnabled:!1,sendIncrementalChanges:!1})}const gn=x(!1);function mn(){const e=o.c(5),t=P(Xn),n=P(gn);let r;e[0]!==t||e[1]!==n?(r=e=>{t(e),n(!0)},e[0]=t,e[1]=n,e[2]=r):r=e[2];const i=r;let s;return e[3]!==i?(s={handleClick:i},e[3]=i,e[4]=s):s=e[4],s}const vn=p.memo((()=>{const[e,t]=A(en),[n,r]=A(tn),{handleClick:i}=mn(),[o,s]=p.useState(),[l,c]=p.useState(!1),u=async e=>{e.preventDefault(),c(!0);try{const e=fn(),{verificationUri:n,status:i,userCode:o}=await e.signInInitiate();"OK"===i||"AlreadySignedIn"===i?t(!0):(r("signingIn"),s({url:n,code:o}))}finally{c(!1)}},h=async e=>{if(e.preventDefault(),!o)return;const n=fn();try{c(!0),S.log("Copilot#tryFinishSignIn: Attempting to confirm sign-in");const{status:e}=await n.signInConfirm({userCode:o.code});"OK"===e||"AlreadySignedIn"===e?(S.log("Copilot#tryFinishSignIn: Sign-in confirmed successfully"),t(!0),r("signedIn")):(S.warn("Copilot#tryFinishSignIn: Sign-in confirmation returned unexpected status",{status:e}),r("signInFailed"))}catch(s){if(S.warn("Copilot#tryFinishSignIn: Initial sign-in confirmation failed, attempting retries"),s instanceof Error&&(s.message.includes("ECONNREFUSED")||s.message.includes("WebSocket")||s.message.includes("network")))return S.error("Copilot#tryFinishSignIn: Connection error during sign-in",s),r("connectionError"),void _({title:"GitHub Copilot Connection Error",description:"Lost connection during sign-in. Please try again.",variant:"danger",action:a.jsx(L,{onClick:u,children:"Retry"})});for(let e=0;e<3;e++)try{await new Promise((e=>setTimeout(e,1e3)));if(await n.signedIn())return S.log("Copilot#tryFinishSignIn: Successfully signed in after retry"),t(!0),void r("signedIn")}catch(l){if(S.warn("Copilot#tryFinishSignIn: Retry attempt failed",{attempt:e+1,maxRetries:3}),l instanceof Error&&(l.message.includes("ECONNREFUSED")||l.message.includes("WebSocket")||l.message.includes("network")))return r("connectionError"),void _({title:"GitHub Copilot Connection Error",description:"Lost connection during sign-in. Please check settings and try again.",variant:"danger",action:a.jsx(L,{variant:"link",onClick:()=>i("ai"),children:"Settings"})})}S.error("Copilot#tryFinishSignIn: All sign-in attempts failed"),r("signInFailed")}finally{c(!1)}},f=async e=>{e.preventDefault();const n=fn();t(!1),r("signedOut"),await n.signOut()};return(()=>{switch(n??(e?"signedIn":"connecting")){case"connecting":return a.jsx(M,{className:"font-normal flex",children:"Connecting..."});case"signedOut":return a.jsx(L,{onClick:u,size:"xs",variant:"link",children:"Sign in to GitHub Copilot"});case"signingIn":return a.jsxs("ol",{className:"ml-4 text-sm list-decimal [&>li]:mt-2",children:[a.jsx("li",{children:a.jsxs("div",{className:"flex items-center",children:["Copy this code:",a.jsx("strong",{className:"ml-2",children:null==o?void 0:o.code}),a.jsx(z,{className:"ml-2 cursor-pointer opacity-60 hover:opacity-100 h-3 w-3",onClick:async()=>{o&&(await U(o.code),_({description:"Copied to clipboard"}))}})]})}),a.jsxs("li",{children:["Enter the code at this link:",a.jsx("a",{href:null==o?void 0:o.url,target:"_blank",rel:"noreferrer",className:q({variant:"link",size:"xs"}),children:null==o?void 0:o.url})]}),a.jsxs("li",{children:["Click here when done:",a.jsxs(L,{size:"xs",onClick:h,className:"ml-1",children:[l&&a.jsx(H,{className:"h-3 w-3 mr-1 animate-spin"}),"Done"]})]})]});case"signInFailed":return a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("div",{className:"text-destructive text-sm",children:"Sign in failed. Please try again."}),l?a.jsx(H,{className:"h-3 w-3 mr-1 animate-spin"}):a.jsx(L,{onClick:u,size:"xs",variant:"link",children:"Connect to GitHub Copilot"})]});case"signedIn":return a.jsxs("div",{className:"flex items-center gap-5",children:[a.jsxs(M,{className:"font-normal flex items-center",children:[a.jsx("div",{className:"inline-flex items-center justify-center bg-[var(--grass-7)] rounded-full p-1 mr-2",children:a.jsx(F,{className:"h-3 w-3 text-white"})}),"Connected"]}),a.jsx(L,{onClick:f,size:"xs",variant:"text",children:"Disconnect"})]});case"connectionError":return a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs(M,{className:"font-normal flex",children:[a.jsx(d,{className:"h-4 w-4 mr-1"}),"Connection Error"]}),a.jsx("div",{className:"text-sm",children:"Unable to connect to GitHub Copilot."}),a.jsx(L,{onClick:u,size:"xs",variant:"link",children:"Retry Connection"})]});case"notConnected":return a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs(M,{className:"font-normal flex",children:[a.jsx(d,{className:"h-4 w-4 mr-1"}),"Unable to connect"]}),a.jsxs("div",{className:"text-sm",children:["For troubleshooting, see the"," ",a.jsx(R,{href:"https://docs.marimo.io/getting_started/index.html#github-copilot",children:"docs"}),"."]})]})}})()}));vn.displayName="CopilotConfig";const yn={map:{args:["lhs","rhs"]},nmap:{mode:"normal",args:["lhs","rhs"]},vmap:{mode:"visual",args:["lhs","rhs"]},imap:{mode:"insert",args:["lhs","rhs"]},noremap:{args:["lhs","rhs"]},nnoremap:{mode:"normal",args:["lhs","rhs"]},vnoremap:{mode:"visual",args:["lhs","rhs"]},inoremap:{mode:"insert",args:["lhs","rhs"]},unmap:{args:["lhs"]},nunmap:{mode:"normal",args:["lhs"]},vunmap:{mode:"visual",args:["lhs"]},iunmap:{mode:"insert",args:["lhs"]},mapclear:{},nmapclear:{mode:"normal"},vmapclear:{mode:"visual"},imapclear:{mode:"insert"}};function xn(e,t){const n=e.split(/\s+/),r=n[0];let i=0;if(r in yn){const o=yn[r],s={};for(const l of o.args||[]){if(i+=1,!(i<n.length))return void(t&&t(`Not enough arguments for "${r}" command: "${e}"`));s[l]=n[i]}const a={name:r};return"args"in o&&(a.args=s),"mode"in o&&(a.mode=o.mode),a}t&&t(`Unknown vimrc command: "${e}"`)}var bn;const jn=D((()=>{Q.defineAction("goToDefinition",(e=>{const t=e.cm6;return Z(t)})),Q.mapCommand("gd","action","goToDefinition",{},{context:"normal"}),Q.defineEx("write","w",(e=>{const t=e.cm6;if(t){t.state.facet(G).saveNotebook()}}))})),wn=D((async()=>{var e;const t=null==(e=y.get(j).keymap)?void 0:e.vimrc;if(t)try{S.log(`Loading vimrc from ${t}`);const e=(await J({path:t})).contents;if(!e)return void S.error(`Failed to load vimrc from ${t}`);const n=function(e,t){const n=[];for(const r of e.split("\n")){if(r.startsWith('"')||""===r.trim())continue;const e=xn(r,t);e&&n.push(e)}return n}(e,S.warn);!function(e){function t(e){e.args&&e.args.lhs&&e.args.rhs?e.mode?Q.map(e.args.lhs,e.args.rhs,e.mode):Q.map(e.args.lhs,e.args.rhs):S.warn(`Could not execute vimrc command "${e.name}: expected arguments"`)}function n(e){e.args&&e.args.lhs&&e.args.rhs?e.mode?Q.noremap(e.args.lhs,e.args.rhs,e.mode):Q.noremap(e.args.lhs,e.args.rhs):S.warn(`Could not execute vimrc command "${e.name}: expected arguments"`)}function r(e){e.args&&e.args.lhs?e.mode?Q.unmap(e.args.lhs,e.mode):Q.unmap(e.args.lhs):S.warn(`Could not execute vimrc command "${e.name}: expected arguments"`)}function i(e){e.mode?Q.mapclear(e.mode):Q.mapclear()}for(const o of e)"map|nmap|vmap|imap".split("|").includes(o.name)?t(o):"noremap|nnoremap|vnoremap|inoremap".split("|").includes(o.name)?n(o):"unmap|nunmap|vunmap|iunmap".split("|").includes(o.name)?r(o):"mapclear|nmapclear|vmapclear|imapclear".split("|").includes(o.name)?i(o):S.warn(`Could not execute vimrc command "${o.name}: unknown command"`)}(n)}catch(n){S.error("Failed to load vimrc:",n)}}));class In{constructor(){this.instances=new Set,this.isBroadcasting=!1}addInstance(e){this.instances.add(e);const t=X(e);t?t.on("vim-mode-change",(t=>{var n;this.isBroadcasting||(ee("mode"in t,'Expected event to have a "mode" property'),this.isBroadcasting=!0,n=()=>{this.broadcastModeChange(e,t.mode,t.subMode),this.isBroadcasting=!1},"scheduler"in window?window.scheduler.postTask(n,{priority:"background"}):"requestIdleCallback"in window?requestIdleCallback(n):setTimeout(n,0))})):S.warn("Expected CodeMirror instance to have CodeMirror instance state")}removeInstance(e){this.instances.delete(e)}broadcastModeChange(e,t,n){ee("exitInsertMode"in Q,"Vim does not have an exitInsertMode method"),ee("exitVisualMode"in Q,"Vim does not have an exitVisualMode method");for(const r of this.instances)if(r!==e){const e=X(r);if(!e){S.warn("Expected CodeMirror instance to have CodeMirror instance state");continue}const n=e.setSelections.bind(e);if(e.setSelections=()=>[],!Sn(e)){S.warn("Expected CodeMirror instance to have Vim state");continue}const i=e.state.vim;switch(t){case"normal":i.insertMode&&Q.exitInsertMode(e,!0),i.visualMode&&Q.exitVisualMode(e,!0);break;case"insert":i.insertMode||Q.handleKey(e,"i","")}e.setSelections=n}}}function Sn(e){return void 0!==e.state.vim}bn=In,In.INSTANCES=new bn;const On=["default","vim"];function Cn(e,t){switch(e.preset){case"default":return[V.of(Nn()),V.of(Dn(t)),ne.low(V.of([{key:"Escape",preventDefault:!0,run:e=>(e.contentDOM.blur(),!0)}]))];case"vim":return[V.of(En()),V.of(Dn(t)),V.of([{key:"Enter",run:e=>{var t;const n=X(e);return!!(null==(t=null==n?void 0:n.state.vim)?void 0:t.insertMode)&&ie(e)}}]),ne.high(Tn("d",(e=>""===e.state.doc.toString()),(e=>{if(""===e.state.doc.toString()){return e.state.facet(G).deleteCell(),!0}return!1}))),re({status:!1}),ne.high((jn(),wn(),[V.of([{key:"j",run:e=>{if(W(e,!0)&&K(e)){const t=e.state.facet(G),n=e.state.facet($);return t.moveToNextCell({cellId:n,before:!1,noCreate:!0}),!0}return!1}}]),V.of([{key:"k",run:e=>{if(Y(e)&&K(e)){const t=e.state.facet(G),n=e.state.facet($);return t.moveToNextCell({cellId:n,before:!0,noCreate:!0}),!0}return!1}}]),V.of([{linux:"Ctrl-[",run:e=>{const t=X(e);return t?Sn(t)?!!t.state.vim.insertMode&&(Q.exitInsertMode(t,!0),!0):(S.warn("Expected CodeMirror instance to have Vim state"),!1):(S.warn("Expected CodeMirror instance to have CodeMirror instance state"),!1)}}]),B.define((e=>(requestAnimationFrame((()=>{In.INSTANCES.addInstance(e)})),{destroy(){In.INSTANCES.removeInstance(e)}})))]))];default:return te(e.preset),[]}}const kn=new Set([oe,se]),Nn=D((()=>ae.filter((e=>!kn.has(e.run))))),Dn=e=>[{key:e.getHotkey("cell.toggleComment").key,run:oe},{key:e.getHotkey("cell.toggleBlockComment").key,run:se}],En=D((()=>{const e=new Set(["Enter","Ctrl-v"]);return Nn().filter((t=>!e.has(t.key||t.mac||t.linux||t.win||"")))}));function Tn(e,t,n){let r="",i=0;return V.of([{any:(o,s)=>{const a=s.key,l=s.timeStamp;if(a!==e||!t(o))return r="",i=0,!1;if(r===e&&l-i<500){if(n(o))return r="",i=0,!0}return r=a,i=l,!1}}])}function _n(){return["compact","medium","full","columns"]}const Pn=x({});function An(){return ce(Pn)}function Mn(e,t){const n=o.c(13),{registerAction:r,unregisterAction:i}=function(){const e=P(Pn);return{registerAction:le(((t,n)=>{e((e=>({...e,[t]:n})))})),unregisterAction:le((t=>{e((e=>{const{[t]:n,...r}=e;return r}))}))}}(),s=ce(ue),a=t===de.NOOP;let l;n[0]!==t?(l=e=>t(e),n[0]=t,n[1]=l):l=n[1];const c=le(l);let u;n[2]!==t||n[3]!==s||n[4]!==e?(u=n=>{const r=s.getHotkey(e).key;if(he(r)(n)){!1!==t(n)&&(n.preventDefault(),n.stopPropagation())}},n[2]=t,n[3]=s,n[4]=e,n[5]=u):u=n[5];const d=le(u);let h,f;g(document,"keydown",d),n[6]!==a||n[7]!==c||n[8]!==r||n[9]!==e||n[10]!==i?(h=()=>{if(!a)return r(e,c),()=>i(e)},f=[c,e,a,r,i],n[6]=a,n[7]=c,n[8]=r,n[9]=e,n[10]=i,n[11]=h,n[12]=f):(h=n[11],f=n[12]),p.useEffect(h,f)}function Rn(e,t){const n=o.c(3),r=ce(ue);let i;n[0]!==t||n[1]!==r?(i=e=>{for(const[n,i]of fe.entries(t)){if(void 0===i)continue;const t=r.getHotkey(n).key;if(he(t)(e)){S.debug("Satisfied",t,e);!1!==i(e)&&(e.preventDefault(),e.stopPropagation())}}},n[0]=t,n[1]=r,n[2]=i):i=n[2],g(e,"keydown",i)}function Ln(e,t){const n=o.c(2);let r;n[0]!==t?(r=e=>{for(const[n,r]of fe.entries(t))if(he(n)(e)){S.debug("Satisfied",n,e);!1!==r(e)&&(e.preventDefault(),e.stopPropagation())}},n[0]=t,n[1]=r):r=n[1],g(e,"keydown",r)}const Fn=x(!1),Hn=()=>{const e=o.c(78),[t,n]=A(Fn),[r,i]=p.useState(null);let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=[],e[0]=s):s=e[0];const[l,c]=p.useState(s),[u,h]=pe(),f=ce(ue);let g,m;e[1]!==n?(g=()=>n(zn),e[1]=n,e[2]=g):g=e[2],Mn("global.showHelp",g),e[3]!==u||e[4]!==h?(m=async e=>{const t={...u};h(e),await ge({config:e}).catch((e=>{throw h(t),e}))},e[3]=u,e[4]=h,e[5]=m):m=e[5];const v=m;let y;e[6]!==u||e[7]!==r||e[8]!==v?(y=async e=>{if(!r)return;const t=e.join("-"),n={...u,keymap:{...u.keymap,overrides:{...u.keymap.overrides,[r]:t}}};i(null),c([]),await v(n)},e[6]=u,e[7]=r,e[8]=v,e[9]=y):y=e[9];const x=y;let b;e[10]!==u||e[11]!==r||e[12]!==v?(b=async()=>{if(!r)return;const e={...u,keymap:{...u.keymap,overrides:{...u.keymap.overrides}}};delete e.keymap.overrides[r],i(null),c([]),await v(e)},e[10]=u,e[11]=r,e[12]=v,e[13]=b):b=e[13];const j=b;let w;e[14]!==u||e[15]!==v?(w=async()=>{if(!window.confirm("Are you sure you want to reset all shortcuts to their default values?"))return;const e={...u,keymap:{...u.keymap,overrides:{}}};i(null),c([]),await v(e)},e[14]=u,e[15]=v,e[16]=w):w=e[16];const I=w;if(!t)return null;let S;e[17]!==r||e[18]!==x||e[19]!==j||e[20]!==f||e[21]!==l?(S=e=>{const t=f.getHotkey(e);if(r===e){const n=me(e);return a.jsxs("div",{children:[a.jsx(ve,{defaultValue:l.join("+"),placeholder:t.name,onKeyDown:e=>{e.preventDefault();const t=[];if("Meta"===e.key||"Control"===e.key||"Alt"===e.key||"Shift"===e.key)return;if(e.metaKey&&t.push(ye()?"Cmd":"Meta"),e.ctrlKey&&t.push("Ctrl"),e.altKey&&t.push("Alt"),e.shiftKey&&t.push("Shift"),"-"===e.key)return;if("Escape"===e.key&&0===t.length)return i(null),void c([]);let n=e.key.toLowerCase();" "===e.key&&(n="Space"),t.push(n),x(t)},autoFocus:!0,endAdornment:a.jsx(L,{variant:"text",size:"xs",className:"mb-0",onClick:()=>{i(null),c([])},children:a.jsx(d,{className:"w-4 h-4"})})}),a.jsxs("div",{className:"flex items-center justify-between w-full",children:[a.jsx("span",{className:"text-muted-foreground text-xs",children:"Press a key combination"}),n.key!==t.key&&a.jsxs("span",{className:"text-xs cursor-pointer text-primary",onClick:j,children:["Reset to default:"," ",a.jsx("span",{className:"font-mono",children:n.key})]})]})]},e)}return a.jsxs("div",{className:"grid grid-cols-[auto,2fr,3fr] gap-2 items-center",children:[f.isEditable(e)?a.jsx(xe,{className:"cursor-pointer opacity-60 hover:opacity-100 text-muted-foreground w-3 h-3",onClick:()=>{c([]),i(e)}}):a.jsx("div",{className:"w-3 h-3"}),a.jsx(be,{className:"justify-end",shortcut:t.key}),a.jsx("span",{children:t.name.toLowerCase()})]},e)},e[17]=r,e[18]=x,e[19]=j,e[20]=f,e[21]=l,e[22]=S):S=e[22];const O=S;let C,k,N,D,E,T,_,P,M,R,F,H,z,U,q,V,B,W,K,G,$,Y,X,Q;if(e[23]!==f||e[24]!==t||e[25]!==O||e[26]!==n){const r=f.getHotkeyGroups(),i=e=>{const t=r[e];return a.jsxs("div",{className:"mb-[40px] gap-2 flex flex-col",children:[a.jsx("h3",{className:"text-lg font-medium",children:e}),t.map((e=>O(e)))]})};N=je,z=t,e[44]!==n?(U=e=>n(e),e[44]=n,e[45]=U):U=e[45],k=we,F="sm:items-center sm:top-0",e[46]===Symbol.for("react.memo_cache_sentinel")?(H=a.jsx(Ie,{}),e[46]=H):H=e[46],C=Se,P=!1,M="max-h-screen sm:max-h-[90vh] overflow-y-auto sm:max-w-[850px]",e[47]===Symbol.for("react.memo_cache_sentinel")?(R=a.jsx(Oe,{children:a.jsx(Ce,{children:"Shortcuts"})}),e[47]=R):R=e[47],T="flex flex-row gap-3",_=a.jsxs("div",{className:"w-1/2",children:[i("Editing"),i("Markdown")]}),q="w-1/2",V=i("Navigation"),B=i("Running Cells"),D=i("Creation and Ordering"),E=i("Other"),e[23]=f,e[24]=t,e[25]=O,e[26]=n,e[27]=C,e[28]=k,e[29]=N,e[30]=D,e[31]=E,e[32]=T,e[33]=_,e[34]=P,e[35]=M,e[36]=R,e[37]=F,e[38]=H,e[39]=z,e[40]=U,e[41]=q,e[42]=V,e[43]=B}else C=e[27],k=e[28],N=e[29],D=e[30],E=e[31],T=e[32],_=e[33],P=e[34],M=e[35],R=e[36],F=e[37],H=e[38],z=e[39],U=e[40],q=e[41],V=e[42],B=e[43];return e[48]===Symbol.for("react.memo_cache_sentinel")?(W=a.jsx("span",{className:"text-destructive",children:"Reset all to default"}),e[48]=W):W=e[48],e[49]!==I?(K=a.jsx(L,{className:"mt-4 hover:bg-destructive/10 hover:border-destructive",variant:"outline",size:"xs",onClick:I,tabIndex:-1,children:W}),e[49]=I,e[50]=K):K=e[50],e[51]!==D||e[52]!==E||e[53]!==K||e[54]!==q||e[55]!==V||e[56]!==B?(G=a.jsxs("div",{className:q,children:[V,B,D,E,K]}),e[51]=D,e[52]=E,e[53]=K,e[54]=q,e[55]=V,e[56]=B,e[57]=G):G=e[57],e[58]!==T||e[59]!==_||e[60]!==G?($=a.jsxs("div",{className:T,children:[_,G]}),e[58]=T,e[59]=_,e[60]=G,e[61]=$):$=e[61],e[62]!==C||e[63]!==P||e[64]!==M||e[65]!==R||e[66]!==$?(Y=a.jsxs(C,{usePortal:P,className:M,children:[R,$]}),e[62]=C,e[63]=P,e[64]=M,e[65]=R,e[66]=$,e[67]=Y):Y=e[67],e[68]!==k||e[69]!==F||e[70]!==H||e[71]!==Y?(X=a.jsxs(k,{className:F,children:[H,Y]}),e[68]=k,e[69]=F,e[70]=H,e[71]=Y,e[72]=X):X=e[72],e[73]!==N||e[74]!==z||e[75]!==U||e[76]!==X?(Q=a.jsx(N,{open:z,onOpenChange:U,children:X}),e[73]=N,e[74]=z,e[75]=U,e[76]=X,e[77]=Q):Q=e[77],Q};function zn(e){return!e}const Un=["claude-3-7-sonnet-20250219","claude-3-5-sonnet-20241022","claude-3-opus","claude-3.5-haiku","claude-3.5-sonnet","deepseek-v3","gemini-2.0-flash-exp","gemini-2.0-flash-thinking-exp","gemini-exp-1206","gpt-3.5-turbo","gpt-4","gpt-4-turbo-2024-04-09","gpt-4o","gpt-4o-mini","o1","o1-mini","o1-preview"],qn=[{id:"sql",packagesRequired:[{name:"duckdb"},{name:"sqlglot"}],additionalPackageInstalls:[{name:"polars[pyarrow]"}],description:"SQL cells"},{id:"charts",packagesRequired:[{name:"altair"}],additionalPackageInstalls:[],description:"Charts in datasource viewer"},{id:"fast-charts",packagesRequired:[{name:"vegafusion"},{name:"vl-convert-python"}],additionalPackageInstalls:[],description:"Fast server-side charts"},{id:"formatting",packagesRequired:[c()?{name:"black"}:{name:"ruff"}],additionalPackageInstalls:[],description:"Formatting"},{id:"ai",packagesRequired:[{name:"openai"}],additionalPackageInstalls:[],description:"AI features"},{id:"ipy-export",packagesRequired:[{name:"nbformat"}],additionalPackageInstalls:[],description:"Export as IPYNB"},{id:"testing",packagesRequired:[{name:"pytest"}],additionalPackageInstalls:[],description:"Autorun unit tests"}];c()||qn.push({id:"lsp",packagesRequired:[{name:"python-lsp-server"},{name:"websockets"}],additionalPackageInstalls:[{name:"python-lsp-ruff"}],description:"Language Server Protocol*"});const Vn=()=>{const e=o.c(21),[t]=pe(),n=t.package_management.manager;let r;e[0]!==n?(r=[n],e[0]=n,e[1]=r):r=e[1];const{data:i,loading:s,error:l,reload:c}=ke(Wn,r);if(s&&!i){let t;return e[2]===Symbol.for("react.memo_cache_sentinel")?(t=a.jsx(_e,{size:"medium",centered:!0}),e[2]=t):t=e[2],t}if(l){let t;return e[3]!==l?(t=a.jsx(Me,{error:l}),e[3]=l,e[4]=t):t=e[4],t}let u;e[5]!==(null==i?void 0:i.packages)?(u=(null==i?void 0:i.packages)||[],e[5]=null==i?void 0:i.packages,e[6]=u):u=e[6];const d=u;let h;e[7]!==d?(h=new Set(d.map(Kn)),e[7]=d,e[8]=h):h=e[8];const f=h;let p,g,m,v,y,x,b;return e[9]===Symbol.for("react.memo_cache_sentinel")?(p=a.jsx(Qt,{children:"Optional Features"}),e[9]=p):p=e[9],e[10]===Symbol.for("react.memo_cache_sentinel")?(g=a.jsxs("p",{className:"text-sm text-muted-foreground",children:["marimo is lightweight, with few dependencies, to maximize compatibility with your own environments.",a.jsx("br",{}),"To unlock additional features in the marimo editor, you can install these optional dependencies:"]}),e[10]=g):g=e[10],e[11]===Symbol.for("react.memo_cache_sentinel")?(m=a.jsx(Re,{children:a.jsxs(Ne,{children:[a.jsx(Le,{children:"Dependency"}),a.jsx(Le,{children:"Feature"}),a.jsx(Le,{children:"Status"}),a.jsx(Le,{})]})}),e[11]=m):m=e[11],e[12]!==f||e[13]!==n||e[14]!==c?(v=qn.map((e=>{const t=e.packagesRequired.every((e=>f.has(e.name.split("[")[0]))),r=e.packagesRequired.map(Gn).join(", ");return a.jsxs(Ne,{className:"text-sm",children:[a.jsx(De,{children:e.description}),a.jsx(De,{className:"font-mono text-xs",children:r}),a.jsx(De,{children:t?a.jsxs("div",{className:"flex items-center",children:[a.jsx(Dt,{className:"h-4 w-4 text-[var(--grass-10)] mr-2"}),a.jsx("span",{children:"Installed"})]}):a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ee,{className:"h-4 w-4 text-[var(--red-10)] mr-2"}),a.jsx(Bn,{packageSpecs:[...e.packagesRequired,...e.additionalPackageInstalls],packageManager:n,onSuccess:c})]})})]},e.id)})),e[12]=f,e[13]=n,e[14]=c,e[15]=v):v=e[15],e[16]!==v?(y=a.jsxs(Fe,{children:[m,a.jsx(He,{children:v})]}),e[16]=v,e[17]=y):y=e[17],e[18]===Symbol.for("react.memo_cache_sentinel")?(x=a.jsx("p",{className:"text-muted-foreground mt-2",children:"*Requires server restart"}),e[18]=x):x=e[18],e[19]!==y?(b=a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden gap-2",children:[p,g,y,x]}),e[19]=y,e[20]=b):b=e[20],b},Bn=({packageSpecs:e,packageManager:t,onSuccess:n})=>{const[r,o]=i.useState(!1);return a.jsxs(L,{size:"xs",variant:"outline",className:m("text-xs",r&&"opacity-50 cursor-not-allowed"),onClick:async()=>{try{o(!0);const t=e.map((e=>e.minVersion?`${e.name}>=${e.minVersion}`:e.name)).join(" "),r=await Pe({package:t});r.success?(n(),_({title:"Package installed",description:a.jsxs("span",{children:["The packages"," ",a.jsx(Ae,{className:"inline",children:e.map((e=>e.name)).join(", ")})," ","have been added to your environment."]})})):_({title:"Failed to install package",description:r.error,variant:"danger"})}finally{o(!1)}},disabled:r,children:[r?a.jsx(_e,{size:"small",className:"mr-2 h-3 w-3"}):a.jsx(kt,{className:"mr-2 h-3 w-3"}),"Install with ",t]})};function Wn(){return Te()}function Kn(e){return e.name}function Gn(e){return e.name}const $n="flex flex-row items-center space-x-1 space-y-0",Yn=[{id:"editor",label:"Editor",Icon:xe,className:"bg-[var(--blue-4)]"},{id:"display",label:"Display",Icon:Lt,className:"bg-[var(--grass-4)]"},{id:"packageManagement",label:"Package Management",Icon:Ft,className:"bg-[var(--red-4)]"},{id:"runtime",label:"Runtime",Icon:Et,className:"bg-[var(--amber-4)]"},{id:"ai",label:"AI",Icon:Nt,className:"bg-[linear-gradient(45deg,var(--purple-5),var(--cyan-5))]"},{id:"optionalDeps",label:"Optional Dependencies",Icon:_t,className:"bg-[var(--orange-4)]"},{id:"labs",label:"Labs",Icon:Tt,className:"bg-[var(--slate-4)]"}],Xn=x(Yn[0].id),Qn=()=>{const e=o.c(42),[t,n]=ze(),r=p.useRef(null),i=P(Fn),[s,l]=A(Xn),u=ce(Ue);let d,h;e[0]===Symbol.for("react.memo_cache_sentinel")?(d=qe(Ve),e[0]=d):d=e[0],e[1]!==t?(h={resolver:d,defaultValues:t},e[1]=t,e[2]=h):h=e[2];const f=Be(h);let g;e[3]!==n?(g=async e=>{await ge({config:e}).then((()=>{n(e)}))},e[3]=n,e[4]=g):g=e[4];const m=g;let v;e[5]===Symbol.for("react.memo_cache_sentinel")?(v=c(),e[5]=v):v=e[5];const y=v;let x;e[6]!==t||e[7]!==f?(x=()=>{const e=f.getValues("completion.copilot");return!1===e?null:"codeium"===e?a.jsxs(a.Fragment,{children:[a.jsxs("p",{className:"text-sm text-muted-secondary",children:["To get a Codeium API key, follow"," ",a.jsx(R,{href:"https://docs.marimo.io/guides/editor_features/ai_completion.html#codeium-copilot",children:"these instructions"}),"."]}),a.jsx(Ye,{control:f.control,name:"completion.codeium_api_key",render:e=>{const{field:n}=e;return a.jsxs(Xe,{className:$n,children:[a.jsx(Qe,{children:"API Key"}),a.jsx(Ze,{children:a.jsx(ve,{"data-testid":"codeium-api-key-input",className:"m-0 inline-flex",placeholder:"key",...n,value:n.value||""})}),a.jsx(Je,{}),a.jsx(Jn,{userConfig:t,name:"completion.codeium_api_key"})]})}})]}):"github"===e?a.jsx(vn,{}):"custom"===e?a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"text-sm text-muted-secondary",children:"Configure your custom AI completion provider with the following settings."}),a.jsx(Ye,{control:f.control,name:"completion.model",render:e=>{const{field:n}=e;return a.jsxs(Xe,{className:$n,children:[a.jsx(Qe,{children:"Model"}),a.jsx(Ze,{children:a.jsx(ve,{"data-testid":"custom-model-input",className:"m-0 inline-flex",placeholder:"Qwen2.5-Coder-7B",...n,value:n.value||""})}),a.jsx(Je,{}),a.jsx(Jn,{userConfig:t,name:"completion.model"})]})}}),a.jsx(Ye,{control:f.control,name:"completion.base_url",render:e=>{const{field:n}=e;return a.jsxs(Xe,{className:$n,children:[a.jsx(Qe,{children:"Base URL"}),a.jsx(Ze,{children:a.jsx(ve,{"data-testid":"custom-base-url-input",className:"m-0 inline-flex",placeholder:"http://localhost:11434/v1",...n,value:n.value||""})}),a.jsx(Je,{}),a.jsx(Jn,{userConfig:t,name:"completion.base_url"})]})}}),a.jsx(Ye,{control:f.control,name:"completion.api_key",render:e=>{const{field:n}=e;return a.jsxs(Xe,{className:$n,children:[a.jsx(Qe,{children:"API Key"}),a.jsx(Ze,{children:a.jsx(ve,{"data-testid":"custom-api-key-input",className:"m-0 inline-flex",placeholder:"key",...n,value:n.value||""})}),a.jsx(Je,{}),a.jsx(Jn,{userConfig:t,name:"completion.api_key"})]})}})]}):void 0},e[6]=t,e[7]=f,e[8]=x):x=e[8];const b=x;let j;e[9]!==s||e[10]!==u||e[11]!==t||e[12]!==f||e[13]!==m||e[14]!==b||e[15]!==l||e[16]!==i?(j=()=>{switch(s){case"editor":return a.jsxs(a.Fragment,{children:[a.jsxs(Zn,{title:"Autosave",children:[a.jsx(Ye,{control:f.control,name:"save.autosave",render:e=>{const{field:n}=e;return a.jsxs(Xe,{className:$n,children:[a.jsx(Qe,{className:"font-normal",children:"Autosave enabled"}),a.jsx(Ze,{children:a.jsx(rt,{"data-testid":"autosave-checkbox",checked:"after_delay"===n.value,disabled:n.disabled,onCheckedChange:e=>{n.onChange(e?"after_delay":"off")}})}),a.jsx(Je,{}),a.jsx(Jn,{userConfig:t,name:"save.autosave"})]})}}),a.jsx(Ye,{control:f.control,name:"save.autosave_delay",render:e=>{const{field:n}=e;return a.jsxs(Xe,{className:$n,children:[a.jsx(Qe,{children:"Autosave delay (seconds)"}),a.jsx(Ze,{children:a.jsx(st,{"data-testid":"autosave-delay-input",className:"m-0 w-24",isDisabled:"after_delay"!==f.getValues("save.autosave"),...n,value:n.value/1e3,minValue:1,onChange:e=>{n.onChange(1e3*e),Number.isNaN(e)||m(f.getValues())}})}),a.jsx(Je,{}),a.jsx(Jn,{userConfig:t,name:"save.autosave_delay"})]})}})]}),a.jsxs(Zn,{title:"Formatting",children:[a.jsx(Ye,{control:f.control,name:"save.format_on_save",render:e=>{const{field:n}=e;return a.jsxs(Xe,{className:$n,children:[a.jsx(Qe,{className:"font-normal",children:"Format on save"}),a.jsx(Ze,{children:a.jsx(rt,{"data-testid":"format-on-save-checkbox",checked:n.value,disabled:n.disabled,onCheckedChange:e=>{n.onChange(e)}})}),a.jsx(Je,{}),a.jsx(Jn,{userConfig:t,name:"save.format_on_save"})]})}}),a.jsx(Ye,{control:f.control,name:"formatting.line_length",render:e=>{const{field:n}=e;return a.jsxs("div",{className:"flex flex-col space-y-1",children:[a.jsxs(Xe,{className:$n,children:[a.jsx(Qe,{children:"Line length"}),a.jsx(Ze,{children:a.jsx(st,{"data-testid":"line-length-input",className:"m-0 w-24",...n,value:n.value,minValue:1,maxValue:1e3,onChange:e=>{n.onChange(e),Number.isNaN(e)||m(f.getValues())}})}),a.jsx(Je,{}),a.jsx(Jn,{userConfig:t,name:"formatting.line_length"})]}),a.jsx(tt,{children:"Maximum line length when formatting code."})]})}})]}),a.jsx(Zn,{title:"Autocomplete",children:a.jsx(Ye,{control:f.control,name:"completion.activate_on_typing",render:e=>{const{field:n}=e;return a.jsxs("div",{className:"flex flex-col space-y-1",children:[a.jsxs(Xe,{className:$n,children:[a.jsx(Qe,{className:"font-normal",children:"Autocomplete"}),a.jsx(Ze,{children:a.jsx(rt,{"data-testid":"autocomplete-checkbox",checked:n.value,disabled:n.disabled,onCheckedChange:e=>{n.onChange(Boolean(e))}})}),a.jsx(Je,{}),a.jsx(Jn,{userConfig:t,name:"completion.activate_on_typing"})]}),a.jsx(tt,{children:"When unchecked, code completion is still available through a hotkey."}),a.jsx("div",{children:a.jsx(L,{variant:"link",className:"mb-0 px-0",type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),l("ai")},children:"Edit AI autocomplete"})})]})}})}),a.jsxs(Zn,{title:"Language Servers",children:[a.jsx(Ye,{control:f.control,name:"language_servers.pylsp.enabled",render:e=>{const{field:n}=e;return a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs(Xe,{className:$n,children:[a.jsxs(Qe,{children:[a.jsx(at,{variant:"defaultOutline",className:"mr-2",children:"Beta"}),"Python Language Server (",a.jsx(R,{href:"https://github.com/python-lsp/python-lsp-server",children:"pylsp"}),")"]}),a.jsx(Ze,{children:a.jsx(rt,{"data-testid":"pylsp-checkbox",checked:n.value,disabled:n.disabled,onCheckedChange:e=>{n.onChange(Boolean(e))}})}),a.jsx(Je,{}),a.jsx(Jn,{userConfig:t,name:"language_servers.pylsp.enabled"})]}),n.value&&!u.pylsp&&a.jsxs(lt,{kind:"danger",children:["The Python Language Server is not available in your current environment. Please install"," ",a.jsx(Ae,{className:"inline",children:"python-lsp-server"})," in your environment."]})]})}}),a.jsxs(tt,{children:["See the"," ",a.jsx(R,{href:"https://docs.marimo.io/guides/editor_features/language_server/",children:"docs"})," ","for more information about language server support."]}),a.jsx(Ye,{control:f.control,name:"diagnostics.enabled",render:e=>{const{field:n}=e;return a.jsxs(Xe,{className:$n,children:[a.jsxs(Qe,{children:[a.jsx(at,{variant:"defaultOutline",className:"mr-2",children:"Beta"}),"Diagnostics"]}),a.jsx(Ze,{children:a.jsx(rt,{"data-testid":"diagnostics-checkbox",checked:n.value,disabled:n.disabled,onCheckedChange:e=>{n.onChange(Boolean(e))}})}),a.jsx(Je,{}),a.jsx(Jn,{userConfig:t,name:"diagnostics.enabled"})]})}})]}),a.jsx(Zn,{title:"Keymap",children:a.jsx(Ye,{control:f.control,name:"keymap.preset",render:e=>{const{field:n}=e;return a.jsxs("div",{className:"flex flex-col space-y-1",children:[a.jsxs(Xe,{className:$n,children:[a.jsx(Qe,{children:"Keymap"}),a.jsx(Ze,{children:a.jsx(et,{"data-testid":"keymap-select",onChange:e=>n.onChange(e.target.value),value:n.value,disabled:n.disabled,className:"inline-flex mr-2",children:On.map(er)})}),a.jsx(Je,{}),a.jsx(Jn,{userConfig:t,name:"keymap.preset"})]}),a.jsx("div",{children:a.jsx(L,{variant:"link",className:"mb-0 px-0",type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),i(!0)},children:"Edit Keyboard Shortcuts"})})]})}})})]});case"display":return a.jsxs(a.Fragment,{children:[a.jsxs(Zn,{title:"Display",children:[a.jsx(Ye,{control:f.control,name:"display.default_width",render:e=>{const{field:n}=e;return a.jsxs("div",{className:"flex flex-col space-y-1",children:[a.jsxs(Xe,{className:$n,children:[a.jsx(Qe,{children:"Default width"}),a.jsx(Ze,{children:a.jsx(et,{"data-testid":"user-config-width-select",onChange:e=>n.onChange(e.target.value),value:n.value,disabled:n.disabled,className:"inline-flex mr-2",children:["compact","medium","full","columns"].map(tr)})}),a.jsx(Je,{}),a.jsx(Jn,{userConfig:t,name:"display.default_width"})]}),a.jsx(tt,{children:'The default app width for new notebooks; overridden by "width" in the application config.'})]})}}),a.jsx(Ye,{control:f.control,name:"display.theme",render:e=>{const{field:n}=e;return a.jsxs("div",{className:"flex flex-col space-y-1",children:[a.jsxs(Xe,{className:$n,children:[a.jsx(Qe,{children:"Theme"}),a.jsx(Ze,{children:a.jsx(et,{"data-testid":"theme-select",onChange:e=>n.onChange(e.target.value),value:n.value,disabled:n.disabled,className:"inline-flex mr-2",children:ot.map(nr)})}),a.jsx(Je,{}),a.jsx(Jn,{userConfig:t,name:"display.theme"})]}),a.jsx(tt,{children:"This theme will be applied to the user's configuration; it does not affect theme when sharing the notebook."})]})}}),a.jsx(Ye,{control:f.control,name:"display.code_editor_font_size",render:e=>{const{field:n}=e;return a.jsxs(Xe,{className:$n,children:[a.jsx(Qe,{children:"Code editor font size (px)"}),a.jsx(Ze,{children:a.jsx("span",{className:"inline-flex mr-2",children:a.jsx(st,{"data-testid":"code-editor-font-size-input",className:"m-0 w-24",...n,value:n.value,minValue:8,maxValue:32,onChange:e=>{n.onChange(e),m(f.getValues())}})})}),a.jsx(Je,{}),a.jsx(Jn,{userConfig:t,name:"display.code_editor_font_size"})]})}})]}),a.jsxs(Zn,{title:"Outputs",children:[a.jsx(Ye,{control:f.control,name:"display.cell_output",render:e=>{const{field:n}=e;return a.jsxs("div",{className:"flex flex-col space-y-1",children:[a.jsxs(Xe,{className:$n,children:[a.jsx(Qe,{children:"Cell output area"}),a.jsx(Ze,{children:a.jsx(et,{"data-testid":"cell-output-select",onChange:e=>n.onChange(e.target.value),value:n.value,disabled:n.disabled,className:"inline-flex mr-2",children:["above","below"].map(rr)})}),a.jsx(Je,{}),a.jsx(Jn,{userConfig:t,name:"display.cell_output"})]}),a.jsx(tt,{children:"Where to display cell's output."})]})}}),a.jsx(Ye,{control:f.control,name:"display.dataframes",render:e=>{const{field:n}=e;return a.jsxs("div",{className:"flex flex-col space-y-1",children:[a.jsxs(Xe,{className:$n,children:[a.jsx(Qe,{children:"Dataframe viewer"}),a.jsx(Ze,{children:a.jsx(et,{"data-testid":"display-dataframes-select",onChange:e=>n.onChange(e.target.value),value:n.value,disabled:n.disabled,className:"inline-flex mr-2",children:["rich","plain"].map(ir)})}),a.jsx(Je,{}),a.jsx(Jn,{userConfig:t,name:"display.dataframes"})]}),a.jsx(tt,{children:"Whether to use marimo's rich dataframe viewer or a plain HTML table. This requires restarting your notebook to take effect."})]})}}),a.jsx(Ye,{control:f.control,name:"display.default_table_page_size",render:e=>{const{field:n}=e;return a.jsxs("div",{className:"flex flex-col space-y-1",children:[a.jsxs(Xe,{className:$n,children:[a.jsx(Qe,{children:"Default table page size"}),a.jsx(Ze,{children:a.jsx(st,{"data-testid":"default-table-page-size-input",className:"m-0 w-24",...n,value:n.value,minValue:1,step:1,onChange:e=>{n.onChange(e),Number.isNaN(e)||m(f.getValues())}})}),a.jsx(Je,{}),a.jsx(Jn,{userConfig:t,name:"display.default_table_page_size"})]}),a.jsx(tt,{children:"The default number of rows displayed in dataframes and SQL results."})]})}})]})]});case"packageManagement":return a.jsx(Zn,{title:"Package Management",children:a.jsx(Ye,{control:f.control,disabled:y,name:"package_management.manager",render:e=>{const{field:n}=e;return a.jsxs("div",{className:"flex flex-col space-y-1",children:[a.jsxs(Xe,{className:$n,children:[a.jsx(Qe,{children:"Manager"}),a.jsx(Ze,{children:a.jsx(et,{"data-testid":"package-manager-select",onChange:e=>n.onChange(e.target.value),value:n.value,disabled:n.disabled,className:"inline-flex mr-2",children:it.map(or)})}),a.jsx(Je,{}),a.jsx(Jn,{userConfig:t,name:"package_management.manager"})]}),a.jsxs(tt,{children:["When marimo comes across a module that is not installed, you will be prompted to install it using your preferred package manager. Learn more in the"," ",a.jsx(R,{href:"https://docs.marimo.io/guides/editor_features/package_management.html",children:"docs"}),".",a.jsx("br",{}),a.jsx("br",{}),"Running marimo in a"," ",a.jsx(R,{href:"https://docs.marimo.io/guides/editor_features/package_management.html#running-marimo-in-a-sandbox-environment-uv-only",children:"sandboxed environment"})," ","is only supported by ",a.jsx(Ae,{className:"inline",children:"uv"})]})]})}})});case"runtime":return a.jsxs(Zn,{title:"Runtime configuration",children:[a.jsx(Ye,{control:f.control,name:"runtime.auto_instantiate",render:e=>{const{field:n}=e;return a.jsxs("div",{className:"flex flex-col gap-y-1",children:[a.jsxs(Xe,{className:$n,children:[a.jsx(Qe,{className:"font-normal",children:"Autorun on startup"}),a.jsx(Ze,{children:a.jsx(rt,{"data-testid":"auto-instantiate-checkbox",disabled:n.disabled,checked:n.value,onCheckedChange:n.onChange})}),a.jsx(Je,{}),a.jsx(Jn,{userConfig:t,name:"runtime.auto_instantiate"})]}),a.jsx(tt,{children:"Whether to automatically run all cells on startup."})]})}}),a.jsx(Ye,{control:f.control,name:"runtime.on_cell_change",render:e=>{const{field:n}=e;return a.jsxs("div",{className:"flex flex-col gap-y-1",children:[a.jsxs(Xe,{className:$n,children:[a.jsx(Qe,{className:"font-normal",children:"On cell change"}),a.jsx(Ze,{children:a.jsx(et,{"data-testid":"on-cell-change-select",onChange:e=>n.onChange(e.target.value),value:n.value,className:"inline-flex mr-2",children:["lazy","autorun"].map(sr)})}),a.jsx(Je,{}),a.jsx(Jn,{userConfig:t,name:"runtime.on_cell_change"})]}),a.jsx(tt,{children:'Whether marimo should automatically run cells or just mark them as stale. If "autorun", marimo will automatically run affected cells when a cell is run or a UI element is interacted with; if "lazy", marimo will mark affected cells as stale but won\'t re-run them.'})]})}}),a.jsx(Ye,{control:f.control,name:"runtime.auto_reload",render:e=>{const{field:n}=e;return a.jsxs("div",{className:"flex flex-col gap-y-1",children:[a.jsxs(Xe,{className:$n,children:[a.jsx(Qe,{className:"font-normal",children:"On module change"}),a.jsx(Ze,{children:a.jsx(et,{"data-testid":"auto-reload-select",onChange:e=>n.onChange(e.target.value),value:n.value,disabled:y,className:"inline-flex mr-2",children:["off","lazy","autorun"].map(ar)})}),a.jsx(Je,{}),a.jsx(Jn,{userConfig:t,name:"runtime.auto_reload"})]}),a.jsx(tt,{children:'Whether marimo should automatically reload modules before executing cells. If "lazy", marimo will mark cells affected by module modifications as stale; if "autorun", affected cells will be automatically re-run.'})]})}}),a.jsx(Ye,{control:f.control,name:"runtime.reactive_tests",render:e=>{const{field:n}=e;return a.jsxs("div",{className:"flex flex-col gap-y-1",children:[a.jsxs(Xe,{className:$n,children:[a.jsx(Qe,{className:"font-normal",children:"Autorun Unit Tests"}),a.jsx(Ze,{children:a.jsx(rt,{"data-testid":"reactive-test-checkbox",checked:n.value,onCheckedChange:n.onChange})})]}),a.jsx(Jn,{userConfig:t,name:"runtime.reactive_tests"}),a.jsx(Je,{}),a.jsx(tt,{children:"Enable reactive pytest tests in notebook. When a cell contains only test functions (test_*) and classes (Test_*), marimo will automatically run them with pytest (requires notebook restart)."})," "]})}}),a.jsxs(tt,{children:["Learn more in the"," ",a.jsx(R,{href:"https://docs.marimo.io/guides/reactivity/#configuring-how-marimo-runs-cells",children:"docs"}),"."]})]});case"ai":return a.jsxs(a.Fragment,{children:[a.jsxs(Zn,{title:"AI Code Completion",children:[a.jsx("p",{className:"text-sm text-muted-secondary",children:"You may use GitHub Copilot, Codeium, or a custom provider (e.g. Ollama) for AI code completion."}),a.jsx(Ye,{control:f.control,name:"completion.copilot",render:e=>{const{field:n}=e;return a.jsx("div",{className:"flex flex-col space-y-1",children:a.jsxs(Xe,{className:$n,children:[a.jsx(Qe,{children:"Provider"}),a.jsx(Ze,{children:a.jsx(et,{"data-testid":"copilot-select",onChange:e=>{"none"===e.target.value?n.onChange(!1):n.onChange(e.target.value)},value:!0===n.value?"github":!1===n.value?"none":n.value,disabled:n.disabled,className:"inline-flex mr-2",children:["none","github","codeium","custom"].map(lr)})}),a.jsx(Je,{}),a.jsx(Jn,{userConfig:t,name:"completion.copilot"})]})})}}),b()]}),a.jsxs(Zn,{title:"AI Keys",children:[a.jsx(Ye,{control:f.control,name:"ai.open_ai.api_key",render:e=>{const{field:n}=e;return a.jsxs("div",{className:"flex flex-col space-y-1",children:[a.jsxs(Xe,{className:$n,children:[a.jsx(Qe,{children:"OpenAI API Key"}),a.jsx(Ze,{children:a.jsx(ve,{"data-testid":"ai-openai-api-key-input",className:"m-0 inline-flex",placeholder:"sk-proj...",...n,onChange:e=>{const t=e.target.value;t.includes("*")||n.onChange(t)}})}),a.jsx(Je,{}),a.jsx(Jn,{userConfig:t,name:"ai.open_ai.api_key"})]}),a.jsxs(tt,{children:["Your OpenAI API key from"," ",a.jsx(R,{href:"https://platform.openai.com/account/api-keys",children:"platform.openai.com"}),"."]})]})}}),a.jsx(Ye,{control:f.control,name:"ai.anthropic.api_key",render:e=>{const{field:n}=e;return a.jsxs("div",{className:"flex flex-col space-y-1",children:[a.jsxs(Xe,{className:$n,children:[a.jsx(Qe,{children:"Anthropic API Key"}),a.jsx(Ze,{children:a.jsx(ve,{"data-testid":"ai-anthropic-api-key-input",className:"m-0 inline-flex",placeholder:"sk-ant...",...n,onChange:e=>{const t=e.target.value;t.includes("*")||n.onChange(t)}})}),a.jsx(Je,{}),a.jsx(Jn,{userConfig:t,name:"ai.anthropic.api_key"})]}),a.jsxs(tt,{children:["Your Anthropic API key from"," ",a.jsx(R,{href:"https://console.anthropic.com/settings/keys",children:"console.anthropic.com"}),"."]})]})}}),a.jsx(Ye,{control:f.control,name:"ai.google.api_key",render:e=>{const{field:n}=e;return a.jsxs("div",{className:"flex flex-col space-y-1",children:[a.jsxs(Xe,{className:$n,children:[a.jsx(Qe,{children:"Google AI API Key"}),a.jsx(Ze,{children:a.jsx(ve,{"data-testid":"ai-google-api-key-input",className:"m-0 inline-flex",placeholder:"AI...",...n,onChange:e=>{const t=e.target.value;t.includes("*")||n.onChange(t)}})}),a.jsx(Je,{}),a.jsx(Jn,{userConfig:t,name:"ai.google.api_key"})]}),a.jsxs(tt,{children:["Your Google AI API key from"," ",a.jsx(R,{href:"https://aistudio.google.com/app/apikey",children:"aistudio.google.com"}),"."]})]})}})]}),a.jsxs(Zn,{title:"AI Assist",children:[a.jsxs("p",{className:"text-sm text-muted-secondary",children:["Add an API key to ",a.jsx(Ae,{className:"inline",children:"marimo.toml"})," to activate marimo's AI assistant; see"," ",a.jsx(R,{href:"https://docs.marimo.io/guides/editor_features/ai_completion.html",children:"docs"})," ","for more info."]}),a.jsx(Ye,{control:f.control,disabled:y,name:"ai.open_ai.base_url",render:e=>{const{field:n}=e;return a.jsxs("div",{className:"flex flex-col space-y-1",children:[a.jsxs(Xe,{className:$n,children:[a.jsx(Qe,{children:"Base URL"}),a.jsx(Ze,{children:a.jsx(ve,{"data-testid":"ai-base-url-input",className:"m-0 inline-flex",placeholder:"https://api.openai.com/v1",...n})}),a.jsx(Je,{}),a.jsx(Jn,{userConfig:t,name:"ai.open_ai.base_url"})]}),a.jsx(tt,{children:"This URL can be any OpenAI-compatible API endpoint."})]})}}),a.jsx(Ye,{control:f.control,disabled:y,name:"ai.open_ai.model",render:e=>{const{field:n}=e;return a.jsxs("div",{className:"flex flex-col space-y-1",children:[a.jsxs(Xe,{className:$n,children:[a.jsx(Qe,{children:"Model"}),a.jsx(Ze,{children:a.jsx(ve,{list:"ai-model-datalist","data-testid":"ai-model-input",className:"m-0 inline-flex",placeholder:"gpt-4-turbo",...n})}),a.jsx(Je,{}),a.jsx(Jn,{userConfig:t,name:"ai.open_ai.model"})]}),a.jsx("datalist",{id:"ai-model-datalist",children:Un.map(cr)}),a.jsx(tt,{children:'If the model starts with "claude-", we will use your Anthropic API key. If the model starts with "gemini-", we will use your Google AI API key. Otherwise, we will use your OpenAI API key.'})]})}}),a.jsx(Ye,{control:f.control,name:"ai.rules",render:e=>{const{field:n}=e;return a.jsxs("div",{className:"flex flex-col",children:[a.jsxs(Xe,{children:[a.jsx(Qe,{children:"Custom Rules"}),a.jsx(Ze,{children:a.jsx(nt,{"data-testid":"ai-rules-input",className:"m-0 inline-flex w-full h-32 p-2 text-sm",placeholder:"e.g. Always use type hints; prefer polars over pandas",...n,value:n.value})}),a.jsx(Je,{}),a.jsx(Jn,{userConfig:t,name:"ai.rules"})]}),a.jsx(tt,{children:"Custom rules to include in all AI completion prompts."})]})}})]})]});case"optionalDeps":return a.jsx(Vn,{});case"labs":return a.jsxs(Zn,{title:"Experimental Features",children:[a.jsx("p",{className:"text-sm text-muted-secondary mb-4",children:" These features are experimental and may require restarting your notebook to take effect."}),a.jsx(Ye,{control:f.control,name:"experimental.inline_ai_tooltip",render:ur}),a.jsx(Ye,{control:f.control,name:"experimental.table_charts",render:dr})]})}},e[9]=s,e[10]=u,e[11]=t,e[12]=f,e[13]=m,e[14]=b,e[15]=l,e[16]=i,e[17]=j):j=e[17];const w=j;let I,S,O;e[18]===Symbol.for("react.memo_cache_sentinel")?(I=a.jsx(Ae,{className:"inline",children:"marimo.toml"}),S=a.jsx("br",{}),e[18]=I,e[19]=S):(I=e[18],S=e[19]),e[20]===Symbol.for("react.memo_cache_sentinel")?(O=a.jsxs("p",{className:"text-muted-secondary",children:["User configuration is stored in ",I,S,"Run ",a.jsx(Ae,{className:"inline",children:"marimo config show"})," in your terminal to show your current configuration and file location."]}),e[20]=O):O=e[20];const C=O;let k,N,D,E,T,_,M,F,H;return e[21]!==f||e[22]!==m?(k=f.handleSubmit(m),e[21]=f,e[22]=m,e[23]=k):k=e[23],e[24]!==l?(N=e=>l(e),e[24]=l,e[25]=N):N=e[25],e[26]===Symbol.for("react.memo_cache_sentinel")?(D=Yn.map(hr),e[26]=D):D=e[26],e[27]===Symbol.for("react.memo_cache_sentinel")?(E=a.jsxs(We,{className:"self-start max-h-none flex flex-col gap-2 shrink-0 bg-background flex-1 min-h-full",children:[D,a.jsx("div",{className:"p-2 text-xs text-muted-foreground self-start",children:a.jsxs("span",{children:["Version: ",Ke()]})}),a.jsx("div",{className:"flex-1"}),!c()&&C]}),e[27]=E):E=e[27],e[28]!==s||e[29]!==N?(T=a.jsx(ct,{value:s,onValueChange:N,orientation:"vertical",className:"w-1/3 border-r h-full overflow-auto p-3",children:E}),e[28]=s,e[29]=N,e[30]=T):T=e[30],e[31]!==w?(_=w(),e[31]=w,e[32]=_):_=e[32],e[33]!==_?(M=a.jsx("div",{className:"w-2/3 pl-6 gap-2 flex flex-col overflow-auto p-6",children:_}),e[33]=_,e[34]=M):M=e[34],e[35]!==T||e[36]!==M||e[37]!==k?(F=a.jsxs("form",{ref:r,onChange:k,className:"flex text-pretty overflow-hidden",children:[T,M]}),e[35]=T,e[36]=M,e[37]=k,e[38]=F):F=e[38],e[39]!==f||e[40]!==F?(H=a.jsx(Ge,{...f,children:F}),e[39]=f,e[40]=F,e[41]=H):H=e[41],H},Zn=e=>{const t=o.c(5),{title:n,children:r}=e;let i,s;return t[0]!==n?(i=a.jsx(Qt,{children:n}),t[0]=n,t[1]=i):i=t[1],t[2]!==r||t[3]!==i?(s=a.jsxs("div",{className:"flex flex-col gap-4 pb-4",children:[i,r]}),t[2]=r,t[3]=i,t[4]=s):s=t[4],s},Jn=e=>{const t=o.c(24),{userConfig:n,name:r}=e;let i;t[0]!==r||t[1]!==n?(i=ut(n,r),t[0]=r,t[1]=n,t[2]=i):i=t[2];const s=i,l=ce(dt);let c;t[3]!==r||t[4]!==l?(c=ut(l,r),t[3]=r,t[4]=l,t[5]=c):c=t[5];const u=c;if(null==u)return null;if(s===u)return null;let d,f,p,g;t[6]===Symbol.for("react.memo_cache_sentinel")?(d=a.jsxs("span",{children:["This setting is overridden by"," ",a.jsx(Ae,{className:"inline",children:"pyproject.toml"}),"."]}),f=a.jsx("br",{}),t[6]=d,t[7]=f):(d=t[6],f=t[7]),t[8]===Symbol.for("react.memo_cache_sentinel")?(p=a.jsxs("span",{children:["Edit the ",a.jsx(Ae,{className:"inline",children:"pyproject.toml"})," file directly to change this setting."]}),g=a.jsx("br",{}),t[8]=p,t[9]=g):(p=t[8],g=t[9]);const m=String(s);let v,y;t[10]!==m?(v=a.jsxs("span",{children:["User value: ",a.jsx("strong",{children:m})]}),t[10]=m,t[11]=v):v=t[11],t[12]===Symbol.for("react.memo_cache_sentinel")?(y=a.jsx("br",{}),t[12]=y):y=t[12];const x=String(u);let b,j,w;t[13]!==x?(b=a.jsxs("span",{children:["Project value: ",a.jsx("strong",{children:x})]}),t[13]=x,t[14]=b):b=t[14],t[15]!==b||t[16]!==v?(j=a.jsxs(a.Fragment,{children:[d,f,p,g,v,y,b]}),t[15]=b,t[16]=v,t[17]=j):j=t[17],t[18]===Symbol.for("react.memo_cache_sentinel")?(w=a.jsx(_t,{className:"w-3 h-3"}),t[18]=w):w=t[18];const I=String(u);let S,O;return t[19]!==I?(S=a.jsxs("span",{className:"text-[var(--amber-12)] text-xs flex items-center gap-1 border rounded px-2 py-1 bg-[var(--amber-2)] border-[var(--amber-6)] ml-1",children:[w,"Overridden by pyproject.toml [",I,"]"]}),t[19]=I,t[20]=S):S=t[20],t[21]!==j||t[22]!==S?(O=a.jsx(h,{content:j,children:S}),t[21]=j,t[22]=S,t[23]=O):O=t[23],O};function er(e){return a.jsx("option",{value:e,children:e},e)}function tr(e){return a.jsx("option",{value:e,children:e},e)}function nr(e){return a.jsx("option",{value:e,children:e},e)}function rr(e){return a.jsx("option",{value:e,children:e},e)}function ir(e){return a.jsx("option",{value:e,children:e},e)}function or(e){return a.jsx("option",{value:e,children:e},e)}function sr(e){return a.jsx("option",{value:e,children:e},e)}function ar(e){return a.jsx("option",{value:e,children:e},e)}function lr(e){return a.jsx("option",{value:e,children:e},e)}function cr(e){return a.jsx("option",{value:e,children:e},e)}function ur(e){const{field:t}=e;return a.jsxs("div",{className:"flex flex-col gap-y-1",children:[a.jsxs(Xe,{className:$n,children:[a.jsx(Qe,{className:"font-normal",children:"AI Edit Tooltip"}),a.jsx(Ze,{children:a.jsx(rt,{"data-testid":"inline-ai-checkbox",checked:!0===t.value,onCheckedChange:t.onChange})})]}),a.jsx(tt,{children:'Enable experimental "Edit with AI" tooltip when selecting code.'})]})}function dr(e){const{field:t}=e;return a.jsxs("div",{className:"flex flex-col gap-y-1",children:[a.jsxs(Xe,{className:$n,children:[a.jsx(Qe,{className:"font-normal",children:"Table Charts"}),a.jsx(Ze,{children:a.jsx(rt,{"data-testid":"data-table-plugin-checkbox",checked:!0===t.value,onCheckedChange:t.onChange})})]}),a.jsx(tt,{children:"Enable experimental charting feature on tables. Data is saved in local storage. May not be performant."})]})}function hr(e){return a.jsx($e,{value:e.id,className:"w-full text-left p-2 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground justify-start",children:a.jsxs("div",{className:"flex gap-4 items-center text-lg overflow-hidden",children:[a.jsx("span",{className:m(e.className,"w-8 h-8 rounded flex items-center justify-center text-muted-foreground flex-shrink-0"),children:a.jsx(e.Icon,{className:"w-4 h-4"})}),a.jsx("span",{className:"truncate",children:e.label})]})},e.id)}const fr=()=>{const e=o.c(30),[t,n]=ht();let r,i;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=qe(ft),e[0]=r):r=e[0],e[1]!==t?(i={resolver:r,defaultValues:t},e[1]=t,e[2]=i):i=e[2];const s=Be(i);let l;e[3]!==n?(l=async e=>{await mt({config:e}).then((()=>{n(e)})).catch((()=>{n(e)}))},e[3]=n,e[4]=l):l=e[4];const c=l;let u,d,h,f,g,m,v,y,x,b;return e[5]!==t.width?(u=[t.width],e[5]=t.width,e[6]=u):u=e[6],p.useEffect(gr,u),e[7]!==s||e[8]!==c?(d=s.handleSubmit(c),e[7]=s,e[8]=c,e[9]=d):d=e[9],e[10]===Symbol.for("react.memo_cache_sentinel")?(h=a.jsxs("div",{children:[a.jsx(Xt,{children:"Notebook Settings"}),a.jsx(Zt,{children:"Configure how your notebook or application looks and behaves."})]}),e[10]=h):h=e[10],e[11]!==s.control?(f=a.jsxs(pr,{title:"Display",children:[a.jsx(Ye,{control:s.control,name:"width",render:vr}),a.jsx(Ye,{control:s.control,name:"app_title",render:yr})]}),e[11]=s.control,e[12]=f):f=e[12],e[13]!==s.control?(g=a.jsxs(pr,{title:"Custom Files",children:[a.jsx(Ye,{control:s.control,name:"css_file",render:xr}),a.jsx(Ye,{control:s.control,name:"html_head_file",render:br})]}),e[13]=s.control,e[14]=g):g=e[14],e[15]!==s.control?(m=a.jsx(pr,{title:"Data",children:a.jsx(Ye,{control:s.control,name:"sql_output",render:jr})}),e[15]=s.control,e[16]=m):m=e[16],e[17]!==s.control?(v=a.jsx(pr,{title:"Exporting outputs",children:a.jsx(Ye,{control:s.control,name:"auto_download",render:wr})}),e[17]=s.control,e[18]=v):v=e[18],e[19]!==f||e[20]!==g||e[21]!==m||e[22]!==v?(y=a.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-4",children:[f,g,m,v]}),e[19]=f,e[20]=g,e[21]=m,e[22]=v,e[23]=y):y=e[23],e[24]!==y||e[25]!==d?(x=a.jsxs("form",{onChange:d,className:"flex flex-col gap-6",children:[h,y]}),e[24]=y,e[25]=d,e[26]=x):x=e[26],e[27]!==s||e[28]!==x?(b=a.jsx(Ge,{...s,children:x}),e[27]=s,e[28]=x,e[29]=b):b=e[29],b},pr=e=>{const t=o.c(5),{title:n,children:r}=e;let i,s;return t[0]!==n?(i=a.jsx("h3",{className:"text-base font-semibold mb-1",children:n}),t[0]=n,t[1]=i):i=t[1],t[2]!==r||t[3]!==i?(s=a.jsxs("div",{className:"flex flex-col gap-y-2",children:[i,r]}),t[2]=r,t[3]=i,t[4]=s):s=t[4],s};function gr(){window.dispatchEvent(new Event("resize"))}function mr(e){return a.jsx("option",{value:e,children:e},e)}function vr(e){const{field:t}=e;return a.jsxs(Xe,{className:"flex flex-row items-center space-x-1 space-y-0",children:[a.jsx(Qe,{children:"Width"}),a.jsx(Ze,{children:a.jsx(et,{"data-testid":"app-width-select",onChange:e=>t.onChange(e.target.value),value:t.value,disabled:t.disabled,className:"inline-flex mr-2",children:["compact","medium","full","columns"].map(mr)})}),a.jsx(Je,{})]})}function yr(e){const{field:t}=e;return a.jsxs("div",{className:"flex flex-col gap-y-1",children:[a.jsxs(Xe,{className:"flex flex-row items-center space-x-1 space-y-0",children:[a.jsx(Qe,{children:"App title"}),a.jsx(Ze,{children:a.jsx(ve,{...t,value:t.value??"",onChange:e=>{t.onChange(e.target.value),pt.safeParse(e.target.value).success&&(document.title=e.target.value)}})}),a.jsx(Je,{})]}),a.jsx(tt,{children:"The application title is put in the title tag in the HTML code and typically displayed in the title bar of the browser window."})]})}function xr(e){const{field:t}=e;return a.jsxs("div",{className:"flex flex-col gap-y-1",children:[a.jsxs(Xe,{className:"flex flex-row items-center space-x-1 space-y-0",children:[a.jsx(Qe,{className:"flex-shrink-0",children:"Custom CSS"}),a.jsx(Ze,{children:a.jsx(ve,{...t,value:t.value??"",placeholder:"custom.css",onChange:e=>{t.onChange(e.target.value),pt.safeParse(e.target.value).success&&(document.title=e.target.value)}})}),a.jsx(Je,{})]}),a.jsx(tt,{children:"A filepath to a custom css file to be injected into the notebook."})]})}function br(e){const{field:t}=e;return a.jsxs("div",{className:"flex flex-col gap-y-1",children:[a.jsxs(Xe,{className:"flex flex-row items-center space-x-1 space-y-0",children:[a.jsx(Qe,{className:"flex-shrink-0",children:"HTML Head"}),a.jsx(Ze,{children:a.jsx(ve,{...t,value:t.value??"",placeholder:"head.html",onChange:e=>{t.onChange(e.target.value)}})}),a.jsx(Je,{})]}),a.jsxs(tt,{children:["A filepath to an HTML file to be injected into the"," ",a.jsx(Ae,{className:"inline",children:"<head/>"})," section of the notebook. Use this to add analytics, custom fonts, meta tags, or external scripts."]})]})}function jr(e){const{field:t}=e;return a.jsxs("div",{className:"flex flex-col gap-y-1",children:[a.jsxs(Xe,{className:"flex flex-row items-center space-x-1 space-y-0",children:[a.jsx(Qe,{children:"SQL Output Type"}),a.jsx(Ze,{children:a.jsxs(et,{"data-testid":"sql-output-select",onChange:e=>{t.onChange(e.target.value),_({title:"Kernel Restart Required",description:"This change requires a kernel restart to take effect."})},value:t.value,disabled:t.disabled,className:"inline-flex mr-2",children:[a.jsx("option",{value:"auto",children:"Auto (Default)"}),a.jsx("option",{value:"native",children:"Native"}),a.jsx("option",{value:"polars",children:"Polars"}),a.jsx("option",{value:"lazy-polars",children:"Lazy Polars"}),a.jsx("option",{value:"pandas",children:"Pandas"})]})}),a.jsx(Je,{})]}),a.jsxs(tt,{children:["The Python type returned by a SQL cell. For best performance with large datasets, we recommend using"," ",a.jsx(Ae,{className:"inline",children:"native"}),". See the"," ",a.jsx(R,{href:"https://docs.marimo.io/guides/working_with_data/sql",children:"SQL guide"})," ","for more information."]})]})}function wr(e){const{field:t}=e;return a.jsxs("div",{className:"flex flex-col gap-y-1",children:[a.jsxs(Xe,{className:"flex flex-col gap-2",children:[a.jsx(Ze,{children:a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(rt,{id:"html-checkbox",checked:t.value.includes("html"),onCheckedChange:()=>{t.onChange(gt(t.value,"html"))}}),a.jsx(Qe,{htmlFor:"html-checkbox",children:"HTML"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(rt,{id:"ipynb-checkbox",checked:t.value.includes("ipynb"),onCheckedChange:()=>{t.onChange(gt(t.value,"ipynb"))}}),a.jsx(Qe,{htmlFor:"ipynb-checkbox",children:"IPYNB"})]})]})}),a.jsx(Je,{})]}),a.jsxs(tt,{children:["When enabled, marimo will periodically save this notebook in your selected formats (HTML, IPYNB) to a folder named"," ",a.jsx(Ae,{className:"inline",children:"__marimo__"})," next to your notebook file."]})]})}const Ir=e=>{const t=o.c(20),{showAppConfig:n}=e,r=void 0===n||n,[i,s]=A(gn);let l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l=a.jsx(Wt,{"aria-label":"Config","data-testid":"app-config-button",shape:"circle",size:"small",className:"h-[27px] w-[27px]",color:"hint-green",children:a.jsx(h,{content:"Settings",children:a.jsx(vt,{strokeWidth:1.8})})}),t[0]=l):l=t[0];const c=l;let u;t[1]===Symbol.for("react.memo_cache_sentinel")?(u=a.jsx(Se,{className:"w-[80vw] h-[70vh] overflow-hidden sm:max-w-5xl top-[15vh] p-0",children:a.jsx(Qn,{})}),t[1]=u):u=t[1];const d=u;if(!r){let e,n;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=a.jsx(yt,{children:c}),t[2]=e):e=t[2],t[3]!==s||t[4]!==i?(n=a.jsxs(je,{open:i,onOpenChange:s,children:[e,d]}),t[3]=s,t[4]=i,t[5]=n):n=t[5],n}let f,p,g,m,v,y,x,b;return t[6]===Symbol.for("react.memo_cache_sentinel")?(f=a.jsx(xt,{asChild:!0,children:c}),t[6]=f):f=t[6],t[7]===Symbol.for("react.memo_cache_sentinel")?(p=a.jsx(fr,{}),g=a.jsx("div",{className:"h-px bg-border my-2"}),t[7]=p,t[8]=g):(p=t[7],g=t[8]),t[9]!==s?(m=()=>s(!0),t[9]=s,t[10]=m):m=t[10],t[11]===Symbol.for("react.memo_cache_sentinel")?(v=a.jsx(vt,{strokeWidth:1.8,className:"w-4 h-4 mr-2"}),t[11]=v):v=t[11],t[12]!==m?(y=a.jsxs(bt,{children:[f,a.jsxs(jt,{className:"w-[650px] overflow-auto max-h-[80vh] max-w-[80vw]",align:"end",side:"bottom",onFocusOutside:Sr,children:[p,g,a.jsxs(L,{onClick:m,variant:"link",className:"px-0",children:[v,"User settings"]})]})]}),t[12]=m,t[13]=y):y=t[13],t[14]!==s||t[15]!==i?(x=a.jsx(je,{open:i,onOpenChange:s,children:d}),t[14]=s,t[15]=i,t[16]=x):x=t[16],t[17]!==x||t[18]!==y?(b=a.jsxs(a.Fragment,{children:[y,x]}),t[17]=x,t[18]=y,t[19]=b):b=t[19],b};function Sr(e){return e.preventDefault()}const Or=e=>{const t=o.c(3);let n,r;return t[0]===Symbol.for("react.memo_cache_sentinel")?(n=a.jsx("path",{d:"M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"}),t[0]=n):n=t[0],t[1]!==e?(r=a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 448 512",...e,children:n}),t[1]=e,t[2]=r):r=t[2],r},Cr=e=>{const t=o.c(3);let n,r;return t[0]===Symbol.for("react.memo_cache_sentinel")?(n=a.jsx("path",{d:"M593.8 59.1H46.2C20.7 59.1 0 79.8 0 105.2v301.5c0 25.5 20.7 46.2 46.2 46.2h547.7c25.5 0 46.2-20.7 46.1-46.1V105.2c0-25.4-20.7-46.1-46.2-46.1zM338.5 360.6H277v-120l-61.5 76.9-61.5-76.9v120H92.3V151.4h61.5l61.5 76.9 61.5-76.9h61.5v209.2zm135.3 3.1L381.5 256H443V151.4h61.5V256H566z"}),t[0]=n):n=t[0],t[1]!==e?(r=a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 640 512",fill:"currentColor",...e,children:n}),t[1]=e,t[2]=r):r=t[2],r},kr=p.createContext(null);function Nr(){const e=p.useContext(kr);if(null===e)throw new Error("No Tree Api Provided");return e}const Dr=p.createContext(null);const Er=p.createContext(null);const Tr=p.createContext(0);function _r(){p.useContext(Tr)}function Pr(e,t,n){return Math.max(Math.min(e,n),t)}function Ar(e){return e&&e.isLeaf}function Mr(e){return e&&e.isInternal&&!e.isOpen}function Rr(e){var t;return e&&e.isOpen&&!(null===(t=e.children)||void 0===t?void 0:t.length)}const Lr=(e,t)=>{let n=e;for(;n;){if(n.id===t.id)return!0;n=n.parent}return!1},Fr=e=>{if(!e.parent)throw Error("Node does not have a parent");return e.parent.children.findIndex((t=>t.id===e.id))};function Hr(e,t){if(!e)return null;if(e.id===t)return e;if(e.children)for(let n of e.children){const e=Hr(n,t);if(e)return e}return null}function zr(e,t){if(t(e),e.children)for(let n of e.children)zr(n,t)}function Ur(e){const t=Wr(e);let n;for(let r=0;r<t.length;++r){if(t[r]===e){n=Vr(t,r);break}}null==n||n.focus()}function qr(e){const t=Wr(e);let n;for(let r=0;r<t.length;++r){if(t[r]===e){n=Br(t,r);break}}null==n||n.focus()}function Vr(e,t){return t+1<e.length?e[t+1]:e[0]}function Br(e,t){return t-1>=0?e[t-1]:e[e.length-1]}function Wr(e){return Array.from(document.querySelectorAll('button:not([disabled]), [href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex="-1"]):not([disabled]), details:not([disabled]), summary:not(:disabled)')).filter((t=>t===e||!e.contains(t)))}function Kr(e,t){return"boolean"==typeof t?t:"string"==typeof t?e[t]:t(e)}function Gr(e){return null===e?null:$r(e)}function $r(e){return"string"==typeof e?e:e.id}function Yr(e,...t){if(e)return e(...t)}function Xr(e){return new Promise(((t,n)=>{let r=0;!function i(){r+=1,100===r&&n(),e()?t():setTimeout(i,10)}()}))}function Qr(e){var t,n;const r=e.focusedNode;return r?r.isOpen?0:r.parent?r.childIndex+1:0:null!==(n=null===(t=e.root.children)||void 0===t?void 0:t.length)&&void 0!==n?n:0}function Zr(e){const t=e.focusedNode;return t?t.isOpen?t.id:t.parent&&!t.parent.isRoot?t.parent.id:null:null}const Jr=Object.freeze(Object.defineProperty({__proto__:null,access:Kr,bound:Pr,dfs:Hr,focusNextElement:Ur,focusPrevElement:qr,getInsertIndex:Qr,getInsertParentId:Zr,identify:$r,identifyNull:Gr,indexOf:Fr,isClosed:Mr,isDescendant:Lr,isItem:Ar,isOpenWithEmptyChildren:Rr,mergeRefs:function(...e){return t=>{e.forEach((e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)}))}},noop:function(){},safeRun:Yr,waitFor:Xr,walk:zr},Symbol.toStringTag,{value:"Module"})),ei={display:"flex",alignItems:"center",zIndex:1},ti={flex:1,height:"2px",background:"#4B91E2",borderRadius:"1px"},ni={width:"4px",height:"4px",boxShadow:"0 0 0 3px #4B91E2",borderRadius:"50%"},ri=i.memo((function({top:e,left:t,indent:n}){const r={position:"absolute",pointerEvents:"none",top:e-2+"px",left:t+"px",right:n+"px"};return a.jsxs("div",{style:Object.assign(Object.assign({},ei),r),children:[a.jsx("div",{style:Object.assign({},ni)}),a.jsx("div",{style:Object.assign({},ti)})]})}));function ii({node:e,attrs:t,innerRef:n,children:r}){return a.jsx("div",Object.assign({},t,{ref:n,onFocus:e=>e.stopPropagation(),onClick:e.handleClick,children:r}))}function oi(e){return a.jsxs("div",{ref:e.dragHandle,style:e.style,children:[a.jsx("span",{onClick:t=>{t.stopPropagation(),e.node.toggle()},children:e.node.isLeaf?"":e.node.isOpen?"":""})," ",e.node.isEditing?a.jsx(ai,Object.assign({},e)):a.jsx(si,Object.assign({},e))]})}function si(e){return a.jsx(a.Fragment,{children:a.jsx("span",{children:e.node.data.name})})}function ai({node:e}){const t=p.useRef();return p.useEffect((()=>{var e,n;null===(e=t.current)||void 0===e||e.focus(),null===(n=t.current)||void 0===n||n.select()}),[]),a.jsx("input",{ref:t,defaultValue:e.data.name,onBlur:()=>e.reset(),onKeyDown:n=>{var r;"Escape"===n.key&&e.reset(),"Enter"===n.key&&e.submit((null===(r=t.current)||void 0===r?void 0:r.value)||"")}})}function li(e){return{type:"EDIT",id:e}}function ci(e){return{type:"FOCUS",id:e}}class ui{constructor(e){this.handleClick=e=>{e.metaKey&&!this.tree.props.disableMultiSelection?this.isSelected?this.deselect():this.selectMulti():e.shiftKey&&!this.tree.props.disableMultiSelection?this.selectContiguous():(this.select(),this.activate())},this.tree=e.tree,this.id=e.id,this.data=e.data,this.level=e.level,this.children=e.children,this.parent=e.parent,this.isDraggable=e.isDraggable,this.rowIndex=e.rowIndex}get isRoot(){return this.id===di}get isLeaf(){return!Array.isArray(this.children)}get isInternal(){return!this.isLeaf}get isOpen(){return!this.isLeaf&&this.tree.isOpen(this.id)}get isClosed(){return!this.isLeaf&&!this.tree.isOpen(this.id)}get isEditable(){return this.tree.isEditable(this.data)}get isEditing(){return this.tree.editingId===this.id}get isSelected(){return this.tree.isSelected(this.id)}get isOnlySelection(){return this.isSelected&&this.tree.hasOneSelection}get isSelectedStart(){var e;return this.isSelected&&!(null===(e=this.prev)||void 0===e?void 0:e.isSelected)}get isSelectedEnd(){var e;return this.isSelected&&!(null===(e=this.next)||void 0===e?void 0:e.isSelected)}get isFocused(){return this.tree.isFocused(this.id)}get isDragging(){return this.tree.isDragging(this.id)}get willReceiveDrop(){return this.tree.willReceiveDrop(this.id)}get state(){return{isClosed:this.isClosed,isDragging:this.isDragging,isEditing:this.isEditing,isFocused:this.isFocused,isInternal:this.isInternal,isLeaf:this.isLeaf,isOpen:this.isOpen,isSelected:this.isSelected,isSelectedEnd:this.isSelectedEnd,isSelectedStart:this.isSelectedStart,willReceiveDrop:this.willReceiveDrop}}get childIndex(){return this.parent&&this.parent.children?this.parent.children.findIndex((e=>e.id===this.id)):-1}get next(){return null===this.rowIndex?null:this.tree.at(this.rowIndex+1)}get prev(){return null===this.rowIndex?null:this.tree.at(this.rowIndex-1)}get nextSibling(){var e,t;const n=this.childIndex;return null!==(t=null===(e=this.parent)||void 0===e?void 0:e.children[n+1])&&void 0!==t?t:null}isAncestorOf(e){if(!e)return!1;let t=e;for(;t;){if(t.id===this.id)return!0;t=t.parent}return!1}select(){this.tree.select(this)}deselect(){this.tree.deselect(this)}selectMulti(){this.tree.selectMulti(this)}selectContiguous(){this.tree.selectContiguous(this)}activate(){this.tree.activate(this)}focus(){this.tree.focus(this)}toggle(){this.tree.toggle(this)}open(){this.tree.open(this)}openParents(){this.tree.openParents(this)}close(){this.tree.close(this)}submit(e){this.tree.submit(this,e)}reset(){this.tree.reset()}clone(){return new ui(Object.assign({},this))}edit(){return this.tree.edit(this)}}const di="__REACT_ARBORIST_INTERNAL_ROOT__";function hi(e){var t;function n(t,r,i){const o=e.accessId(t),s=new ui({tree:e,data:t,level:r,parent:i,id:o,children:null,isDraggable:e.isDraggable(t),rowIndex:null}),a=e.accessChildren(t);return a&&(s.children=a.map((e=>n(e,r+1,s)))),s}const r=new ui({tree:e,id:di,data:{id:di},level:-1,parent:null,children:null,isDraggable:!0,rowIndex:null}),i=null!==(t=e.props.data)&&void 0!==t?t:[];return r.children=i.map((e=>n(e,0,r))),r}const fi={open:(e,t)=>({type:"VISIBILITY_OPEN",id:e,filtered:t}),close:(e,t)=>({type:"VISIBILITY_CLOSE",id:e,filtered:t}),toggle:(e,t)=>({type:"VISIBILITY_TOGGLE",id:e,filtered:t}),clear:e=>({type:"VISIBILITY_CLEAR",filtered:e})};function pi(e={},t){if("VISIBILITY_OPEN"===t.type)return Object.assign(Object.assign({},e),{[t.id]:!0});if("VISIBILITY_CLOSE"===t.type)return Object.assign(Object.assign({},e),{[t.id]:!1});if("VISIBILITY_TOGGLE"===t.type){const n=e[t.id];return Object.assign(Object.assign({},e),{[t.id]:!n})}return"VISIBILITY_CLEAR"===t.type?{}:e}const gi=e=>{var t;return{nodes:{open:{filtered:{},unfiltered:null!==(t=null==e?void 0:e.initialOpenState)&&void 0!==t?t:{}},focus:{id:null,treeFocused:!1},edit:{id:null},drag:{id:null,selectedIds:[],destinationParentId:null,destinationIndex:null},selection:{ids:new Set,anchor:null,mostRecent:null}},dnd:{cursor:{type:"none"},dragId:null,dragIds:[],parentId:null,index:-1}}},mi=e=>({type:"SELECTION_ONLY",id:$r(e)}),vi=e=>({type:"SELECTION_ADD",ids:(Array.isArray(e)?e:[e]).map($r)}),yi=e=>({type:"SELECTION_REMOVE",ids:(Array.isArray(e)?e:[e]).map($r)}),xi=e=>Object.assign({type:"SELECTION_SET"},e),bi=e=>({type:"SELECTION_MOST_RECENT",id:null===e?null:$r(e)}),ji=e=>({type:"SELECTION_ANCHOR",id:null===e?null:$r(e)});const wi={cursor:e=>({type:"DND_CURSOR",cursor:e}),dragStart:(e,t)=>({type:"DND_DRAG_START",id:e,dragIds:t}),dragEnd:()=>({type:"DND_DRAG_END"}),hovering:(e,t)=>({type:"DND_HOVERING",parentId:e,index:t})};const Ii={position:"fixed",pointerEvents:"none",zIndex:100,left:0,top:0,width:"100%",height:"100%"},Si=e=>{if(!e)return{display:"none"};const{x:t,y:n}=e;return{transform:`translate(${t}px, ${n}px)`}},Oi=e=>{if(!e)return{display:"none"};const{x:t,y:n}=e;return{transform:`translate(${t+10}px, ${n+10}px)`}};function Ci({offset:e,mouse:t,id:n,dragIds:r,isDragging:i}){return a.jsxs(ki,{isDragging:i,children:[a.jsx(Ni,{offset:e,children:a.jsx(Ei,{id:n,dragIds:r})}),a.jsx(Di,{mouse:t,count:r.length})]})}const ki=p.memo((function(e){return e.isDragging?a.jsx("div",{style:Ii,children:e.children}):null}));function Ni(e){return a.jsx("div",{className:"row preview",style:Si(e.offset),children:e.children})}function Di(e){const{count:t,mouse:n}=e;return t>1?a.jsx("div",{className:"selected-count",style:Oi(n),children:t}):null}const Ei=p.memo((function(e){const t=Nr(),n=t.get(e.id);return n?a.jsx(t.renderNode,{preview:!0,node:n,style:{paddingLeft:n.level*t.indent,opacity:.2,background:"transparent"},tree:t}):null}));var Ti=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function _i(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(r=e[n],i=t[n],!(r===i||Ti(r)&&Ti(i)))return!1;var r,i;return!0}function Pi(e,t){var n;void 0===t&&(t=_i);var r,i=[],o=!1;return function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];return o&&n===this&&t(s,i)||(r=e.apply(this,s),o=!0,n=this,i=s),r}}var Ai="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()};function Mi(e){cancelAnimationFrame(e.id)}var Ri=-1;function Li(e){if(void 0===e&&(e=!1),-1===Ri||e){var t=document.createElement("div"),n=t.style;n.width="50px",n.height="50px",n.overflow="scroll",document.body.appendChild(t),Ri=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Ri}var Fi=null;function Hi(e){if(void 0===e&&(e=!1),null===Fi||e){var t=document.createElement("div"),n=t.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";var r=document.createElement("div"),i=r.style;return i.width="100px",i.height="100px",t.appendChild(r),document.body.appendChild(t),t.scrollLeft>0?Fi="positive-descending":(t.scrollLeft=1,Fi=0===t.scrollLeft?"negative":"positive-ascending"),document.body.removeChild(t),Fi}return Fi}var zi=function(e,t){return e};function Ui(e){var t,n=e.getItemOffset,r=e.getEstimatedTotalSize,i=e.getItemSize,o=e.getOffsetForIndexAndAlignment,s=e.getStartIndexForOffset,a=e.getStopIndexForStartIndex,l=e.initInstanceProps,c=e.shouldResetStyleCacheOnItemSizeChange,u=e.validateProps;return(t=function(e){var t,d;function h(t){var r;return(r=e.call(this,t)||this)._instanceProps=l(r.props,qt(r)),r._outerRef=void 0,r._resetIsScrollingTimeoutId=null,r.state={instance:qt(r),isScrolling:!1,scrollDirection:"forward",scrollOffset:"number"==typeof r.props.initialScrollOffset?r.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},r._callOnItemsRendered=void 0,r._callOnItemsRendered=Pi((function(e,t,n,i){return r.props.onItemsRendered({overscanStartIndex:e,overscanStopIndex:t,visibleStartIndex:n,visibleStopIndex:i})})),r._callOnScroll=void 0,r._callOnScroll=Pi((function(e,t,n){return r.props.onScroll({scrollDirection:e,scrollOffset:t,scrollUpdateWasRequested:n})})),r._getItemStyle=void 0,r._getItemStyle=function(e){var t,o=r.props,s=o.direction,a=o.itemSize,l=o.layout,u=r._getItemStyleCache(c&&a,c&&l,c&&s);if(u.hasOwnProperty(e))t=u[e];else{var d=n(r.props,e,r._instanceProps),h=i(r.props,e,r._instanceProps),f="horizontal"===s||"horizontal"===l,p="rtl"===s,g=f?d:0;u[e]=t={position:"absolute",left:p?void 0:g,right:p?g:void 0,top:f?0:d,height:f?"100%":h,width:f?h:"100%"}}return t},r._getItemStyleCache=void 0,r._getItemStyleCache=Pi((function(e,t,n){return{}})),r._onScrollHorizontal=function(e){var t=e.currentTarget,n=t.clientWidth,i=t.scrollLeft,o=t.scrollWidth;r.setState((function(e){if(e.scrollOffset===i)return null;var t=r.props.direction,s=i;if("rtl"===t)switch(Hi()){case"negative":s=-i;break;case"positive-descending":s=o-n-i}return s=Math.max(0,Math.min(s,o-n)),{isScrolling:!0,scrollDirection:e.scrollOffset<s?"forward":"backward",scrollOffset:s,scrollUpdateWasRequested:!1}}),r._resetIsScrollingDebounced)},r._onScrollVertical=function(e){var t=e.currentTarget,n=t.clientHeight,i=t.scrollHeight,o=t.scrollTop;r.setState((function(e){if(e.scrollOffset===o)return null;var t=Math.max(0,Math.min(o,i-n));return{isScrolling:!0,scrollDirection:e.scrollOffset<t?"forward":"backward",scrollOffset:t,scrollUpdateWasRequested:!1}}),r._resetIsScrollingDebounced)},r._outerRefSetter=function(e){var t=r.props.outerRef;r._outerRef=e,"function"==typeof t?t(e):null!=t&&"object"==typeof t&&t.hasOwnProperty("current")&&(t.current=e)},r._resetIsScrollingDebounced=function(){var e,t,n,i;null!==r._resetIsScrollingTimeoutId&&Mi(r._resetIsScrollingTimeoutId),r._resetIsScrollingTimeoutId=(e=r._resetIsScrolling,t=150,n=Ai(),i={id:requestAnimationFrame((function r(){Ai()-n>=t?e.call(null):i.id=requestAnimationFrame(r)}))})},r._resetIsScrolling=function(){r._resetIsScrollingTimeoutId=null,r.setState({isScrolling:!1},(function(){r._getItemStyleCache(-1,null)}))},r}d=e,(t=h).prototype=Object.create(d.prototype),t.prototype.constructor=t,Ut(t,d),h.getDerivedStateFromProps=function(e,t){return qi(e,t),u(e),null};var f=h.prototype;return f.scrollTo=function(e){e=Math.max(0,e),this.setState((function(t){return t.scrollOffset===e?null:{scrollDirection:t.scrollOffset<e?"forward":"backward",scrollOffset:e,scrollUpdateWasRequested:!0}}),this._resetIsScrollingDebounced)},f.scrollToItem=function(e,t){void 0===t&&(t="auto");var n=this.props,r=n.itemCount,i=n.layout,s=this.state.scrollOffset;e=Math.max(0,Math.min(e,r-1));var a=0;if(this._outerRef){var l=this._outerRef;a="vertical"===i?l.scrollWidth>l.clientWidth?Li():0:l.scrollHeight>l.clientHeight?Li():0}this.scrollTo(o(this.props,e,t,s,this._instanceProps,a))},f.componentDidMount=function(){var e=this.props,t=e.direction,n=e.initialScrollOffset,r=e.layout;if("number"==typeof n&&null!=this._outerRef){var i=this._outerRef;"horizontal"===t||"horizontal"===r?i.scrollLeft=n:i.scrollTop=n}this._callPropsCallbacks()},f.componentDidUpdate=function(){var e=this.props,t=e.direction,n=e.layout,r=this.state,i=r.scrollOffset;if(r.scrollUpdateWasRequested&&null!=this._outerRef){var o=this._outerRef;if("horizontal"===t||"horizontal"===n)if("rtl"===t)switch(Hi()){case"negative":o.scrollLeft=-i;break;case"positive-ascending":o.scrollLeft=i;break;default:var s=o.clientWidth,a=o.scrollWidth;o.scrollLeft=a-s-i}else o.scrollLeft=i;else o.scrollTop=i}this._callPropsCallbacks()},f.componentWillUnmount=function(){null!==this._resetIsScrollingTimeoutId&&Mi(this._resetIsScrollingTimeoutId)},f.render=function(){var e=this.props,t=e.children,n=e.className,i=e.direction,o=e.height,s=e.innerRef,a=e.innerElementType,l=e.innerTagName,c=e.itemCount,u=e.itemData,d=e.itemKey,h=void 0===d?zi:d,f=e.layout,g=e.outerElementType,m=e.outerTagName,v=e.style,y=e.useIsScrolling,x=e.width,b=this.state.isScrolling,j="horizontal"===i||"horizontal"===f,w=j?this._onScrollHorizontal:this._onScrollVertical,I=this._getRangeToRender(),S=I[0],O=I[1],C=[];if(c>0)for(var k=S;k<=O;k++)C.push(p.createElement(t,{data:u,key:h(k,u),index:k,isScrolling:y?b:void 0,style:this._getItemStyle(k)}));var N=r(this.props,this._instanceProps);return p.createElement(g||m||"div",{className:n,onScroll:w,ref:this._outerRefSetter,style:wt({position:"relative",height:o,width:x,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:i},v)},p.createElement(a||l||"div",{children:C,ref:s,style:{height:j?"100%":N,pointerEvents:b?"none":void 0,width:j?N:"100%"}}))},f._callPropsCallbacks=function(){if("function"==typeof this.props.onItemsRendered&&this.props.itemCount>0){var e=this._getRangeToRender(),t=e[0],n=e[1],r=e[2],i=e[3];this._callOnItemsRendered(t,n,r,i)}if("function"==typeof this.props.onScroll){var o=this.state,s=o.scrollDirection,a=o.scrollOffset,l=o.scrollUpdateWasRequested;this._callOnScroll(s,a,l)}},f._getRangeToRender=function(){var e=this.props,t=e.itemCount,n=e.overscanCount,r=this.state,i=r.isScrolling,o=r.scrollDirection,l=r.scrollOffset;if(0===t)return[0,0,0,0];var c=s(this.props,l,this._instanceProps),u=a(this.props,c,l,this._instanceProps),d=i&&"backward"!==o?1:Math.max(1,n),h=i&&"forward"!==o?1:Math.max(1,n);return[Math.max(0,c-d),Math.max(0,Math.min(t-1,u+h)),c,u]},h}(p.PureComponent)).defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},t}var qi=function(e,t){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,t.instance},Vi=Ui({getItemOffset:function(e,t){return t*e.itemSize},getItemSize:function(e,t){return e.itemSize},getEstimatedTotalSize:function(e){var t=e.itemCount;return e.itemSize*t},getOffsetForIndexAndAlignment:function(e,t,n,r,i,o){var s=e.direction,a=e.height,l=e.itemCount,c=e.itemSize,u=e.layout,d=e.width,h="horizontal"===s||"horizontal"===u?d:a,f=Math.max(0,l*c-h),p=Math.min(f,t*c),g=Math.max(0,t*c-h+c+o);switch("smart"===n&&(n=r>=g-h&&r<=p+h?"auto":"center"),n){case"start":return p;case"end":return g;case"center":var m=Math.round(g+(p-g)/2);return m<Math.ceil(h/2)?0:m>f+Math.floor(h/2)?f:m;default:return r>=g&&r<=p?r:r<g?g:p}},getStartIndexForOffset:function(e,t){var n=e.itemCount,r=e.itemSize;return Math.max(0,Math.min(n-1,Math.floor(t/r)))},getStopIndexForStartIndex:function(e,t,n){var r=e.direction,i=e.height,o=e.itemCount,s=e.itemSize,a=e.layout,l=e.width,c=t*s,u="horizontal"===r||"horizontal"===a?l:i,d=Math.ceil((u+n-c)/s);return Math.max(0,Math.min(o-1,t+d-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.itemSize}});function Bi(){var e,t;const n=Nr(),r=function(){const e=p.useContext(Er);if(null===e)throw new Error("Provide a DnDContext");return e}().cursor;if(!r||"line"!==r.type)return null;const i=n.indent,o=n.rowHeight*r.index+(null!==(t=null!==(e=n.props.padding)&&void 0!==e?e:n.props.paddingTop)&&void 0!==t?t:0),s=i*r.level,l=n.renderCursor;return a.jsx(l,{top:o,left:s,indent:i})}const Wi=p.forwardRef((function(e,t){const{children:n}=e,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["children"]),i=Nr();return a.jsxs("div",Object.assign({ref:t},r,{onClick:e=>{e.currentTarget===e.target&&i.deselectAll()},children:[a.jsx(Ki,{}),n]}))})),Ki=()=>{const e=Nr();return a.jsx("div",{style:{height:e.visibleNodes.length*e.rowHeight,width:"100%",position:"absolute",left:"0",right:"0"},children:a.jsx(Bi,{})})};const Gi=p.forwardRef((function(e,t){var n,r,i,o,{style:s}=e,l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["style"]);const c=Nr(),u=null!==(r=null!==(n=c.props.padding)&&void 0!==n?n:c.props.paddingTop)&&void 0!==r?r:0,d=null!==(o=null!==(i=c.props.padding)&&void 0!==i?i:c.props.paddingBottom)&&void 0!==o?o:0;return a.jsx("div",Object.assign({ref:t,style:Object.assign(Object.assign({},s),{height:`${parseFloat(s.height)+u+d}px`})},l))}));var $i,Yi,Xi=p.createContext({dragDropManager:void 0});function Qi(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(!e){var o;if(void 0===t)o=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=0;(o=new Error(t.replace(/%s/g,(function(){return r[s++]})))).name="Invariant Violation"}throw o.framesToPop=1,o}}(Yi=$i||($i={})).SOURCE="SOURCE",Yi.TARGET="TARGET";var Zi="dnd-core/INIT_COORDS",Ji="dnd-core/BEGIN_DRAG",eo="dnd-core/PUBLISH_DRAG_SOURCE",to="dnd-core/HOVER",no="dnd-core/DROP",ro="dnd-core/END_DRAG";function io(e,t){return{type:Zi,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}function oo(e){return(oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function so(e){return"object"===oo(e)}var ao={type:Zi,payload:{clientOffset:null,sourceClientOffset:null}};function lo(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{publishSource:!0},r=n.publishSource,i=void 0===r||r,o=n.clientOffset,s=n.getSourceClientOffset,a=e.getMonitor(),l=e.getRegistry();e.dispatch(io(o)),function(e,t,n){Qi(!t.isDragging(),"Cannot call beginDrag while dragging."),e.forEach((function(e){Qi(n.getSource(e),"Expected sourceIds to be registered.")}))}(t,a,l);var c=function(e,t){for(var n=null,r=e.length-1;r>=0;r--)if(t.canDragSource(e[r])){n=e[r];break}return n}(t,a);if(null!==c){var u=null;if(o){if(!s)throw new Error("getSourceClientOffset must be defined");!function(e){Qi("function"==typeof e,"When clientOffset is provided, getSourceClientOffset must be a function.")}(s),u=s(c)}e.dispatch(io(o,u));var d=l.getSource(c).beginDrag(a,c);if(null!=d){!function(e){Qi(so(e),"Item must be an object.")}(d),l.pinSource(c);var h=l.getSourceType(c);return{type:Ji,payload:{itemType:h,item:d,sourceId:c,clientOffset:o||null,sourceClientOffset:u||null,isSourcePublic:!!i}}}}else e.dispatch(ao)}}function co(e){return function(){if(e.getMonitor().isDragging())return{type:eo}}}function uo(e,t){return null===t?null===e:Array.isArray(e)?e.some((function(e){return e===t})):e===t}function ho(e){return function(t){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).clientOffset;!function(e){Qi(Array.isArray(e),"Expected targetIds to be an array.")}(t);var r=t.slice(0),i=e.getMonitor(),o=e.getRegistry();return function(e,t,n){Qi(t.isDragging(),"Cannot call hover while not dragging."),Qi(!t.didDrop(),"Cannot call hover after drop.");for(var r=0;r<e.length;r++){var i=e[r];Qi(e.lastIndexOf(i)===r,"Expected targetIds to be unique in the passed array."),Qi(n.getTarget(i),"Expected targetIds to be registered.")}}(r,i,o),function(e,t,n){for(var r=e.length-1;r>=0;r--){var i=e[r];uo(t.getTargetType(i),n)||e.splice(r,1)}}(r,o,i.getItemType()),function(e,t,n){e.forEach((function(e){n.getTarget(e).hover(t,e)}))}(r,i,o),{type:to,payload:{targetIds:r,clientOffset:n||null}}}}function fo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function po(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fo(Object(n),!0).forEach((function(t){go(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function go(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mo(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.getMonitor(),r=e.getRegistry();!function(e){Qi(e.isDragging(),"Cannot call drop while not dragging."),Qi(!e.didDrop(),"Cannot call drop twice during one drag operation.")}(n);var i=function(e){var t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}(n);i.forEach((function(i,o){var s=function(e,t,n,r){var i=n.getTarget(e),o=i?i.drop(r,e):void 0;(function(e){Qi(void 0===e||so(e),"Drop result must either be an object or undefined.")})(o),void 0===o&&(o=0===t?{}:r.getDropResult());return o}(i,o,r,n),a={type:no,payload:{dropResult:po(po({},t),s)}};e.dispatch(a)}))}}function vo(e){return function(){var t=e.getMonitor(),n=e.getRegistry();!function(e){Qi(e.isDragging(),"Cannot call endDrag while not dragging.")}(t);var r=t.getSourceId();null!=r&&(n.getSource(r,!0).endDrag(t,r),n.unpinSource());return{type:ro}}}function yo(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function xo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bo=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),xo(this,"store",void 0),xo(this,"monitor",void 0),xo(this,"backend",void 0),xo(this,"isSetUp",!1),xo(this,"handleRefCountChange",(function(){var e=r.store.getState().refCount>0;r.backend&&(e&&!r.isSetUp?(r.backend.setup(),r.isSetUp=!0):!e&&r.isSetUp&&(r.backend.teardown(),r.isSetUp=!1))})),this.store=t,this.monitor=n,t.subscribe(this.handleRefCountChange)}return yo(e,[{key:"receiveBackend",value:function(e){this.backend=e}},{key:"getMonitor",value:function(){return this.monitor}},{key:"getBackend",value:function(){return this.backend}},{key:"getRegistry",value:function(){return this.monitor.registry}},{key:"getActions",value:function(){var e=this,t=this.store.dispatch;var n=function(e){return{beginDrag:lo(e),publishDragSource:co(e),hover:ho(e),drop:mo(e),endDrag:vo(e)}}(this);return Object.keys(n).reduce((function(r,i){var o,s=n[i];return r[i]=(o=s,function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=o.apply(e,r);void 0!==s&&t(s)}),r}),{})}},{key:"dispatch",value:function(e){this.store.dispatch(e)}}]),e}();function jo(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var wo="function"==typeof Symbol&&Symbol.observable||"@@observable",Io=function(){return Math.random().toString(36).substring(7).split("").join(".")},So={INIT:"@@redux/INIT"+Io(),REPLACE:"@@redux/REPLACE"+Io()};function Oo(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(jo(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(jo(1));return n(Oo)(e,t)}if("function"!=typeof e)throw new Error(jo(2));var i=e,o=t,s=[],a=s,l=!1;function c(){a===s&&(a=s.slice())}function u(){if(l)throw new Error(jo(3));return o}function d(e){if("function"!=typeof e)throw new Error(jo(4));if(l)throw new Error(jo(5));var t=!0;return c(),a.push(e),function(){if(t){if(l)throw new Error(jo(6));t=!1,c();var n=a.indexOf(e);a.splice(n,1),s=null}}}function h(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw new Error(jo(7));if(void 0===e.type)throw new Error(jo(8));if(l)throw new Error(jo(9));try{l=!0,o=i(o,e)}finally{l=!1}for(var t=s=a,n=0;n<t.length;n++){(0,t[n])()}return e}return h({type:So.INIT}),(r={dispatch:h,subscribe:d,getState:u,replaceReducer:function(e){if("function"!=typeof e)throw new Error(jo(10));i=e,h({type:So.REPLACE})}})[wo]=function(){var e,t=d;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(jo(11));function n(){e.next&&e.next(u())}return n(),{unsubscribe:t(n)}}})[wo]=function(){return this},e},r}var Co=function(e,t){return e===t};function ko(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function No(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ko(Object(n),!0).forEach((function(t){Do(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ko(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Do(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Eo={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function To(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Eo,r=arguments.length>1?arguments[1]:void 0,i=r.payload;switch(r.type){case Zi:case Ji:return{initialSourceClientOffset:i.sourceClientOffset,initialClientOffset:i.clientOffset,clientOffset:i.clientOffset};case to:return e=n.clientOffset,t=i.clientOffset,!e&&!t||e&&t&&e.x===t.x&&e.y===t.y?n:No(No({},n),{},{clientOffset:i.clientOffset});case ro:case no:return Eo;default:return n}}var _o="dnd-core/ADD_SOURCE",Po="dnd-core/ADD_TARGET",Ao="dnd-core/REMOVE_SOURCE",Mo="dnd-core/REMOVE_TARGET";function Ro(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ro(Object(n),!0).forEach((function(t){Fo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ro(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ho={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function zo(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ho,r=arguments.length>1?arguments[1]:void 0,i=r.payload;switch(r.type){case Ji:return Lo(Lo({},n),{},{itemType:i.itemType,item:i.item,sourceId:i.sourceId,isSourcePublic:i.isSourcePublic,dropResult:null,didDrop:!1});case eo:return Lo(Lo({},n),{},{isSourcePublic:!0});case to:return Lo(Lo({},n),{},{targetIds:i.targetIds});case Mo:return-1===n.targetIds.indexOf(i.targetId)?n:Lo(Lo({},n),{},{targetIds:(e=n.targetIds,t=i.targetId,e.filter((function(e){return e!==t})))});case no:return Lo(Lo({},n),{},{dropResult:i.dropResult,didDrop:!0,targetIds:[]});case ro:return Lo(Lo({},n),{},{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return n}}function Uo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch((arguments.length>1?arguments[1]:void 0).type){case _o:case Po:return e+1;case Ao:case Mo:return e-1;default:return e}}var qo=[],Vo=[];function Bo(){var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case to:break;case _o:case Po:case Mo:case Ao:return qo;default:return Vo}var t=e.payload,n=t.targetIds,r=void 0===n?[]:n,i=t.prevTargetIds,o=void 0===i?[]:i,s=function(e,t){var n=new Map,r=function(e){n.set(e,n.has(e)?n.get(e)+1:1)};e.forEach(r),t.forEach(r);var i=[];return n.forEach((function(e,t){1===e&&i.push(t)})),i}(r,o),a=s.length>0||!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Co;if(e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(!n(e[r],t[r]))return!1;return!0}(r,o);if(!a)return qo;var l=o[o.length-1],c=r[r.length-1];return l!==c&&(l&&s.push(l),c&&s.push(c)),s}function Wo(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)+1}function Ko(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Go(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ko(Object(n),!0).forEach((function(t){$o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ko(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yo(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;return{dirtyHandlerIds:Bo(r.dirtyHandlerIds,{type:i.type,payload:Go(Go({},i.payload),{},{prevTargetIds:(e=r,t="dragOperation.targetIds",n=[],t.split(".").reduce((function(e,t){return e&&e[t]?e[t]:n||null}),e))})}),dragOffset:To(r.dragOffset,i),refCount:Uo(r.refCount,i),dragOperation:zo(r.dragOperation,i),stateId:Wo(r.stateId)}}function Xo(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Qo(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function Zo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}qo.__IS_NONE__=!0,Vo.__IS_ALL__=!0;var Jo=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Zo(this,"store",void 0),Zo(this,"registry",void 0),this.store=t,this.registry=n}return Qo(e,[{key:"subscribeToStateChange",value:function(e){var t=this,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{handlerIds:void 0}).handlerIds;Qi("function"==typeof e,"listener must be a function."),Qi(void 0===n||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");var r=this.store.getState().stateId;return this.store.subscribe((function(){var i=t.store.getState(),o=i.stateId;try{var s=o===r||o===r+1&&!function(e,t){return e!==qo&&(e===Vo||void 0===t||(n=e,t.filter((function(e){return n.indexOf(e)>-1}))).length>0);var n}(i.dirtyHandlerIds,n);s||e()}finally{r=o}}))}},{key:"subscribeToOffsetChange",value:function(e){var t=this;Qi("function"==typeof e,"listener must be a function.");var n=this.store.getState().dragOffset;return this.store.subscribe((function(){var r=t.store.getState().dragOffset;r!==n&&(n=r,e())}))}},{key:"canDragSource",value:function(e){if(!e)return!1;var t=this.registry.getSource(e);return Qi(t,"Expected to find a valid source. sourceId=".concat(e)),!this.isDragging()&&t.canDrag(this,e)}},{key:"canDropOnTarget",value:function(e){if(!e)return!1;var t=this.registry.getTarget(e);return Qi(t,"Expected to find a valid target. targetId=".concat(e)),!(!this.isDragging()||this.didDrop())&&(uo(this.registry.getTargetType(e),this.getItemType())&&t.canDrop(this,e))}},{key:"isDragging",value:function(){return Boolean(this.getItemType())}},{key:"isDraggingSource",value:function(e){if(!e)return!1;var t=this.registry.getSource(e,!0);return Qi(t,"Expected to find a valid source. sourceId=".concat(e)),!(!this.isDragging()||!this.isSourcePublic())&&(this.registry.getSourceType(e)===this.getItemType()&&t.isDragging(this,e))}},{key:"isOverTarget",value:function(e){if(!e)return!1;var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shallow:!1}).shallow;if(!this.isDragging())return!1;var n=this.registry.getTargetType(e),r=this.getItemType();if(r&&!uo(n,r))return!1;var i=this.getTargetIds();if(!i.length)return!1;var o=i.indexOf(e);return t?o===i.length-1:o>-1}},{key:"getItemType",value:function(){return this.store.getState().dragOperation.itemType}},{key:"getItem",value:function(){return this.store.getState().dragOperation.item}},{key:"getSourceId",value:function(){return this.store.getState().dragOperation.sourceId}},{key:"getTargetIds",value:function(){return this.store.getState().dragOperation.targetIds}},{key:"getDropResult",value:function(){return this.store.getState().dragOperation.dropResult}},{key:"didDrop",value:function(){return this.store.getState().dragOperation.didDrop}},{key:"isSourcePublic",value:function(){return Boolean(this.store.getState().dragOperation.isSourcePublic)}},{key:"getInitialClientOffset",value:function(){return this.store.getState().dragOffset.initialClientOffset}},{key:"getInitialSourceClientOffset",value:function(){return this.store.getState().dragOffset.initialSourceClientOffset}},{key:"getClientOffset",value:function(){return this.store.getState().dragOffset.clientOffset}},{key:"getSourceClientOffset",value:function(){return e=this.store.getState().dragOffset,r=e.clientOffset,i=e.initialClientOffset,o=e.initialSourceClientOffset,r&&i&&o?Xo((n=o,{x:(t=r).x+n.x,y:t.y+n.y}),i):null;var e,t,n,r,i,o}},{key:"getDifferenceFromInitialOffset",value:function(){return e=this.store.getState().dragOffset,t=e.clientOffset,n=e.initialClientOffset,t&&n?Xo(t,n):null;var e,t,n}}]),e}(),es=0;function ts(e){return(ts="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ns(e,t){t&&Array.isArray(e)?e.forEach((function(e){return ns(e,!1)})):Qi("string"==typeof e||"symbol"===ts(e),t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}const rs="undefined"!=typeof global?global:self,is=rs.MutationObserver||rs.WebKitMutationObserver;function os(e){return function(){const t=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(t),clearInterval(n),e()}}}const ss="function"==typeof is?function(e){let t=1;const n=new is(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}:os;class as{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,t){this.onError=e,this.release=t,this.task=null}}const ls=new class{enqueueTask(e){const{queue:t,requestFlush:n}=this;t.length||(n(),this.flushing=!0),t[t.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const t=this.index;if(this.index++,e[t].call(),this.index>this.capacity){for(let t=0,n=e.length-this.index;t<n;t++)e[t]=e[t+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=ss(this.flush),this.requestErrorThrow=os((()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()}))}},cs=new class{create(e){const t=this.freeTasks,n=t.length?t.pop():new as(this.onError,(e=>t[t.length]=e));return n.task=e,n}constructor(e){this.onError=e,this.freeTasks=[]}}(ls.registerPendingError);function us(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function ds(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(l){a=!0,i=l}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return fs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fs(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ps(e){var t=(es++).toString();switch(e){case $i.SOURCE:return"S".concat(t);case $i.TARGET:return"T".concat(t);default:throw new Error("Unknown Handler Role: ".concat(e))}}function gs(e){switch(e[0]){case"S":return $i.SOURCE;case"T":return $i.TARGET;default:Qi(!1,"Cannot parse handler ID: ".concat(e))}}function ms(e,t){var n=e.entries(),r=!1;do{var i=n.next(),o=i.done;if(hs(i.value,2)[1]===t)return!0;r=!!o}while(!r);return!1}var vs=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ds(this,"types",new Map),ds(this,"dragSources",new Map),ds(this,"dropTargets",new Map),ds(this,"pinnedSourceId",null),ds(this,"pinnedSource",null),ds(this,"store",void 0),this.store=t}return us(e,[{key:"addSource",value:function(e,t){ns(e),function(e){Qi("function"==typeof e.canDrag,"Expected canDrag to be a function."),Qi("function"==typeof e.beginDrag,"Expected beginDrag to be a function."),Qi("function"==typeof e.endDrag,"Expected endDrag to be a function.")}(t);var n=this.addHandler($i.SOURCE,e,t);return this.store.dispatch(function(e){return{type:_o,payload:{sourceId:e}}}(n)),n}},{key:"addTarget",value:function(e,t){ns(e,!0),function(e){Qi("function"==typeof e.canDrop,"Expected canDrop to be a function."),Qi("function"==typeof e.hover,"Expected hover to be a function."),Qi("function"==typeof e.drop,"Expected beginDrag to be a function.")}(t);var n=this.addHandler($i.TARGET,e,t);return this.store.dispatch(function(e){return{type:Po,payload:{targetId:e}}}(n)),n}},{key:"containsHandler",value:function(e){return ms(this.dragSources,e)||ms(this.dropTargets,e)}},{key:"getSource",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Qi(this.isSourceId(e),"Expected a valid source ID."),t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}},{key:"getTarget",value:function(e){return Qi(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}},{key:"getSourceType",value:function(e){return Qi(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}},{key:"getTargetType",value:function(e){return Qi(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}},{key:"isSourceId",value:function(e){return gs(e)===$i.SOURCE}},{key:"isTargetId",value:function(e){return gs(e)===$i.TARGET}},{key:"removeSource",value:function(e){var t,n=this;Qi(this.getSource(e),"Expected an existing source."),this.store.dispatch(function(e){return{type:Ao,payload:{sourceId:e}}}(e)),t=function(){n.dragSources.delete(e),n.types.delete(e)},ls.enqueueTask(cs.create(t))}},{key:"removeTarget",value:function(e){Qi(this.getTarget(e),"Expected an existing target."),this.store.dispatch(function(e){return{type:Mo,payload:{targetId:e}}}(e)),this.dropTargets.delete(e),this.types.delete(e)}},{key:"pinSource",value:function(e){var t=this.getSource(e);Qi(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}},{key:"unpinSource",value:function(){Qi(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}},{key:"addHandler",value:function(e,t,n){var r=ps(e);return this.types.set(r,t),e===$i.SOURCE?this.dragSources.set(r,n):e===$i.TARGET&&this.dropTargets.set(r,n),r}}]),e}();function ys(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=function(e){var t="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__;return Oo(Yo,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}(arguments.length>3&&void 0!==arguments[3]&&arguments[3]),i=new Jo(r,new vs(r)),o=new bo(r,i),s=e(o,t,n);return o.receiveBackend(s),o}var xs=["children"];function bs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(l){a=!0,i=l}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return js(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return js(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function js(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ws(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Is=0,Ss=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__"),Os=p.memo((function(e){var t=e.children,n=function(e){if("manager"in e){return[{dragDropManager:e.manager},!1]}var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Cs(),n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=t;i[Ss]||(i[Ss]={dragDropManager:ys(e,t,n,r)});return i[Ss]}(e.backend,e.context,e.options,e.debugMode),n=!e.context;return[t,n]}(ws(e,xs)),r=bs(n,2),i=r[0],o=r[1];return p.useEffect((function(){if(o){var e=Cs();return++Is,function(){0==--Is&&(e[Ss]=null)}}}),[]),a.jsx(Xi.Provider,Object.assign({value:i},{children:t}),void 0)}));function Cs(){return"undefined"!=typeof global?global:window}function ks(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function Ns(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ds=!1,Es=!1,Ts=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ns(this,"internalMonitor",void 0),Ns(this,"sourceId",null),this.internalMonitor=t.getMonitor()}return ks(e,[{key:"receiveHandlerId",value:function(e){this.sourceId=e}},{key:"getHandlerId",value:function(){return this.sourceId}},{key:"canDrag",value:function(){Qi(!Ds,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Ds=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{Ds=!1}}},{key:"isDragging",value:function(){if(!this.sourceId)return!1;Qi(!Es,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Es=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Es=!1}}},{key:"subscribeToStateChange",value:function(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}},{key:"isDraggingSource",value:function(e){return this.internalMonitor.isDraggingSource(e)}},{key:"isOverTarget",value:function(e,t){return this.internalMonitor.isOverTarget(e,t)}},{key:"getTargetIds",value:function(){return this.internalMonitor.getTargetIds()}},{key:"isSourcePublic",value:function(){return this.internalMonitor.isSourcePublic()}},{key:"getSourceId",value:function(){return this.internalMonitor.getSourceId()}},{key:"subscribeToOffsetChange",value:function(e){return this.internalMonitor.subscribeToOffsetChange(e)}},{key:"canDragSource",value:function(e){return this.internalMonitor.canDragSource(e)}},{key:"canDropOnTarget",value:function(e){return this.internalMonitor.canDropOnTarget(e)}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),e}();function _s(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function Ps(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var As=!1,Ms=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ps(this,"internalMonitor",void 0),Ps(this,"targetId",null),this.internalMonitor=t.getMonitor()}return _s(e,[{key:"receiveHandlerId",value:function(e){this.targetId=e}},{key:"getHandlerId",value:function(){return this.targetId}},{key:"subscribeToStateChange",value:function(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}},{key:"canDrop",value:function(){if(!this.targetId)return!1;Qi(!As,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return As=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{As=!1}}},{key:"isOver",value:function(e){return!!this.targetId&&this.internalMonitor.isOverTarget(this.targetId,e)}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),e}();function Rs(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!p.isValidElement(t)){var r=t;return e(r,n),r}var i=t;return function(e){if("string"!=typeof e.type){var t=e.type.displayName||e.type.name||"the component";throw new Error("Only native element nodes can now be passed to React DnD connectors."+"You can either wrap ".concat(t," into a <div>, or turn it into a ")+"drag source or a drop target itself.")}}(i),function(e,t){var n=e.ref;return Qi("string"!=typeof n,"Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),n?p.cloneElement(e,{ref:function(e){Fs(n,e),Fs(t,e)}}):p.cloneElement(e,{ref:t})}(i,n?function(t){return e(t,n)}:e)}}function Ls(e){var t={};return Object.keys(e).forEach((function(n){var r=e[n];if(n.endsWith("Ref"))t[n]=e[n];else{var i=Rs(r);t[n]=function(){return i}}})),t}function Fs(e,t){"function"==typeof e?e(t):e.current=t}function Hs(e){return(Hs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zs(e){return null!==e&&"object"===Hs(e)&&Object.prototype.hasOwnProperty.call(e,"current")}function Us(e,t,n,r){var i=void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var o=Object.keys(e),s=Object.keys(t);if(o.length!==s.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),l=0;l<o.length;l++){var c=o[l];if(!a(c))return!1;var u=e[c],d=t[c];if(!1===(i=void 0)||void 0===i&&u!==d)return!1}return!0}function qs(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function Vs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Bs=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Vs(this,"hooks",Ls({dragSource:function(e,t){n.clearDragSource(),n.dragSourceOptions=t||null,zs(e)?n.dragSourceRef=e:n.dragSourceNode=e,n.reconnectDragSource()},dragPreview:function(e,t){n.clearDragPreview(),n.dragPreviewOptions=t||null,zs(e)?n.dragPreviewRef=e:n.dragPreviewNode=e,n.reconnectDragPreview()}})),Vs(this,"handlerId",null),Vs(this,"dragSourceRef",null),Vs(this,"dragSourceNode",void 0),Vs(this,"dragSourceOptionsInternal",null),Vs(this,"dragSourceUnsubscribe",void 0),Vs(this,"dragPreviewRef",null),Vs(this,"dragPreviewNode",void 0),Vs(this,"dragPreviewOptionsInternal",null),Vs(this,"dragPreviewUnsubscribe",void 0),Vs(this,"lastConnectedHandlerId",null),Vs(this,"lastConnectedDragSource",null),Vs(this,"lastConnectedDragSourceOptions",null),Vs(this,"lastConnectedDragPreview",null),Vs(this,"lastConnectedDragPreviewOptions",null),Vs(this,"backend",void 0),this.backend=t}return qs(e,[{key:"receiveHandlerId",value:function(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}},{key:"connectTarget",get:function(){return this.dragSource}},{key:"dragSourceOptions",get:function(){return this.dragSourceOptionsInternal},set:function(e){this.dragSourceOptionsInternal=e}},{key:"dragPreviewOptions",get:function(){return this.dragPreviewOptionsInternal},set:function(e){this.dragPreviewOptionsInternal=e}},{key:"reconnect",value:function(){this.reconnectDragSource(),this.reconnectDragPreview()}},{key:"reconnectDragSource",value:function(){var e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();t&&this.disconnectDragSource(),this.handlerId&&(e?t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)):this.lastConnectedDragSource=e)}},{key:"reconnectDragPreview",value:function(){var e=this.dragPreview,t=this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();t&&this.disconnectDragPreview(),this.handlerId&&(e?t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=e,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,e,this.dragPreviewOptions)):this.lastConnectedDragPreview=e)}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didConnectedDragSourceChange",value:function(){return this.lastConnectedDragSource!==this.dragSource}},{key:"didConnectedDragPreviewChange",value:function(){return this.lastConnectedDragPreview!==this.dragPreview}},{key:"didDragSourceOptionsChange",value:function(){return!Us(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}},{key:"didDragPreviewOptionsChange",value:function(){return!Us(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}},{key:"disconnectDragSource",value:function(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}},{key:"disconnectDragPreview",value:function(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}},{key:"dragSource",get:function(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}},{key:"dragPreview",get:function(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}},{key:"clearDragSource",value:function(){this.dragSourceNode=null,this.dragSourceRef=null}},{key:"clearDragPreview",value:function(){this.dragPreviewNode=null,this.dragPreviewRef=null}}]),e}();function Ws(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function Ks(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Gs=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ks(this,"hooks",Ls({dropTarget:function(e,t){n.clearDropTarget(),n.dropTargetOptions=t,zs(e)?n.dropTargetRef=e:n.dropTargetNode=e,n.reconnect()}})),Ks(this,"handlerId",null),Ks(this,"dropTargetRef",null),Ks(this,"dropTargetNode",void 0),Ks(this,"dropTargetOptionsInternal",null),Ks(this,"unsubscribeDropTarget",void 0),Ks(this,"lastConnectedHandlerId",null),Ks(this,"lastConnectedDropTarget",null),Ks(this,"lastConnectedDropTargetOptions",null),Ks(this,"backend",void 0),this.backend=t}return Ws(e,[{key:"connectTarget",get:function(){return this.dropTarget}},{key:"reconnect",value:function(){var e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();var t=this.dropTarget;this.handlerId&&(t?e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions)):this.lastConnectedDropTarget=t)}},{key:"receiveHandlerId",value:function(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}},{key:"dropTargetOptions",get:function(){return this.dropTargetOptionsInternal},set:function(e){this.dropTargetOptionsInternal=e}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didDropTargetChange",value:function(){return this.lastConnectedDropTarget!==this.dropTarget}},{key:"didOptionsChange",value:function(){return!Us(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}},{key:"disconnectDropTarget",value:function(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}},{key:"dropTarget",get:function(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}},{key:"clearDropTarget",value:function(){this.dropTargetRef=null,this.dropTargetNode=null}}]),e}();var $s="undefined"!=typeof window?p.useLayoutEffect:p.useEffect;function Ys(e){return(Ys="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xs(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function Qs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Zs=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Qs(this,"spec",void 0),Qs(this,"monitor",void 0),Qs(this,"connector",void 0),this.spec=t,this.monitor=n,this.connector=r}return Xs(e,[{key:"beginDrag",value:function(){var e,t=this.spec,n=this.monitor;return null!==(e="object"===Ys(t.item)?t.item:"function"==typeof t.item?t.item(n):{})&&void 0!==e?e:null}},{key:"canDrag",value:function(){var e=this.spec,t=this.monitor;return"boolean"==typeof e.canDrag?e.canDrag:"function"!=typeof e.canDrag||e.canDrag(t)}},{key:"isDragging",value:function(e,t){var n=this.spec,r=this.monitor,i=n.isDragging;return i?i(r):t===e.getSourceId()}},{key:"endDrag",value:function(){var e=this.spec,t=this.monitor,n=this.connector,r=e.end;r&&r(t.getItem(),t),n.reconnect()}}]),e}();function Js(){var e=p.useContext(Xi).dragDropManager;return Qi(null!=e,"Expected drag drop context"),e}function ea(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(l){a=!0,i=l}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ta(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ta(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ta(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function na(e,t,n){var r=Js(),i=function(e,t,n){var r=p.useMemo((function(){return new Zs(e,t,n)}),[t,n]);return p.useEffect((function(){r.spec=e}),[e]),r}(e,t,n),o=function(e){return p.useMemo((function(){var t=e.type;return Qi(null!=t,"spec.type must be defined"),t}),[e])}(e);$s((function(){if(null!=o){var e=function(e,t,n){var r=n.getRegistry(),i=r.addSource(e,t);return[i,function(){return r.removeSource(i)}]}(o,i,r),s=ea(e,2),a=s[0],l=s[1];return t.receiveHandlerId(a),n.receiveHandlerId(a),l}}),[r,t,n,i,o])}function ra(e){return function(e){if(Array.isArray(e))return ia(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ia(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ia(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ia(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function oa(e,t){var n=ra(t||[]);return null==t&&"function"!=typeof e&&n.push(e),p.useMemo((function(){return"function"==typeof e?e():e}),n)}function sa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(l){a=!0,i=l}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return aa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aa(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function la(e,t,n){var r=sa(p.useState((function(){return t(e)})),2),i=r[0],o=r[1],s=p.useCallback((function(){var r=t(e);St(i,r)||(o(r),n&&n())}),[i,e,n]);return $s(s),[i,s]}function ca(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(l){a=!0,i=l}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ua(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ua(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ua(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function da(e,t,n){return function(e,t,n){var r=ca(la(e,t,n),2),i=r[0],o=r[1];return $s((function(){var t=e.getHandlerId();if(null!=t)return e.subscribeToStateChange(o,{handlerIds:[t]})}),[e,o]),i}(t,e||function(){return{}},(function(){return n.reconnect()}))}function ha(e){return p.useMemo((function(){return e.hooks.dragSource()}),[e])}function fa(e){return p.useMemo((function(){return e.hooks.dragPreview()}),[e])}function pa(e,t){var n=oa(e,t);Qi(!n.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");var r,i=(r=Js(),p.useMemo((function(){return new Ts(r)}),[r])),o=function(e,t){var n=Js(),r=p.useMemo((function(){return new Bs(n.getBackend())}),[n]);return $s((function(){return r.dragSourceOptions=e||null,r.reconnect(),function(){return r.disconnectDragSource()}}),[r,e]),$s((function(){return r.dragPreviewOptions=t||null,r.reconnect(),function(){return r.disconnectDragPreview()}}),[r,t]),r}(n.options,n.previewOptions);return na(n,i,o),[da(n.collect,i,o),ha(o),fa(o)]}function ga(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function ma(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var va=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ma(this,"spec",void 0),ma(this,"monitor",void 0),this.spec=t,this.monitor=n}return ga(e,[{key:"canDrop",value:function(){var e=this.spec,t=this.monitor;return!e.canDrop||e.canDrop(t.getItem(),t)}},{key:"hover",value:function(){var e=this.spec,t=this.monitor;e.hover&&e.hover(t.getItem(),t)}},{key:"drop",value:function(){var e=this.spec,t=this.monitor;if(e.drop)return e.drop(t.getItem(),t)}}]),e}();function ya(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(l){a=!0,i=l}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return xa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xa(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ba(e,t,n){var r=Js(),i=function(e,t){var n=p.useMemo((function(){return new va(e,t)}),[t]);return p.useEffect((function(){n.spec=e}),[e]),n}(e,t),o=function(e){var t=e.accept;return p.useMemo((function(){return Qi(null!=e.accept,"accept must be defined"),Array.isArray(t)?t:[t]}),[t])}(e);$s((function(){var e=function(e,t,n){var r=n.getRegistry(),i=r.addTarget(e,t);return[i,function(){return r.removeTarget(i)}]}(o,i,r),s=ya(e,2),a=s[0],l=s[1];return t.receiveHandlerId(a),n.receiveHandlerId(a),l}),[r,t,i,n,o.map((function(e){return e.toString()})).join("|")])}function ja(e){return p.useMemo((function(){return e.hooks.dropTarget()}),[e])}function wa(e,t){var n,r=oa(e,t),i=(n=Js(),p.useMemo((function(){return new Ms(n)}),[n])),o=function(e){var t=Js(),n=p.useMemo((function(){return new Gs(t.getBackend())}),[t]);return $s((function(){return n.dropTargetOptions=e||null,n.reconnect(),function(){return n.disconnectDropTarget()}}),[e]),n}(r.options);return ba(r,i,o),[da(r.collect,i,o),ja(o)]}function Ia(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(l){a=!0,i=l}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Sa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Sa(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Oa(e){var t=null;return function(){return null==t&&(t=e()),t}}function Ca(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function ka(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Na=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ka(this,"entered",[]),ka(this,"isNodeInDocument",void 0),this.isNodeInDocument=t}return Ca(e,[{key:"enter",value:function(e){var t=this,n=this.entered.length;return this.entered=function(e,t){var n=new Set,r=function(e){return n.add(e)};e.forEach(r),t.forEach(r);var i=[];return n.forEach((function(e){return i.push(e)})),i}(this.entered.filter((function(n){return t.isNodeInDocument(n)&&(!n.contains||n.contains(e))})),[e]),0===n&&this.entered.length>0}},{key:"leave",value:function(e){var t,n,r=this.entered.length;return this.entered=(t=this.entered.filter(this.isNodeInDocument),n=e,t.filter((function(e){return e!==n}))),r>0&&0===this.entered.length}},{key:"reset",value:function(){this.entered=[]}}]),e}(),Da=Oa((function(){return/firefox/i.test(navigator.userAgent)})),Ea=Oa((function(){return Boolean(window.safari)}));function Ta(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function _a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pa=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),_a(this,"xs",void 0),_a(this,"ys",void 0),_a(this,"c1s",void 0),_a(this,"c2s",void 0),_a(this,"c3s",void 0);for(var r=t.length,i=[],o=0;o<r;o++)i.push(o);i.sort((function(e,n){return t[e]<t[n]?-1:1}));for(var s,a,l=[],c=[],u=0;u<r-1;u++)s=t[u+1]-t[u],a=n[u+1]-n[u],l.push(s),c.push(a/s);for(var d=[c[0]],h=0;h<l.length-1;h++){var f=c[h],p=c[h+1];if(f*p<=0)d.push(0);else{s=l[h];var g=l[h+1],m=s+g;d.push(3*m/((m+g)/f+(m+s)/p))}}d.push(c[c.length-1]);for(var v,y=[],x=[],b=0;b<d.length-1;b++){v=c[b];var j=d[b],w=1/l[b],I=j+d[b+1]-v-v;y.push((v-j-I)*w),x.push(I*w*w)}this.xs=t,this.ys=n,this.c1s=d,this.c2s=y,this.c3s=x}return Ta(e,[{key:"interpolate",value:function(e){var t=this.xs,n=this.ys,r=this.c1s,i=this.c2s,o=this.c3s,s=t.length-1;if(e===t[s])return n[s];for(var a,l=0,c=o.length-1;l<=c;){var u=t[a=Math.floor(.5*(l+c))];if(u<e)l=a+1;else{if(!(u>e))return n[a];c=a-1}}var d=e-t[s=Math.max(0,c)],h=d*d;return n[s]+r[s]*d+i[s]*h+o[s]*d*h}}]),e}();function Aa(e){var t=1===e.nodeType?e:e.parentElement;if(!t)return null;var n=t.getBoundingClientRect(),r=n.top;return{x:n.left,y:r}}function Ma(e){return{x:e.clientX,y:e.clientY}}function Ra(e,t,n,r,i){var o,s,a,l="IMG"===(o=t).nodeName&&(Da()||!(null!==(s=document.documentElement)&&void 0!==s&&s.contains(o))),c=Aa(l?e:t),u={x:n.x-c.x,y:n.y-c.y},d=e.offsetWidth,h=e.offsetHeight,f=r.anchorX,p=r.anchorY,g=function(e,t,n,r){var i=e?t.width:n,o=e?t.height:r;return Ea()&&e&&(o/=window.devicePixelRatio,i/=window.devicePixelRatio),{dragPreviewWidth:i,dragPreviewHeight:o}}(l,t,d,h),m=g.dragPreviewWidth,v=g.dragPreviewHeight,y=i.offsetX,x=i.offsetY,b=0===x||x;return{x:0===y||y?y:new Pa([0,.5,1],[u.x,u.x/d*m,u.x+m-d]).interpolate(f),y:b?x:(a=new Pa([0,.5,1],[u.y,u.y/h*v,u.y+v-h]).interpolate(p),Ea()&&l&&(a+=(window.devicePixelRatio-1)*v),a)}}var La="__NATIVE_FILE__",Fa="__NATIVE_URL__",Ha="__NATIVE_TEXT__",za="__NATIVE_HTML__";const Ua=Object.freeze(Object.defineProperty({__proto__:null,FILE:La,HTML:za,TEXT:Ha,URL:Fa},Symbol.toStringTag,{value:"Module"}));function qa(e,t,n){var r=t.reduce((function(t,n){return t||e.getData(n)}),"");return null!=r?r:n}var Va;function Ba(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Wa=(Ba(Va={},La,{exposeProperties:{files:function(e){return Array.prototype.slice.call(e.files)},items:function(e){return e.items},dataTransfer:function(e){return e}},matchesTypes:["Files"]}),Ba(Va,za,{exposeProperties:{html:function(e,t){return qa(e,t,"")},dataTransfer:function(e){return e}},matchesTypes:["Html","text/html"]}),Ba(Va,Fa,{exposeProperties:{urls:function(e,t){return qa(e,t,"").split("\n")},dataTransfer:function(e){return e}},matchesTypes:["Url","text/uri-list"]}),Ba(Va,Ha,{exposeProperties:{text:function(e,t){return qa(e,t,"")},dataTransfer:function(e){return e}},matchesTypes:["Text","text/plain"]}),Va);function Ka(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function Ga(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ga(this,"item",void 0),Ga(this,"config",void 0),this.config=t,this.item={},this.initializeExposedProperties()}return Ka(e,[{key:"initializeExposedProperties",value:function(){var e=this;Object.keys(this.config.exposeProperties).forEach((function(t){Object.defineProperty(e.item,t,{configurable:!0,enumerable:!0,get:function(){return console.warn("Browser doesn't allow reading \"".concat(t,'" until the drop event.')),null}})}))}},{key:"loadDataTransfer",value:function(e){var t=this;if(e){var n={};Object.keys(this.config.exposeProperties).forEach((function(r){n[r]={value:t.config.exposeProperties[r](e,t.config.matchesTypes),configurable:!0,enumerable:!0}})),Object.defineProperties(this.item,n)}}},{key:"canDrag",value:function(){return!0}},{key:"beginDrag",value:function(){return this.item}},{key:"isDragging",value:function(e,t){return t===e.getSourceId()}},{key:"endDrag",value:function(){}}]),e}();function Ya(e){if(!e)return null;var t=Array.prototype.slice.call(e.types||[]);return Object.keys(Wa).filter((function(e){return Wa[e].matchesTypes.some((function(e){return t.indexOf(e)>-1}))}))[0]||null}function Xa(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function Qa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Za=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Qa(this,"ownerDocument",null),Qa(this,"globalContext",void 0),Qa(this,"optionsArgs",void 0),this.globalContext=t,this.optionsArgs=n}return Xa(e,[{key:"window",get:function(){return this.globalContext?this.globalContext:"undefined"!=typeof window?window:void 0}},{key:"document",get:function(){var e;return null!==(e=this.globalContext)&&void 0!==e&&e.document?this.globalContext.document:this.window?this.window.document:void 0}},{key:"rootElement",get:function(){var e;return(null===(e=this.optionsArgs)||void 0===e?void 0:e.rootElement)||this.window}}]),e}();function Ja(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function el(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ja(Object(n),!0).forEach((function(t){nl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ja(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tl(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function nl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var rl,il=function(){function e(t,n,r){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),nl(this,"options",void 0),nl(this,"actions",void 0),nl(this,"monitor",void 0),nl(this,"registry",void 0),nl(this,"enterLeaveCounter",void 0),nl(this,"sourcePreviewNodes",new Map),nl(this,"sourcePreviewNodeOptions",new Map),nl(this,"sourceNodes",new Map),nl(this,"sourceNodeOptions",new Map),nl(this,"dragStartSourceIds",null),nl(this,"dropTargetIds",[]),nl(this,"dragEnterTargetIds",[]),nl(this,"currentNativeSource",null),nl(this,"currentNativeHandle",null),nl(this,"currentDragSourceNode",null),nl(this,"altKeyPressed",!1),nl(this,"mouseMoveTimeoutTimer",null),nl(this,"asyncEndDragFrameId",null),nl(this,"dragOverTargetIds",null),nl(this,"lastClientOffset",null),nl(this,"hoverRafId",null),nl(this,"getSourceClientOffset",(function(e){var t=i.sourceNodes.get(e);return t&&Aa(t)||null})),nl(this,"endDragNativeItem",(function(){i.isDraggingNativeItem()&&(i.actions.endDrag(),i.currentNativeHandle&&i.registry.removeSource(i.currentNativeHandle),i.currentNativeHandle=null,i.currentNativeSource=null)})),nl(this,"isNodeInDocument",(function(e){return Boolean(e&&i.document&&i.document.body&&i.document.body.contains(e))})),nl(this,"endDragIfSourceWasRemovedFromDOM",(function(){var e=i.currentDragSourceNode;null==e||i.isNodeInDocument(e)||i.clearCurrentDragSourceNode()&&i.monitor.isDragging()&&i.actions.endDrag()})),nl(this,"handleTopDragStartCapture",(function(){i.clearCurrentDragSourceNode(),i.dragStartSourceIds=[]})),nl(this,"handleTopDragStart",(function(e){if(!e.defaultPrevented){var t=i.dragStartSourceIds;i.dragStartSourceIds=null;var n=Ma(e);i.monitor.isDragging()&&i.actions.endDrag(),i.actions.beginDrag(t||[],{publishSource:!1,getSourceClientOffset:i.getSourceClientOffset,clientOffset:n});var r=e.dataTransfer,o=Ya(r);if(i.monitor.isDragging()){if(r&&"function"==typeof r.setDragImage){var s=i.monitor.getSourceId(),a=i.sourceNodes.get(s),l=i.sourcePreviewNodes.get(s)||a;if(l){var c=i.getCurrentSourcePreviewNodeOptions(),u=Ra(a,l,n,{anchorX:c.anchorX,anchorY:c.anchorY},{offsetX:c.offsetX,offsetY:c.offsetY});r.setDragImage(l,u.x,u.y)}}try{null==r||r.setData("application/json",{})}catch(d){}i.setCurrentDragSourceNode(e.target),i.getCurrentSourcePreviewNodeOptions().captureDraggingState?i.actions.publishDragSource():setTimeout((function(){return i.actions.publishDragSource()}),0)}else if(o)i.beginDragNativeItem(o);else{if(r&&!r.types&&(e.target&&!e.target.hasAttribute||!e.target.hasAttribute("draggable")))return;e.preventDefault()}}})),nl(this,"handleTopDragEndCapture",(function(){i.clearCurrentDragSourceNode()&&i.monitor.isDragging()&&i.actions.endDrag()})),nl(this,"handleTopDragEnterCapture",(function(e){if(i.dragEnterTargetIds=[],i.enterLeaveCounter.enter(e.target)&&!i.monitor.isDragging()){var t=e.dataTransfer,n=Ya(t);n&&i.beginDragNativeItem(n,t)}})),nl(this,"handleTopDragEnter",(function(e){var t=i.dragEnterTargetIds;(i.dragEnterTargetIds=[],i.monitor.isDragging())&&(i.altKeyPressed=e.altKey,t.length>0&&i.actions.hover(t,{clientOffset:Ma(e)}),t.some((function(e){return i.monitor.canDropOnTarget(e)}))&&(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=i.getCurrentDropEffect())))})),nl(this,"handleTopDragOverCapture",(function(){i.dragOverTargetIds=[]})),nl(this,"handleTopDragOver",(function(e){var t=i.dragOverTargetIds;if(i.dragOverTargetIds=[],!i.monitor.isDragging())return e.preventDefault(),void(e.dataTransfer&&(e.dataTransfer.dropEffect="none"));i.altKeyPressed=e.altKey,i.lastClientOffset=Ma(e),null===i.hoverRafId&&"undefined"!=typeof requestAnimationFrame&&(i.hoverRafId=requestAnimationFrame((function(){i.monitor.isDragging()&&i.actions.hover(t||[],{clientOffset:i.lastClientOffset}),i.hoverRafId=null}))),(t||[]).some((function(e){return i.monitor.canDropOnTarget(e)}))?(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=i.getCurrentDropEffect())):i.isDraggingNativeItem()?e.preventDefault():(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="none"))})),nl(this,"handleTopDragLeaveCapture",(function(e){i.isDraggingNativeItem()&&e.preventDefault(),i.enterLeaveCounter.leave(e.target)&&i.isDraggingNativeItem()&&setTimeout((function(){return i.endDragNativeItem()}),0)})),nl(this,"handleTopDropCapture",(function(e){var t;(i.dropTargetIds=[],i.isDraggingNativeItem())?(e.preventDefault(),null===(t=i.currentNativeSource)||void 0===t||t.loadDataTransfer(e.dataTransfer)):Ya(e.dataTransfer)&&e.preventDefault();i.enterLeaveCounter.reset()})),nl(this,"handleTopDrop",(function(e){var t=i.dropTargetIds;i.dropTargetIds=[],i.actions.hover(t,{clientOffset:Ma(e)}),i.actions.drop({dropEffect:i.getCurrentDropEffect()}),i.isDraggingNativeItem()?i.endDragNativeItem():i.monitor.isDragging()&&i.actions.endDrag()})),nl(this,"handleSelectStart",(function(e){var t=e.target;"function"==typeof t.dragDrop&&("INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||(e.preventDefault(),t.dragDrop()))})),this.options=new Za(n,r),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.registry=t.getRegistry(),this.enterLeaveCounter=new Na(this.isNodeInDocument)}return tl(e,[{key:"profile",value:function(){var e,t;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:(null===(e=this.dragStartSourceIds)||void 0===e?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:(null===(t=this.dragOverTargetIds)||void 0===t?void 0:t.length)||0}}},{key:"window",get:function(){return this.options.window}},{key:"document",get:function(){return this.options.document}},{key:"rootElement",get:function(){return this.options.rootElement}},{key:"setup",value:function(){var e=this.rootElement;if(void 0!==e){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}},{key:"teardown",value:function(){var e,t=this.rootElement;void 0!==t&&(t.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId&&(null===(e=this.window)||void 0===e||e.cancelAnimationFrame(this.asyncEndDragFrameId)))}},{key:"connectDragPreview",value:function(e,t,n){var r=this;return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,t),function(){r.sourcePreviewNodes.delete(e),r.sourcePreviewNodeOptions.delete(e)}}},{key:"connectDragSource",value:function(e,t,n){var r=this;this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,n);var i=function(t){return r.handleDragStart(t,e)},o=function(e){return r.handleSelectStart(e)};return t.setAttribute("draggable","true"),t.addEventListener("dragstart",i),t.addEventListener("selectstart",o),function(){r.sourceNodes.delete(e),r.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",i),t.removeEventListener("selectstart",o),t.setAttribute("draggable","false")}}},{key:"connectDropTarget",value:function(e,t){var n=this,r=function(t){return n.handleDragEnter(t,e)},i=function(t){return n.handleDragOver(t,e)},o=function(t){return n.handleDrop(t,e)};return t.addEventListener("dragenter",r),t.addEventListener("dragover",i),t.addEventListener("drop",o),function(){t.removeEventListener("dragenter",r),t.removeEventListener("dragover",i),t.removeEventListener("drop",o)}}},{key:"addEventListeners",value:function(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}},{key:"removeEventListeners",value:function(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}},{key:"getCurrentSourceNodeOptions",value:function(){var e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return el({dropEffect:this.altKeyPressed?"copy":"move"},t||{})}},{key:"getCurrentDropEffect",value:function(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}},{key:"getCurrentSourcePreviewNodeOptions",value:function(){var e=this.monitor.getSourceId();return el({anchorX:.5,anchorY:.5,captureDraggingState:!1},this.sourcePreviewNodeOptions.get(e)||{})}},{key:"isDraggingNativeItem",value:function(){var e=this.monitor.getItemType();return Object.keys(Ua).some((function(t){return Ua[t]===e}))}},{key:"beginDragNativeItem",value:function(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=function(e,t){var n=new $a(Wa[e]);return n.loadDataTransfer(t),n}(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}},{key:"setCurrentDragSourceNode",value:function(e){var t=this;this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;this.mouseMoveTimeoutTimer=setTimeout((function(){var e;return null===(e=t.rootElement)||void 0===e?void 0:e.addEventListener("mousemove",t.endDragIfSourceWasRemovedFromDOM,!0)}),1e3)}},{key:"clearCurrentDragSourceNode",value:function(){if(this.currentDragSourceNode){var e;if(this.currentDragSourceNode=null,this.rootElement)null===(e=this.window)||void 0===e||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0);return this.mouseMoveTimeoutTimer=null,!0}return!1}},{key:"handleDragStart",value:function(e,t){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t))}},{key:"handleDragEnter",value:function(e,t){this.dragEnterTargetIds.unshift(t)}},{key:"handleDragOver",value:function(e,t){null===this.dragOverTargetIds&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}},{key:"handleDrop",value:function(e,t){this.dropTargetIds.unshift(t)}}]),e}();var ol=function(e,t,n){return new il(e,t,n)};function sl(e){const t=Nr(),n=t.selectedIds,[r,i,o]=pa((()=>({canDrag:()=>e.isDraggable,type:"NODE",item:()=>{const r=t.isSelected(e.id)?Array.from(n):[e.id];return t.dispatch(wi.dragStart(e.id,r)),{id:e.id,dragIds:r}},end:()=>{t.hideCursor(),t.dispatch(wi.dragEnd())}})),[n,e]);return p.useEffect((()=>{o((rl||((rl=new Image).src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),rl))}),[o]),i}function al(e,t){return{parentId:e||null,index:t}}function ll(e,t){return{type:"line",index:e,level:t}}function cl(e,t){var n;let r=e;for(;r.parent&&r.level>t;)r=r.parent;return{parentId:(null===(n=r.parent)||void 0===n?void 0:n.id)||null,index:Fr(r)+1}}function ul(e){var t;const n=function(e,t){const n=e.getBoundingClientRect(),r=t.x-Math.round(n.x),i=t.y-Math.round(n.y),o=n.height,s=i<o/2,a=!s,l=o/4,c=i>l&&i<o-l;return{x:r,inTopHalf:s,inBottomHalf:a,inMiddle:c,atTop:!c&&s,atBottom:!c&&a}}(e.element,e.offset),r=e.indent,i=Math.round(Math.max(0,n.x-r)/r),{node:o,nextNode:s,prevNode:a}=e,[l,c]=function(e,t,n,r){return e?e.isInternal?r.atTop?[t,e]:r.inMiddle?[e,e]:[e,n]:r.inTopHalf?[t,e]:[e,n]:[t,null]}(o,a,s,n);if(o&&o.isInternal&&n.inMiddle)return{drop:al(o.id,null),cursor:(u=o.id,{type:"highlight",id:u})};var u;if(!l)return{drop:al(null===(t=null==c?void 0:c.parent)||void 0===t?void 0:t.id,0),cursor:ll(0,0)};if(Ar(l)){const e=Pr(i,(null==c?void 0:c.level)||0,l.level);return{drop:cl(l,e),cursor:ll(l.rowIndex+1,e)}}if(Mr(l)){const e=Pr(i,(null==c?void 0:c.level)||0,l.level);return{drop:cl(l,e),cursor:ll(l.rowIndex+1,e)}}if(Rr(l)){const e=Pr(i,0,l.level+1);return e>l.level?{drop:al(l.id,0),cursor:ll(l.rowIndex+1,e)}:{drop:cl(l,e),cursor:ll(l.rowIndex+1,e)}}return{drop:al(null==l?void 0:l.id,0),cursor:ll(l.rowIndex+1,l.level+1)}}const dl=i.memo((function({index:e,style:t}){_r(),function(){const e=p.useContext(Dr);if(null===e)throw new Error("Provide a NodesContext")}();const n=Nr(),r=function(e){const t=Nr(),n=t.at(e);if(!n)throw new Error(`Could not find node for index: ${e}`);return p.useMemo((()=>{const r=n.clone();return t.visibleNodes[e]=r,r}),[...Object.values(n.state),n])}(e),i=p.useRef(null),o=sl(r),s=function(e,t){const n=Nr(),[r,i]=wa((()=>({accept:"NODE",canDrop:()=>n.canDrop(),hover:(r,i)=>{const o=i.getClientOffset();if(!e.current||!o)return;const{cursor:s,drop:a}=ul({element:e.current,offset:o,indent:n.indent,node:t,prevNode:t.prev,nextNode:t.next});a&&n.dispatch(wi.hovering(a.parentId,a.index)),i.canDrop()?s&&n.showCursor(s):n.hideCursor()},drop:(e,t)=>{if(!t.canDrop())return null;let{parentId:r,index:i,dragIds:o}=n.state.dnd;Yr(n.props.onMove,{dragIds:o,parentId:r===di?null:r,index:null===i?0:i,dragNodes:n.dragNodes,parentNode:n.get(r)}),n.open(r)}})),[t,e.current,n.props]);return i}(i,r),l=p.useCallback((e=>{i.current=e,s(e)}),[s]),c=n.indent*r.level,u=p.useMemo((()=>({paddingLeft:c})),[c]),d=p.useMemo((()=>{var e,r;return Object.assign(Object.assign({},t),{top:parseFloat(t.top)+(null!==(r=null!==(e=n.props.padding)&&void 0!==e?e:n.props.paddingTop)&&void 0!==r?r:0)})}),[t,n.props.padding,n.props.paddingTop]),h={role:"treeitem","aria-level":r.level+1,"aria-selected":r.isSelected,"aria-expanded":r.isOpen,style:d,tabIndex:-1,className:n.props.rowClassName};p.useEffect((()=>{var e;!r.isEditing&&r.isFocused&&(null===(e=i.current)||void 0===e||e.focus({preventScroll:!0}))}),[r.isEditing,r.isFocused,i.current]);const f=n.renderNode,g=n.renderRow;return a.jsx(g,{node:r,innerRef:l,attrs:h,children:a.jsx(f,{node:r,tree:n,style:u,dragHandle:o})})}));let hl="",fl=null;function pl(){_r();const e=Nr();return a.jsx("div",{role:"tree",style:{height:e.height,width:e.width,minHeight:0,minWidth:0},onContextMenu:e.props.onContextMenu,onClick:e.props.onClick,tabIndex:0,onFocus:t=>{t.currentTarget.contains(t.relatedTarget)||e.onFocus()},onBlur:t=>{t.currentTarget.contains(t.relatedTarget)||e.onBlur()},onKeyDown:t=>{var n;if(e.isEditing)return;if("Backspace"===t.key){if(!e.props.onDelete)return;const t=Array.from(e.selectedIds);if(t.length>1){let n=e.mostRecentNode;for(;n&&n.isSelected;)n=n.nextSibling;n||(n=e.lastNode),e.focus(n,{scroll:!1}),e.delete(Array.from(t))}else{const t=e.focusedNode;if(t){const n=t.nextSibling,r=t.parent;e.focus(n||r,{scroll:!1}),e.delete(t)}}return}if("Tab"===t.key&&!t.shiftKey)return t.preventDefault(),void Ur(t.currentTarget);if("Tab"===t.key&&t.shiftKey)return t.preventDefault(),void qr(t.currentTarget);if("ArrowDown"===t.key){t.preventDefault();const n=e.nextNode;if(t.metaKey)return e.select(e.focusedNode),void e.activate(e.focusedNode);if(!t.shiftKey||e.props.disableMultiSelection)return void e.focus(n);{if(!n)return;const t=e.focusedNode;return void(t?t.isSelected?e.selectContiguous(n):e.selectMulti(n):e.focus(e.firstNode))}}if("ArrowUp"===t.key){t.preventDefault();const n=e.prevNode;if(!t.shiftKey||e.props.disableMultiSelection)return void e.focus(n);{if(!n)return;const t=e.focusedNode;return void(t?t.isSelected?e.selectContiguous(n):e.selectMulti(n):e.focus(e.lastNode))}}if("ArrowRight"===t.key){const t=e.focusedNode;if(!t)return;return void(t.isInternal&&t.isOpen?e.focus(e.nextNode):t.isInternal&&e.open(t.id))}if("ArrowLeft"===t.key){const t=e.focusedNode;if(!t||t.isRoot)return;return void(t.isInternal&&t.isOpen?e.close(t.id):(null===(n=t.parent)||void 0===n?void 0:n.isRoot)||e.focus(t.parent))}if("a"===t.key&&t.metaKey&&!e.props.disableMultiSelection)return t.preventDefault(),void e.selectAll();if("a"===t.key&&!t.metaKey&&e.props.onCreate)return void e.createLeaf();if("A"===t.key&&!t.metaKey){if(!e.props.onCreate)return;return void e.createInternal()}if("Home"===t.key)return t.preventDefault(),void e.focus(e.firstNode);if("End"===t.key)return t.preventDefault(),void e.focus(e.lastNode);if("Enter"===t.key){const t=e.focusedNode;if(!t)return;if(!t.isEditable||!e.props.onRename)return;return void setTimeout((()=>{t&&e.edit(t)}))}if(" "===t.key){t.preventDefault();const n=e.focusedNode;if(!n)return;return void(n.isLeaf?(n.select(),n.activate()):n.toggle())}if("*"===t.key){const t=e.focusedNode;if(!t)return;return void e.openSiblings(t)}if("PageUp"===t.key)return t.preventDefault(),void e.pageUp();"PageDown"===t.key&&(t.preventDefault(),e.pageDown()),clearTimeout(fl),hl+=t.key,fl=setTimeout((()=>{hl=""}),600);const r=e.visibleNodes.find((e=>{const t=e.data.name;return"string"==typeof t&&t.toLowerCase().startsWith(hl)}));r&&e.focus(r.id)},children:a.jsx(Vi,{className:e.props.className,outerRef:e.listEl,itemCount:e.visibleNodes.length,height:e.height,width:e.width,itemSize:e.rowHeight,overscanCount:e.overscanCount,itemKey:t=>{var n;return(null===(n=e.visibleNodes[t])||void 0===n?void 0:n.id)||t},outerElementType:Wi,innerElementType:Gi,onScroll:e.props.onScroll,onItemsRendered:e.onItemsRendered.bind(e),ref:e.list,children:dl})})}function gl(e){return e.isFiltered?function(e,t){const n={},r=[];function i(e){if(!e.isRoot&&t(e)){n[e.id]=!0;let t=e.parent;for(;t;)n[t.id]=!0,t=t.parent}if(e.children)for(let t of e.children)i(t)}function o(e){var t;e.level>=0&&n[e.id]&&r.push(e),e.isOpen&&(null===(t=e.children)||void 0===t||t.forEach(o))}return i(e),o(e),r.forEach(ml),r}(e.root,e.isMatch.bind(e)):function(e){const t=[];function n(e){var r;e.level>=0&&t.push(e),e.isOpen&&(null===(r=e.children)||void 0===r||r.forEach(n))}return n(e),t.forEach(ml),t}(e.root)}function ml(e,t){e.rowIndex=t}const vl=e=>e.reduce(((e,t,n)=>(e[t.id]=n,e)),{});var yl=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};const{safeRun:xl,identify:bl,identifyNull:jl}=Jr;class wl{constructor(e,t,n,r){this.store=e,this.props=t,this.list=n,this.listEl=r,this.visibleStartIndex=0,this.visibleStopIndex=0,this.root=hi(this),this.visibleNodes=gl(this),this.idToIndex=vl(this.visibleNodes)}update(e){this.props=e,this.root=hi(this),this.visibleNodes=gl(this),this.idToIndex=vl(this.visibleNodes)}dispatch(e){return this.store.dispatch(e)}get state(){return this.store.getState()}get openState(){return this.state.nodes.open.unfiltered}get width(){var e;return null!==(e=this.props.width)&&void 0!==e?e:300}get height(){var e;return null!==(e=this.props.height)&&void 0!==e?e:500}get indent(){var e;return null!==(e=this.props.indent)&&void 0!==e?e:24}get rowHeight(){var e;return null!==(e=this.props.rowHeight)&&void 0!==e?e:24}get overscanCount(){var e;return null!==(e=this.props.overscanCount)&&void 0!==e?e:1}get searchTerm(){return(this.props.searchTerm||"").trim()}get matchFn(){var e;const t=null!==(e=this.props.searchMatch)&&void 0!==e?e:(e,t)=>JSON.stringify(Object.values(e.data)).toLocaleLowerCase().includes(t.toLocaleLowerCase());return e=>t(e,this.searchTerm)}accessChildren(e){var t;return null!==(t=Kr(e,this.props.childrenAccessor||"children"))&&void 0!==t?t:null}accessId(e){const t=Kr(e,this.props.idAccessor||"id");if(!t)throw new Error("Data must contain an 'id' property or props.idAccessor must return a string");return t}get firstNode(){var e;return null!==(e=this.visibleNodes[0])&&void 0!==e?e:null}get lastNode(){var e;return null!==(e=this.visibleNodes[this.visibleNodes.length-1])&&void 0!==e?e:null}get focusedNode(){var e;return null!==(e=this.get(this.state.nodes.focus.id))&&void 0!==e?e:null}get mostRecentNode(){var e;return null!==(e=this.get(this.state.nodes.selection.mostRecent))&&void 0!==e?e:null}get nextNode(){const e=this.indexOf(this.focusedNode);return null===e?null:this.at(e+1)}get prevNode(){const e=this.indexOf(this.focusedNode);return null===e?null:this.at(e-1)}get(e){return e&&e in this.idToIndex&&this.visibleNodes[this.idToIndex[e]]||null}at(e){return this.visibleNodes[e]||null}nodesBetween(e,t){var n;if(null===e||null===t)return[];const r=null!==(n=this.indexOf(e))&&void 0!==n?n:0,i=this.indexOf(t);if(null===i)return[];const o=Math.min(r,i),s=Math.max(r,i);return this.visibleNodes.slice(o,s+1)}indexOf(e){const t=Gr(e);return t?this.idToIndex[t]:null}get editingId(){return this.state.nodes.edit.id}createInternal(){return this.create({type:"internal"})}createLeaf(){return this.create({type:"leaf"})}create(){return yl(this,arguments,void 0,(function*(e={}){var t,n;const r=void 0===e.parentId?Zr(this):e.parentId,i=null!==(t=e.index)&&void 0!==t?t:Qr(this),o=null!==(n=e.type)&&void 0!==n?n:"leaf",s=yield xl(this.props.onCreate,{type:o,parentId:r,index:i,parentNode:this.get(r)});s&&(this.focus(s),setTimeout((()=>{this.edit(s).then((()=>{this.select(s),this.activate(s)}))})))}))}delete(e){return yl(this,void 0,void 0,(function*(){if(!e)return;const t=(Array.isArray(e)?e:[e]).map(bl),n=t.map((e=>this.get(e))).filter((e=>!!e));yield xl(this.props.onDelete,{nodes:n,ids:t})}))}edit(e){const t=bl(e);return this.resolveEdit({cancelled:!0}),this.scrollTo(t),this.dispatch(li(t)),new Promise((e=>{wl.editPromise=e}))}submit(e,t){return yl(this,void 0,void 0,(function*(){if(!e)return;const n=bl(e);yield xl(this.props.onRename,{id:n,name:t,node:this.get(n)}),this.dispatch(li(null)),this.resolveEdit({cancelled:!1,value:t}),setTimeout((()=>this.onFocus()))}))}reset(){this.dispatch(li(null)),this.resolveEdit({cancelled:!0}),setTimeout((()=>this.onFocus()))}activate(e){const t=this.get(jl(e));t&&xl(this.props.onActivate,t)}resolveEdit(e){const t=wl.editPromise;t&&t(e),wl.editPromise=null}get selectedIds(){return this.state.nodes.selection.ids}get selectedNodes(){let e=[];for(let t of Array.from(this.selectedIds)){const n=this.get(t);n&&e.push(n)}return e}focus(e,t={}){e&&(this.props.selectionFollowsFocus?this.select(e):(this.dispatch(ci(bl(e))),!1!==t.scroll&&this.scrollTo(e),this.focusedNode&&xl(this.props.onFocus,this.focusedNode)))}pageUp(){var e,t;const n=this.visibleStartIndex,r=this.visibleStopIndex-n;let i=null!==(t=null===(e=this.focusedNode)||void 0===e?void 0:e.rowIndex)&&void 0!==t?t:0;i=i>n?n:Math.max(n-r,0),this.focus(this.at(i))}pageDown(){var e,t;const n=this.visibleStartIndex,r=this.visibleStopIndex,i=r-n;let o=null!==(t=null===(e=this.focusedNode)||void 0===e?void 0:e.rowIndex)&&void 0!==t?t:0;o=o<r?r:Math.min(o+i,this.visibleNodes.length-1),this.focus(this.at(o))}select(e,t={}){if(!e)return;const n=!1!==t.focus,r=bl(e);n&&this.dispatch(ci(r)),this.dispatch(mi(r)),this.dispatch(ji(r)),this.dispatch(bi(r)),this.scrollTo(r,t.align),this.focusedNode&&n&&xl(this.props.onFocus,this.focusedNode),xl(this.props.onSelect,this.selectedNodes)}deselect(e){if(!e)return;const t=bl(e);this.dispatch(yi(t)),xl(this.props.onSelect,this.selectedNodes)}selectMulti(e){const t=this.get(jl(e));t&&(this.dispatch(ci(t.id)),this.dispatch(vi(t.id)),this.dispatch(ji(t.id)),this.dispatch(bi(t.id)),this.scrollTo(t),this.focusedNode&&xl(this.props.onFocus,this.focusedNode),xl(this.props.onSelect,this.selectedNodes))}selectContiguous(e){if(!e)return;const t=bl(e),{anchor:n,mostRecent:r}=this.state.nodes.selection;this.dispatch(ci(t)),this.dispatch(yi(this.nodesBetween(n,r))),this.dispatch(vi(this.nodesBetween(n,jl(t)))),this.dispatch(bi(t)),this.scrollTo(t),this.focusedNode&&xl(this.props.onFocus,this.focusedNode),xl(this.props.onSelect,this.selectedNodes)}deselectAll(){this.setSelection({ids:[],anchor:null,mostRecent:null}),xl(this.props.onSelect,this.selectedNodes)}selectAll(){var e;this.setSelection({ids:Object.keys(this.idToIndex),anchor:this.firstNode,mostRecent:this.lastNode}),this.dispatch(ci(null===(e=this.lastNode)||void 0===e?void 0:e.id)),this.focusedNode&&xl(this.props.onFocus,this.focusedNode),xl(this.props.onSelect,this.selectedNodes)}setSelection(e){var t;const n=new Set(null===(t=e.ids)||void 0===t?void 0:t.map(bl)),r=jl(e.anchor),i=jl(e.mostRecent);this.dispatch(xi({ids:n,anchor:r,mostRecent:i})),xl(this.props.onSelect,this.selectedNodes)}get cursorParentId(){const{cursor:e}=this.state.dnd;return"highlight"===e.type?e.id:null}get cursorOverFolder(){return"highlight"===this.state.dnd.cursor.type}get dragNodes(){return this.state.dnd.dragIds.map((e=>this.get(e))).filter((e=>!!e))}get dragNode(){return this.get(this.state.nodes.drag.id)}get dragDestinationParent(){return this.get(this.state.nodes.drag.destinationParentId)}get dragDestinationIndex(){return this.state.nodes.drag.destinationIndex}canDrop(){var e;if(this.isFiltered)return!1;const t=null!==(e=this.get(this.state.dnd.parentId))&&void 0!==e?e:this.root,n=this.dragNodes,r=this.props.disableDrop;for(const i of n){if(!i)return!1;if(!t)return!1;if(i.isInternal&&Lr(t,i))return!1}return"function"==typeof r?!r({parentNode:t,dragNodes:this.dragNodes,index:this.state.dnd.index||0}):"string"==typeof r?!t.data[r]:"boolean"!=typeof r||!r}hideCursor(){this.dispatch(wi.cursor({type:"none"}))}showCursor(e){this.dispatch(wi.cursor(e))}open(e){const t=jl(e);t&&(this.isOpen(t)||(this.dispatch(fi.open(t,this.isFiltered)),xl(this.props.onToggle,t)))}close(e){const t=jl(e);t&&this.isOpen(t)&&(this.dispatch(fi.close(t,this.isFiltered)),xl(this.props.onToggle,t))}toggle(e){const t=jl(e);if(t)return this.isOpen(t)?this.close(t):this.open(t)}openParents(e){const t=jl(e);if(!t)return;const n=Hr(this.root,t);let r=null==n?void 0:n.parent;for(;r;)this.open(r.id),r=r.parent}openSiblings(e){const t=e.parent;if(t){if(t.children){const n=e.isOpen;for(let e of t.children)e.isInternal&&(n?this.close(e.id):this.open(e.id));this.scrollTo(this.focusedNode)}}else this.toggle(e.id)}openAll(){zr(this.root,(e=>{e.isInternal&&e.open()}))}closeAll(){zr(this.root,(e=>{e.isInternal&&e.close()}))}scrollTo(e,t="smart"){if(!e)return;const n=bl(e);return this.openParents(n),Xr((()=>n in this.idToIndex)).then((()=>{var e;const r=this.idToIndex[n];void 0!==r&&(null===(e=this.list.current)||void 0===e||e.scrollToItem(r,t))})).catch((()=>{}))}get isEditing(){return null!==this.state.nodes.edit.id}get isFiltered(){var e;return!!(null===(e=this.props.searchTerm)||void 0===e?void 0:e.trim())}get hasFocus(){return this.state.nodes.focus.treeFocused}get hasNoSelection(){return 0===this.state.nodes.selection.ids.size}get hasOneSelection(){return 1===this.state.nodes.selection.ids.size}get hasMultipleSelections(){return this.state.nodes.selection.ids.size>1}isSelected(e){return!!e&&this.state.nodes.selection.ids.has(e)}isOpen(e){var t,n,r;if(!e)return!1;if(e===di)return!0;const i=null===(t=this.props.openByDefault)||void 0===t||t;return this.isFiltered?null===(n=this.state.nodes.open.filtered[e])||void 0===n||n:null!==(r=this.state.nodes.open.unfiltered[e])&&void 0!==r?r:i}isEditable(e){return!Kr(e,this.props.disableEdit||(()=>!1))}isDraggable(e){return!Kr(e,this.props.disableDrag||(()=>!1))}isDragging(e){const t=jl(e);return!!t&&this.state.nodes.drag.id===t}isFocused(e){return this.hasFocus&&this.state.nodes.focus.id===e}isMatch(e){return this.matchFn(e)}willReceiveDrop(e){const t=jl(e);if(!t)return!1;const{destinationParentId:n,destinationIndex:r}=this.state.nodes.drag;return t===n&&null===r}onFocus(){const e=this.focusedNode||this.firstNode;e&&this.dispatch(ci(e.id))}onBlur(){this.dispatch({type:"TREE_BLUR"})}onItemsRendered(e){this.visibleStartIndex=e.visibleStartIndex,this.visibleStopIndex=e.visibleStopIndex}get renderContainer(){return this.props.renderContainer||pl}get renderRow(){return this.props.renderRow||ii}get renderNode(){return this.props.children||oi}get renderDragPreview(){return this.props.renderDragPreview||Ci}get renderCursor(){return this.props.renderCursor||ri}}function Il(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Sl=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")(),Ol=()=>Math.random().toString(36).substring(7).split("").join("."),Cl={INIT:`@@redux/INIT${Ol()}`,REPLACE:`@@redux/REPLACE${Ol()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Ol()}`};function kl(e,t,n){if("function"!=typeof e)throw new Error(Il(2));if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(Il(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(Il(1));return n(kl)(e,t)}let r=e,i=t,o=new Map,s=o,a=0,l=!1;function c(){s===o&&(s=new Map,o.forEach(((e,t)=>{s.set(t,e)})))}function u(){if(l)throw new Error(Il(3));return i}function d(e){if("function"!=typeof e)throw new Error(Il(4));if(l)throw new Error(Il(5));let t=!0;c();const n=a++;return s.set(n,e),function(){if(t){if(l)throw new Error(Il(6));t=!1,c(),s.delete(n),o=null}}}function h(e){if(!function(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}(e))throw new Error(Il(7));if(void 0===e.type)throw new Error(Il(8));if("string"!=typeof e.type)throw new Error(Il(17));if(l)throw new Error(Il(9));try{l=!0,i=r(i,e)}finally{l=!1}return(o=s).forEach((e=>{e()})),e}h({type:Cl.INIT});return{dispatch:h,subscribe:d,getState:u,replaceReducer:function(e){if("function"!=typeof e)throw new Error(Il(10));r=e,h({type:Cl.REPLACE})},[Sl]:function(){const e=d;return{subscribe(t){if("object"!=typeof t||null===t)throw new Error(Il(11));function n(){const e=t;e.next&&e.next(u())}n();return{unsubscribe:e(n)}},[Sl](){return this}}}}}function Nl(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const r=t[s];"function"==typeof e[r]&&(n[r]=e[r])}const r=Object.keys(n);let i;try{!function(e){Object.keys(e).forEach((t=>{const n=e[t];if(void 0===n(void 0,{type:Cl.INIT}))throw new Error(Il(12));if(void 0===n(void 0,{type:Cl.PROBE_UNKNOWN_ACTION()}))throw new Error(Il(13))}))}(n)}catch(o){i=o}return function(e={},t){if(i)throw i;let o=!1;const s={};for(let i=0;i<r.length;i++){const a=r[i],l=n[a],c=e[a],u=l(c,t);if(void 0===u)throw t&&t.type,new Error(Il(14));s[a]=u,o=o||u!==c}return o=o||r.length!==Object.keys(e).length,o?s:e}}const Dl=Nl({nodes:Nl({focus:function(e={id:null,treeFocused:!1},t){return"FOCUS"===t.type?Object.assign(Object.assign({},e),{id:t.id,treeFocused:!0}):"TREE_BLUR"===t.type?Object.assign(Object.assign({},e),{treeFocused:!1}):e},edit:function(e={id:null},t){return"EDIT"===t.type?Object.assign(Object.assign({},e),{id:t.id}):e},open:function(e={filtered:{},unfiltered:{}},t){return t.type.startsWith("VISIBILITY")?t.filtered?Object.assign(Object.assign({},e),{filtered:pi(e.filtered,t)}):Object.assign(Object.assign({},e),{unfiltered:pi(e.unfiltered,t)}):e},selection:function(e=gi().nodes.selection,t){const n=e.ids;switch(t.type){case"SELECTION_CLEAR":return Object.assign(Object.assign({},e),{ids:new Set});case"SELECTION_ONLY":return Object.assign(Object.assign({},e),{ids:new Set([t.id])});case"SELECTION_ADD":return 0===t.ids.length?e:(t.ids.forEach((e=>n.add(e))),Object.assign(Object.assign({},e),{ids:new Set(n)}));case"SELECTION_REMOVE":return 0===t.ids.length?e:(t.ids.forEach((e=>n.delete(e))),Object.assign(Object.assign({},e),{ids:new Set(n)}));case"SELECTION_SET":return Object.assign(Object.assign({},e),{ids:t.ids,mostRecent:t.mostRecent,anchor:t.anchor});case"SELECTION_MOST_RECENT":return Object.assign(Object.assign({},e),{mostRecent:t.id});case"SELECTION_ANCHOR":return Object.assign(Object.assign({},e),{anchor:t.id});default:return e}},drag:function(e=gi().nodes.drag,t){switch(t.type){case"DND_DRAG_START":return Object.assign(Object.assign({},e),{id:t.id,selectedIds:t.dragIds});case"DND_DRAG_END":return Object.assign(Object.assign({},e),{id:null,destinationParentId:null,destinationIndex:null,selectedIds:[]});case"DND_HOVERING":return t.parentId!==e.destinationParentId||t.index!=e.destinationIndex?Object.assign(Object.assign({},e),{destinationParentId:t.parentId,destinationIndex:t.index}):e;default:return e}}}),dnd:function(e=gi().dnd,t){switch(t.type){case"DND_CURSOR":return Object.assign(Object.assign({},e),{cursor:t.cursor});case"DND_DRAG_START":return Object.assign(Object.assign({},e),{dragId:t.id,dragIds:t.dragIds});case"DND_DRAG_END":return gi().dnd;case"DND_HOVERING":return Object.assign(Object.assign({},e),{parentId:t.parentId,index:t.index});default:return e}}}),El=gi();function Tl({treeProps:e,imperativeHandle:t,children:n}){const r=p.useRef(null),i=p.useRef(null),o=p.useRef(kl(Dl,gi(e))),s=It.useSyncExternalStore(o.current.subscribe,o.current.getState,(()=>El)),l=p.useMemo((()=>new wl(o.current,e,r,i)),[]),c=p.useRef(0);return p.useMemo((()=>{c.current+=1,l.update(e)}),[...Object.values(e),s.nodes.open]),p.useImperativeHandle(t,(()=>l)),p.useEffect((()=>{l.props.selection?l.select(l.props.selection,{focus:!1}):l.deselectAll()}),[l.props.selection]),p.useEffect((()=>{l.props.searchTerm||o.current.dispatch(fi.clear(!0))}),[l.props.searchTerm]),a.jsx(kr.Provider,{value:l,children:a.jsx(Tr.Provider,{value:c.current,children:a.jsx(Dr.Provider,{value:s.nodes,children:a.jsx(Er.Provider,{value:s.dnd,children:a.jsx(Os,Object.assign({backend:ol,options:{rootElement:l.props.dndRootElement||void 0}},e.dndManager&&{manager:e.dndManager},{children:n}))})})})})}function _l(e){return function(){const e=Nr(),[,t]=wa((()=>({accept:"NODE",canDrop:(t,n)=>!!n.isOver({shallow:!0})&&e.canDrop(),hover:(t,n)=>{if(!n.isOver({shallow:!0}))return;const r=n.getClientOffset();if(!e.listEl.current||!r)return;const{cursor:i,drop:o}=ul({element:e.listEl.current,offset:r,indent:e.indent,node:null,prevNode:e.visibleNodes[e.visibleNodes.length-1],nextNode:null});o&&e.dispatch(wi.hovering(o.parentId,o.index)),n.canDrop()?i&&e.showCursor(i):e.hideCursor()}})),[e]);t(e.listEl)}(),e.children}function Pl(){const e=Nr().props.renderContainer||pl;return a.jsx(a.Fragment,{children:a.jsx(e,{})})}function Al(){const e=Nr(),{offset:t,mouse:n,item:r,isDragging:i}=(o=e=>({offset:e.getSourceClientOffset(),mouse:e.getClientOffset(),item:e.getItem(),isDragging:e.isDragging()}),s=Js().getMonitor(),l=Ia(la(s,o),2),c=l[0],u=l[1],p.useEffect((function(){return s.subscribeToOffsetChange(u)})),p.useEffect((function(){return s.subscribeToStateChange(u)})),c);var o,s,l,c,u;const d=e.props.renderDragPreview||Ci;return a.jsx(d,{offset:t,mouse:n,id:(null==r?void 0:r.id)||null,dragIds:(null==r?void 0:r.dragIds)||[],isDragging:i})}class Ml{constructor(e){this.root=function(e){const t=new Ll({id:"ROOT"},null);return t.children=e.map((e=>Rl(e,t))),t}(e)}get data(){var e,t;return null!==(t=null===(e=this.root.children)||void 0===e?void 0:e.map((e=>e.data)))&&void 0!==t?t:[]}create(e){const t=e.parentId?this.find(e.parentId):this.root;if(!t)return null;t.addChild(e.data,e.index)}move(e){const t=this.find(e.id),n=e.parentId?this.find(e.parentId):this.root;t&&n&&(n.addChild(t.data,e.index),t.drop())}update(e){const t=this.find(e.id);t&&t.update(e.changes)}drop(e){const t=this.find(e.id);t&&t.drop()}find(e,t=this.root){if(!t)return null;if(t.id===e)return t;if(t.children){for(let n of t.children){const t=this.find(e,n);if(t)return t}return null}return null}}function Rl(e,t){const n=new Ll(e,t);return e.children&&(n.children=e.children.map((e=>Rl(e,n)))),n}class Ll{constructor(e,t){this.data=e,this.parent=t,this.id=e.id}hasParent(){return!!this.parent}get childIndex(){return this.hasParent()?this.parent.children.indexOf(this):-1}addChild(e,t){var n,r;const i=Rl(e,this);this.children=null!==(n=this.children)&&void 0!==n?n:[],this.children.splice(t,0,i),this.data.children=null!==(r=this.data.children)&&void 0!==r?r:[],this.data.children.splice(t,0,e)}removeChild(e){var t,n;null===(t=this.children)||void 0===t||t.splice(e,1),null===(n=this.data.children)||void 0===n||n.splice(e,1)}update(e){if(this.hasParent()){const t=this.childIndex;this.parent.addChild(Object.assign(Object.assign({},this.data),e),t),this.drop()}}drop(){this.hasParent()&&this.parent.removeChild(this.childIndex)}}let Fl=0;function Hl(e){if(e.initialData&&e.data)throw new Error("React Arborist Tree => Provide either a data or initialData prop, but not both.");if(e.initialData&&(e.onCreate||e.onDelete||e.onMove||e.onRename))throw new Error("React Arborist Tree => You passed the initialData prop along with a data handler.\nUse the data prop if you want to provide your own handlers.");if(e.initialData){const[t,n]=function(e){const[t,n]=p.useState(e),r=p.useMemo((()=>new Ml(t)),[t]);return[t,{onMove:e=>{for(const t of e.dragIds)r.move({id:t,parentId:e.parentId,index:e.index});n(r.data)},onRename:({name:e,id:t})=>{r.update({id:t,changes:{name:e}}),n(r.data)},onCreate:({parentId:e,index:t,type:i})=>{const o={id:"simple-tree-id-"+Fl++,name:""};return"internal"===i&&(o.children=[]),r.create({parentId:e,index:t,data:o}),n(r.data),o},onDelete:e=>{e.ids.forEach((e=>r.drop({id:e}))),n(r.data)}}]}(e.initialData);return Object.assign(Object.assign(Object.assign({},e),n),{data:t})}return e}const zl=p.forwardRef((function(e,t){const n=Hl(e);return a.jsxs(Tl,{treeProps:n,imperativeHandle:t,children:[a.jsx(_l,{children:a.jsx(Pl,{})}),a.jsx(Al,{})]})}));export{Ot as A,Ct as B,Ir as C,At as G,Hn as K,Mt as L,Cr as M,Ht as P,Kt as S,zl as T,zt as Y,Pt as a,Rt as b,Or as c,An as d,kt as e,Wt as f,_n as g,Mn as h,pn as i,rn as j,Fn as k,fn as l,cn as m,ln as n,Cn as o,Rn as p,Ln as q,mn as r,gn as s,en as t,Yt as u,nn as v,tn as w,Et as x,Ml as y};
