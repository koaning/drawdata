import{s as z}from"./chunk-LvLJmgfZ.js";import{d as ne,n as T,p as $,u as U}from"./useEvent-DlWF5OMa.js";import{t as ie}from"./react-BGmjiNul.js";import{G as _}from"./cells-CmJW_FeD.js";import{t as D}from"./compiler-runtime-DeeZ7FnK.js";import{a as le,d as E,f as ce,l as I}from"./hotkeys-uKX61F1_.js";import{p as ue}from"./utils-Czt8B2GX.js";import{r as H}from"./config-CENq_7Pd.js";import{r as M,t as W}from"./useEventListener-COkmyg1v.js";import{t as de}from"./jsx-runtime-DN_bIXfG.js";import{n as L,t as G}from"./cn-C1rgT0yh.js";import{m as fe}from"./select-D9lTzMzP.js";import{E as pe,S as he,_ as F,w as me}from"./Combination-D1TsGrBC.js";import{l as ye}from"./dist-CBrDuocE.js";function be(){try{return window.__MARIMO_MOUNT_CONFIG__.version}catch{return E.warn("Failed to get version from mount config"),null}}const we=$(be()||"latest"),ge=$(!0),je=$(null);var ve={"Content-Type":"application/json"},xe=/\{[^{}]+\}/g,Re=class extends Request{constructor(s,r){for(let e in super(s,r),r)e in this||(this[e]=r[e])}};function ke(s){let{baseUrl:r="",fetch:e=globalThis.fetch,querySerializer:a,bodySerializer:t,headers:o,...n}={...s};r.endsWith("/")&&(r=r.substring(0,r.length-1)),o=X(ve,o);let i=[];async function u(l,c){let{fetch:f=e,headers:h,params:d={},parseAs:j="json",querySerializer:b,bodySerializer:k=t??Te,...R}=c||{},S=typeof a=="function"?a:B(a);b&&(S=typeof b=="function"?b:B({...typeof a=="object"?a:{},...b}));let m={redirect:"follow",...n,...R,headers:X(o,h,d.header)};m.body&&(m.body=k(m.body)),m.body instanceof FormData&&m.headers.delete("Content-Type");let v=new Re($e(l,{baseUrl:r,params:d,querySerializer:S}),m),N={baseUrl:r,fetch:f,parseAs:j,querySerializer:S,bodySerializer:k};for(let w of i)if(w&&typeof w=="object"&&typeof w.onRequest=="function"){v.schemaPath=l,v.params=d;let g=await w.onRequest(v,N);if(g){if(!(g instanceof Request))throw Error("Middleware must return new Request() when modifying the request");v=g}}let p=await f(v);for(let w=i.length-1;w>=0;w--){let g=i[w];if(g&&typeof g=="object"&&typeof g.onResponse=="function"){let q=await g.onResponse(p,N);if(q){if(!(q instanceof Response))throw Error("Middleware must return new Response() when modifying the response");p=q}}}if(p.status===204||p.headers.get("Content-Length")==="0")return p.ok?{data:{},response:p}:{error:{},response:p};if(p.ok)return j==="stream"?{data:p.body,response:p}:{data:await p[j](),response:p};let C=await p.text();try{C=JSON.parse(C)}catch{}return{error:C,response:p}}return{async GET(l,c){return u(l,{...c,method:"GET"})},async PUT(l,c){return u(l,{...c,method:"PUT"})},async POST(l,c){return u(l,{...c,method:"POST"})},async DELETE(l,c){return u(l,{...c,method:"DELETE"})},async OPTIONS(l,c){return u(l,{...c,method:"OPTIONS"})},async HEAD(l,c){return u(l,{...c,method:"HEAD"})},async PATCH(l,c){return u(l,{...c,method:"PATCH"})},async TRACE(l,c){return u(l,{...c,method:"TRACE"})},use(...l){for(let c of l)if(c){if(typeof c!="object"||!("onRequest"in c||"onResponse"in c))throw Error("Middleware must be an object with one of `onRequest()` or `onResponse()`");i.push(c)}},eject(...l){for(let c of l){let f=i.indexOf(c);f!==-1&&i.splice(f,1)}}}}function P(s,r,e){if(r==null)return"";if(typeof r=="object")throw Error("Deeply-nested arrays/objects aren\u2019t supported. Provide your own `querySerializer()` to handle these.");return`${s}=${(e==null?void 0:e.allowReserved)===!0?r:encodeURIComponent(r)}`}function J(s,r,e){if(!r||typeof r!="object")return"";let a=[],t={simple:",",label:".",matrix:";"}[e.style]||"&";if(e.style!=="deepObject"&&e.explode===!1){for(let i in r)a.push(i,e.allowReserved===!0?r[i]:encodeURIComponent(r[i]));let n=a.join(",");switch(e.style){case"form":return`${s}=${n}`;case"label":return`.${n}`;case"matrix":return`;${s}=${n}`;default:return n}}for(let n in r){let i=e.style==="deepObject"?`${s}[${n}]`:n;a.push(P(i,r[n],e))}let o=a.join(t);return e.style==="label"||e.style==="matrix"?`${t}${o}`:o}function V(s,r,e){if(!Array.isArray(r))return"";if(e.explode===!1){let o={form:",",spaceDelimited:"%20",pipeDelimited:"|"}[e.style]||",",n=(e.allowReserved===!0?r:r.map(i=>encodeURIComponent(i))).join(o);switch(e.style){case"simple":return n;case"label":return`.${n}`;case"matrix":return`;${s}=${n}`;default:return`${s}=${n}`}}let a={simple:",",label:".",matrix:";"}[e.style]||"&",t=[];for(let o of r)e.style==="simple"||e.style==="label"?t.push(e.allowReserved===!0?o:encodeURIComponent(o)):t.push(P(s,o,e));return e.style==="label"||e.style==="matrix"?`${a}${t.join(a)}`:t.join(a)}function B(s){return function(r){let e=[];if(r&&typeof r=="object")for(let a in r){let t=r[a];if(t!=null){if(Array.isArray(t)){e.push(V(a,t,{style:"form",explode:!0,...s==null?void 0:s.array,allowReserved:(s==null?void 0:s.allowReserved)||!1}));continue}if(typeof t=="object"){e.push(J(a,t,{style:"deepObject",explode:!0,...s==null?void 0:s.object,allowReserved:(s==null?void 0:s.allowReserved)||!1}));continue}e.push(P(a,t,s))}}return e.join("&")}}function Se(s,r){let e=s;for(let a of s.match(xe)??[]){let t=a.substring(1,a.length-1),o=!1,n="simple";if(t.endsWith("*")&&(o=!0,t=t.substring(0,t.length-1)),t.startsWith(".")?(n="label",t=t.substring(1)):t.startsWith(";")&&(n="matrix",t=t.substring(1)),!r||r[t]===void 0||r[t]===null)continue;let i=r[t];if(Array.isArray(i)){e=e.replace(a,V(t,i,{style:n,explode:o}));continue}if(typeof i=="object"){e=e.replace(a,J(t,i,{style:n,explode:o}));continue}if(n==="matrix"){e=e.replace(a,`;${P(t,i)}`);continue}e=e.replace(a,n==="label"?`.${i}`:i)}return e}function Te(s){return JSON.stringify(s)}function $e(s,r){var t;let e=`${r.baseUrl}${s}`;(t=r.params)!=null&&t.path&&(e=Se(e,r.params.path));let a=r.querySerializer(r.params.query??{});return a.startsWith("?")&&(a=a.substring(1)),a&&(e+=`?${a}`),e}function X(...s){let r=new Headers;for(let e of s){if(!e||typeof e!="object")continue;let a=e instanceof Headers?e.entries():Object.entries(e);for(let[t,o]of a)if(o===null)r.delete(t);else if(Array.isArray(o))for(let n of o)r.append(t,n);else o!==void 0&&r.set(t,o)}return r}function Ee(s){return ke(s)}function K(){let s=H().httpURL;return s.search="",s.hash="",s.toString()}const A={post(s,r,e={}){let a=`${_.withTrailingSlash(e.baseUrl??K())}api${s}`;return fetch(a,{method:"POST",headers:{"Content-Type":"application/json",...A.headers(),...e.headers},body:JSON.stringify(r),signal:e.signal}).then(async t=>{var n;let o=(n=t.headers.get("Content-Type"))==null?void 0:n.startsWith("application/json");if(!t.ok){let i=o?await t.json():await t.text();throw Error(t.statusText,{cause:i})}return o?t.json():t.text()}).catch(t=>{throw E.error(`Error requesting ${a}`,t),t})},get(s,r={}){let e=`${_.withTrailingSlash(r.baseUrl??K())}api${s}`;return fetch(e,{method:"GET",headers:{...A.headers(),...r.headers}}).then(a=>{var t;if(!a.ok)throw Error(a.statusText);return(t=a.headers.get("Content-Type"))!=null&&t.startsWith("application/json")?a.json():null}).catch(a=>{throw E.error(`Error requesting ${e}`,a),a})},headers(){return H().headers()},handleResponse:s=>s.error?Promise.reject(s.error):Promise.resolve(s.data),handleResponseReturnNull:s=>s.error?Promise.reject(s.error):Promise.resolve(null)};function Pe(s){let r=Ee({baseUrl:s.httpURL.toString()});return r.use({onRequest:e=>{let a=s.headers();for(let[t,o]of Object.entries(a))e.headers.set(t,o);return e}}),r}var Q=$({});function Oe(){return U(Q)}function Ce(){let s=ne(Q);return{registerAction:T((r,e)=>{s(a=>({...a,[r]:e}))}),unregisterAction:T(r=>{s(e=>{let{[r]:a,...t}=e;return t})})}}var Y=D(),y=z(ie(),1);function qe(s,r){let e=(0,Y.c)(13),{registerAction:a,unregisterAction:t}=Ce(),o=U(ue),n=r===ce.NOOP,i;e[0]===r?i=e[1]:(i=d=>r(d),e[0]=r,e[1]=i);let u=T(i),l;e[2]!==r||e[3]!==o||e[4]!==s?(l=d=>{if(d.defaultPrevented)return;let j=o.getHotkey(s).key;I(j)(d)&&r(d)!==!1&&(d.preventDefault(),d.stopPropagation())},e[2]=r,e[3]=o,e[4]=s,e[5]=l):l=e[5];let c=T(l);W(document,"keydown",c);let f,h;e[6]!==n||e[7]!==u||e[8]!==a||e[9]!==s||e[10]!==t?(f=()=>{if(!n)return a(s,u),()=>t(s)},h=[u,s,n,a,t],e[6]=n,e[7]=u,e[8]=a,e[9]=s,e[10]=t,e[11]=f,e[12]=h):(f=e[11],h=e[12]),(0,y.useEffect)(f,h)}function Ae(s,r){let e=(0,Y.c)(2),a;e[0]===r?a=e[1]:(a=t=>{if(!t.defaultPrevented)for(let[o,n]of le.entries(r))I(o)(t)&&(E.debug("Satisfied",o,t),n(t)!==!1&&(t.preventDefault(),t.stopPropagation()))},e[0]=r,e[1]=a),W(s,"keydown",a)}var x=z(de(),1),O="Switch",[Ne,rt]=pe(O),[ze,Ue]=Ne(O),Z=y.forwardRef((s,r)=>{let{__scopeSwitch:e,name:a,checked:t,defaultChecked:o,required:n,disabled:i,value:u="on",onCheckedChange:l,form:c,...f}=s,[h,d]=y.useState(null),j=M(r,m=>d(m)),b=y.useRef(!1),k=h?c||!!h.closest("form"):!0,[R,S]=he({prop:t,defaultProp:o??!1,onChange:l,caller:O});return(0,x.jsxs)(ze,{scope:e,checked:R,disabled:i,children:[(0,x.jsx)(F.button,{type:"button",role:"switch","aria-checked":R,"aria-required":n,"data-state":se(R),"data-disabled":i?"":void 0,disabled:i,value:u,...f,ref:j,onClick:me(s.onClick,m=>{S(v=>!v),k&&(b.current=m.isPropagationStopped(),b.current||m.stopPropagation())})}),k&&(0,x.jsx)(re,{control:h,bubbles:!b.current,name:a,value:u,checked:R,required:n,disabled:i,form:c,style:{transform:"translateX(-100%)"}})]})});Z.displayName=O;var ee="SwitchThumb",te=y.forwardRef((s,r)=>{let{__scopeSwitch:e,...a}=s,t=Ue(ee,e);return(0,x.jsx)(F.span,{"data-state":se(t.checked),"data-disabled":t.disabled?"":void 0,...a,ref:r})});te.displayName=ee;var _e="SwitchBubbleInput",re=y.forwardRef(({__scopeSwitch:s,control:r,checked:e,bubbles:a=!0,...t},o)=>{let n=y.useRef(null),i=M(n,o),u=fe(e),l=ye(r);return y.useEffect(()=>{let c=n.current;if(!c)return;let f=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(f,"checked").set;if(u!==e&&h){let d=new Event("click",{bubbles:a});h.call(c,e),c.dispatchEvent(d)}},[u,e,a]),(0,x.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:e,...t,tabIndex:-1,ref:i,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});re.displayName=_e;function se(s){return s?"checked":"unchecked"}var ae=Z,De=te,Ie=D(),He=L("peer inline-flex shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-hidden focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",{variants:{size:{default:"h-6 w-11 mb-1",sm:"h-4.5 w-8.5",xs:"h-4 w-7"}},defaultVariants:{size:"default"}}),Me=L("pointer-events-none block rounded-full bg-background shadow-xs ring-0 transition-transform",{variants:{size:{default:"h-5 w-5 data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0",sm:"h-3.5 w-3.5 data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0",xs:"h-3 w-3 data-[state=checked]:translate-x-3 data-[state=unchecked]:translate-x-0"}},defaultVariants:{size:"default"}}),oe=y.forwardRef((s,r)=>{let e=(0,Ie.c)(16),a,t,o;e[0]===s?(a=e[1],t=e[2],o=e[3]):({className:a,size:o,...t}=s,e[0]=s,e[1]=a,e[2]=t,e[3]=o);let n;e[4]!==a||e[5]!==o?(n=G(He({size:o}),a),e[4]=a,e[5]=o,e[6]=n):n=e[6];let i;e[7]===o?i=e[8]:(i=G(Me({size:o})),e[7]=o,e[8]=i);let u;e[9]===i?u=e[10]:(u=(0,x.jsx)(De,{className:i}),e[9]=i,e[10]=u);let l;return e[11]!==t||e[12]!==r||e[13]!==n||e[14]!==u?(l=(0,x.jsx)(ae,{className:n,...t,ref:r,children:u}),e[11]=t,e[12]=r,e[13]=n,e[14]=u,e[15]=l):l=e[15],l});oe.displayName=ae.displayName;export{A as a,je as c,Oe as i,ge as l,qe as n,Pe as o,Ae as r,we as s,oe as t};
