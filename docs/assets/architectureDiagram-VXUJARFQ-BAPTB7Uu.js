var te;import{s as Ue,t as de}from"./chunk-LvLJmgfZ.js";import"./chunk-FPAJGGOC-C0XAW5Os.js";import"./main-CwSdzVhm.js";import"./purify.es-N-2faAGj.js";import"./marked.esm-BZNXs5FA.js";import{u as Xe}from"./src-Bp_72rVO.js";import{c as ze,i as Be}from"./chunk-S3R3BYOJ-By1A-M0T.js";import{n as gt,r as Ae}from"./src-faGJHwXX.js";import{B as Ve,C as We,G as je,I as $e,U as qe,_ as Ze,a as Je,b as ge,d as Ke,v as Qe,y as ti,z as ei}from"./chunk-ABZYJK2D-DAD3GlgM.js";import{t as ii}from"./chunk-EXTU4WIE-GbJyzeBy.js";import"./dist-BA8xhrl2.js";import{i as ri,n as ce,o as oi,r as ue}from"./chunk-JA3XYJ7Z-BlmyoDCa.js";import"./chunk-O7ZBX7Z2-CYcfcXcp.js";import"./chunk-S6J4BHB3-D3MBXPxT.js";import"./chunk-LBM3YZW2-CQVIMcAR.js";import"./chunk-76Q3JFCE-COngPFoW.js";import"./chunk-T53DSG4Q-B6Z3zF7Z.js";import"./chunk-LHMN2FUI-DW2iokr2.js";import"./chunk-FWNWRKHM-XgKeqUvn.js";import{t as ni}from"./chunk-4BX2VUAB-B5-8Pez8.js";import{t as ai}from"./mermaid-parser.core-wRO0EX_C.js";import{t as Ce}from"./cytoscape.esm-CiNp3hmz.js";var Le=de(((_,x)=>{(function(C,M){typeof _=="object"&&typeof x=="object"?x.exports=M():typeof define=="function"&&define.amd?define([],M):typeof _=="object"?_.layoutBase=M():C.layoutBase=M()})(_,function(){return(function(C){var M={};function N(f){if(M[f])return M[f].exports;var r=M[f]={i:f,l:!1,exports:{}};return C[f].call(r.exports,r,r.exports,N),r.l=!0,r.exports}return N.m=C,N.c=M,N.i=function(f){return f},N.d=function(f,r,n){N.o(f,r)||Object.defineProperty(f,r,{configurable:!1,enumerable:!0,get:n})},N.n=function(f){var r=f&&f.__esModule?function(){return f.default}:function(){return f};return N.d(r,"a",r),r},N.o=function(f,r){return Object.prototype.hasOwnProperty.call(f,r)},N.p="",N(N.s=28)})([(function(C,M,N){function f(){}f.QUALITY=1,f.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,f.DEFAULT_INCREMENTAL=!1,f.DEFAULT_ANIMATION_ON_LAYOUT=!0,f.DEFAULT_ANIMATION_DURING_LAYOUT=!1,f.DEFAULT_ANIMATION_PERIOD=50,f.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,f.DEFAULT_GRAPH_MARGIN=15,f.NODE_DIMENSIONS_INCLUDE_LABELS=!1,f.SIMPLE_NODE_SIZE=40,f.SIMPLE_NODE_HALF_SIZE=f.SIMPLE_NODE_SIZE/2,f.EMPTY_COMPOUND_NODE_SIZE=40,f.MIN_EDGE_LENGTH=1,f.WORLD_BOUNDARY=1e6,f.INITIAL_WORLD_BOUNDARY=f.WORLD_BOUNDARY/1e3,f.WORLD_CENTER_X=1200,f.WORLD_CENTER_Y=900,C.exports=f}),(function(C,M,N){var f=N(2),r=N(8),n=N(9);function t(h,a,p){f.call(this,p),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=p,this.bendpoints=[],this.source=h,this.target=a}for(var e in t.prototype=Object.create(f.prototype),f)t[e]=f[e];t.prototype.getSource=function(){return this.source},t.prototype.getTarget=function(){return this.target},t.prototype.isInterGraph=function(){return this.isInterGraph},t.prototype.getLength=function(){return this.length},t.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},t.prototype.getBendpoints=function(){return this.bendpoints},t.prototype.getLca=function(){return this.lca},t.prototype.getSourceInLca=function(){return this.sourceInLca},t.prototype.getTargetInLca=function(){return this.targetInLca},t.prototype.getOtherEnd=function(h){if(this.source===h)return this.target;if(this.target===h)return this.source;throw"Node is not incident with this edge"},t.prototype.getOtherEndInGraph=function(h,a){for(var p=this.getOtherEnd(h),o=a.getGraphManager().getRoot();;){if(p.getOwner()==a)return p;if(p.getOwner()==o)break;p=p.getOwner().getParent()}return null},t.prototype.updateLength=function(){var h=[,,,,];this.isOverlapingSourceAndTarget=r.getIntersection(this.target.getRect(),this.source.getRect(),h),this.isOverlapingSourceAndTarget||(this.lengthX=h[0]-h[2],this.lengthY=h[1]-h[3],Math.abs(this.lengthX)<1&&(this.lengthX=n.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=n.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},t.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=n.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=n.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},C.exports=t}),(function(C,M,N){function f(r){this.vGraphObject=r}C.exports=f}),(function(C,M,N){var f=N(2),r=N(10),n=N(13),t=N(0),e=N(16),h=N(5);function a(o,i,d,s){d==null&&s==null&&(s=i),f.call(this,s),o.graphManager!=null&&(o=o.graphManager),this.estimatedSize=r.MIN_VALUE,this.inclusionTreeDepth=r.MAX_VALUE,this.vGraphObject=s,this.edges=[],this.graphManager=o,d!=null&&i!=null?this.rect=new n(i.x,i.y,d.width,d.height):this.rect=new n}for(var p in a.prototype=Object.create(f.prototype),f)a[p]=f[p];a.prototype.getEdges=function(){return this.edges},a.prototype.getChild=function(){return this.child},a.prototype.getOwner=function(){return this.owner},a.prototype.getWidth=function(){return this.rect.width},a.prototype.setWidth=function(o){this.rect.width=o},a.prototype.getHeight=function(){return this.rect.height},a.prototype.setHeight=function(o){this.rect.height=o},a.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},a.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},a.prototype.getCenter=function(){return new h(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},a.prototype.getLocation=function(){return new h(this.rect.x,this.rect.y)},a.prototype.getRect=function(){return this.rect},a.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},a.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},a.prototype.setRect=function(o,i){this.rect.x=o.x,this.rect.y=o.y,this.rect.width=i.width,this.rect.height=i.height},a.prototype.setCenter=function(o,i){this.rect.x=o-this.rect.width/2,this.rect.y=i-this.rect.height/2},a.prototype.setLocation=function(o,i){this.rect.x=o,this.rect.y=i},a.prototype.moveBy=function(o,i){this.rect.x+=o,this.rect.y+=i},a.prototype.getEdgeListToNode=function(o){var i=[],d=this;return d.edges.forEach(function(s){if(s.target==o){if(s.source!=d)throw"Incorrect edge source!";i.push(s)}}),i},a.prototype.getEdgesBetween=function(o){var i=[],d=this;return d.edges.forEach(function(s){if(!(s.source==d||s.target==d))throw"Incorrect edge source and/or target";(s.target==o||s.source==o)&&i.push(s)}),i},a.prototype.getNeighborsList=function(){var o=new Set,i=this;return i.edges.forEach(function(d){if(d.source==i)o.add(d.target);else{if(d.target!=i)throw"Incorrect incidency!";o.add(d.source)}}),o},a.prototype.withChildren=function(){var o=new Set,i,d;if(o.add(this),this.child!=null)for(var s=this.child.getNodes(),c=0;c<s.length;c++)i=s[c],d=i.withChildren(),d.forEach(function(g){o.add(g)});return o},a.prototype.getNoOfChildren=function(){var o=0,i;if(this.child==null)o=1;else for(var d=this.child.getNodes(),s=0;s<d.length;s++)i=d[s],o+=i.getNoOfChildren();return o==0&&(o=1),o},a.prototype.getEstimatedSize=function(){if(this.estimatedSize==r.MIN_VALUE)throw"assert failed";return this.estimatedSize},a.prototype.calcEstimatedSize=function(){return this.child==null?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},a.prototype.scatter=function(){var o,i,d=-t.INITIAL_WORLD_BOUNDARY,s=t.INITIAL_WORLD_BOUNDARY;o=t.WORLD_CENTER_X+e.nextDouble()*(s-d)+d;var c=-t.INITIAL_WORLD_BOUNDARY,g=t.INITIAL_WORLD_BOUNDARY;i=t.WORLD_CENTER_Y+e.nextDouble()*(g-c)+c,this.rect.x=o,this.rect.y=i},a.prototype.updateBounds=function(){if(this.getChild()==null)throw"assert failed";if(this.getChild().getNodes().length!=0){var o=this.getChild();if(o.updateBounds(!0),this.rect.x=o.getLeft(),this.rect.y=o.getTop(),this.setWidth(o.getRight()-o.getLeft()),this.setHeight(o.getBottom()-o.getTop()),t.NODE_DIMENSIONS_INCLUDE_LABELS){var i=o.getRight()-o.getLeft(),d=o.getBottom()-o.getTop();this.labelWidth&&(this.labelPosHorizontal=="left"?(this.rect.x-=this.labelWidth,this.setWidth(i+this.labelWidth)):this.labelPosHorizontal=="center"&&this.labelWidth>i?(this.rect.x-=(this.labelWidth-i)/2,this.setWidth(this.labelWidth)):this.labelPosHorizontal=="right"&&this.setWidth(i+this.labelWidth)),this.labelHeight&&(this.labelPosVertical=="top"?(this.rect.y-=this.labelHeight,this.setHeight(d+this.labelHeight)):this.labelPosVertical=="center"&&this.labelHeight>d?(this.rect.y-=(this.labelHeight-d)/2,this.setHeight(this.labelHeight)):this.labelPosVertical=="bottom"&&this.setHeight(d+this.labelHeight))}}},a.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==r.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},a.prototype.transform=function(o){var i=this.rect.x;i>t.WORLD_BOUNDARY?i=t.WORLD_BOUNDARY:i<-t.WORLD_BOUNDARY&&(i=-t.WORLD_BOUNDARY);var d=this.rect.y;d>t.WORLD_BOUNDARY?d=t.WORLD_BOUNDARY:d<-t.WORLD_BOUNDARY&&(d=-t.WORLD_BOUNDARY);var s=new h(i,d),c=o.inverseTransformPoint(s);this.setLocation(c.x,c.y)},a.prototype.getLeft=function(){return this.rect.x},a.prototype.getRight=function(){return this.rect.x+this.rect.width},a.prototype.getTop=function(){return this.rect.y},a.prototype.getBottom=function(){return this.rect.y+this.rect.height},a.prototype.getParent=function(){return this.owner==null?null:this.owner.getParent()},C.exports=a}),(function(C,M,N){var f=N(0);function r(){}for(var n in f)r[n]=f[n];r.MAX_ITERATIONS=2500,r.DEFAULT_EDGE_LENGTH=50,r.DEFAULT_SPRING_STRENGTH=.45,r.DEFAULT_REPULSION_STRENGTH=4500,r.DEFAULT_GRAVITY_STRENGTH=.4,r.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,r.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,r.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,r.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,r.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,r.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,r.COOLING_ADAPTATION_FACTOR=.33,r.ADAPTATION_LOWER_NODE_LIMIT=1e3,r.ADAPTATION_UPPER_NODE_LIMIT=5e3,r.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,r.MAX_NODE_DISPLACEMENT=r.MAX_NODE_DISPLACEMENT_INCREMENTAL*3,r.MIN_REPULSION_DIST=r.DEFAULT_EDGE_LENGTH/10,r.CONVERGENCE_CHECK_PERIOD=100,r.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,r.MIN_EDGE_LENGTH=1,r.GRID_CALCULATION_CHECK_PERIOD=10,C.exports=r}),(function(C,M,N){function f(r,n){r==null&&n==null?(this.x=0,this.y=0):(this.x=r,this.y=n)}f.prototype.getX=function(){return this.x},f.prototype.getY=function(){return this.y},f.prototype.setX=function(r){this.x=r},f.prototype.setY=function(r){this.y=r},f.prototype.getDifference=function(r){return new DimensionD(this.x-r.x,this.y-r.y)},f.prototype.getCopy=function(){return new f(this.x,this.y)},f.prototype.translate=function(r){return this.x+=r.width,this.y+=r.height,this},C.exports=f}),(function(C,M,N){var f=N(2),r=N(10),n=N(0),t=N(7),e=N(3),h=N(1),a=N(13),p=N(12),o=N(11);function i(s,c,g){f.call(this,g),this.estimatedSize=r.MIN_VALUE,this.margin=n.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=s,c!=null&&c instanceof t?this.graphManager=c:c!=null&&c instanceof Layout&&(this.graphManager=c.graphManager)}for(var d in i.prototype=Object.create(f.prototype),f)i[d]=f[d];i.prototype.getNodes=function(){return this.nodes},i.prototype.getEdges=function(){return this.edges},i.prototype.getGraphManager=function(){return this.graphManager},i.prototype.getParent=function(){return this.parent},i.prototype.getLeft=function(){return this.left},i.prototype.getRight=function(){return this.right},i.prototype.getTop=function(){return this.top},i.prototype.getBottom=function(){return this.bottom},i.prototype.isConnected=function(){return this.isConnected},i.prototype.add=function(s,c,g){if(c==null&&g==null){var v=s;if(this.graphManager==null)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(v)>-1)throw"Node already in graph!";return v.owner=this,this.getNodes().push(v),v}else{var T=s;if(!(this.getNodes().indexOf(c)>-1&&this.getNodes().indexOf(g)>-1))throw"Source or target not in graph!";if(!(c.owner==g.owner&&c.owner==this))throw"Both owners must be this graph!";return c.owner==g.owner?(T.source=c,T.target=g,T.isInterGraph=!1,this.getEdges().push(T),c.edges.push(T),g!=c&&g.edges.push(T),T):null}},i.prototype.remove=function(s){var c=s;if(s instanceof e){if(c==null)throw"Node is null!";if(!(c.owner!=null&&c.owner==this))throw"Owner graph is invalid!";if(this.graphManager==null)throw"Owner graph manager is invalid!";for(var g=c.edges.slice(),v,T=g.length,L=0;L<T;L++)v=g[L],v.isInterGraph?this.graphManager.remove(v):v.source.owner.remove(v);var R=this.nodes.indexOf(c);if(R==-1)throw"Node not in owner node list!";this.nodes.splice(R,1)}else if(s instanceof h){var v=s;if(v==null)throw"Edge is null!";if(!(v.source!=null&&v.target!=null))throw"Source and/or target is null!";if(!(v.source.owner!=null&&v.target.owner!=null&&v.source.owner==this&&v.target.owner==this))throw"Source and/or target owner is invalid!";var S=v.source.edges.indexOf(v),Y=v.target.edges.indexOf(v);if(!(S>-1&&Y>-1))throw"Source and/or target doesn't know this edge!";v.source.edges.splice(S,1),v.target!=v.source&&v.target.edges.splice(Y,1);var R=v.source.owner.getEdges().indexOf(v);if(R==-1)throw"Not in owner's edge list!";v.source.owner.getEdges().splice(R,1)}},i.prototype.updateLeftTop=function(){for(var s=r.MAX_VALUE,c=r.MAX_VALUE,g,v,T,L=this.getNodes(),R=L.length,S=0;S<R;S++){var Y=L[S];g=Y.getTop(),v=Y.getLeft(),s>g&&(s=g),c>v&&(c=v)}return s==r.MAX_VALUE?null:(T=L[0].getParent().paddingLeft==null?this.margin:L[0].getParent().paddingLeft,this.left=c-T,this.top=s-T,new p(this.left,this.top))},i.prototype.updateBounds=function(s){for(var c=r.MAX_VALUE,g=-r.MAX_VALUE,v=r.MAX_VALUE,T=-r.MAX_VALUE,L,R,S,Y,$,Z=this.nodes,D=Z.length,J=0;J<D;J++){var l=Z[J];s&&l.child!=null&&l.updateBounds(),L=l.getLeft(),R=l.getRight(),S=l.getTop(),Y=l.getBottom(),c>L&&(c=L),g<R&&(g=R),v>S&&(v=S),T<Y&&(T=Y)}var E=new a(c,v,g-c,T-v);c==r.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),$=Z[0].getParent().paddingLeft==null?this.margin:Z[0].getParent().paddingLeft,this.left=E.x-$,this.right=E.x+E.width+$,this.top=E.y-$,this.bottom=E.y+E.height+$},i.calculateBounds=function(s){for(var c=r.MAX_VALUE,g=-r.MAX_VALUE,v=r.MAX_VALUE,T=-r.MAX_VALUE,L,R,S,Y,$=s.length,Z=0;Z<$;Z++){var D=s[Z];L=D.getLeft(),R=D.getRight(),S=D.getTop(),Y=D.getBottom(),c>L&&(c=L),g<R&&(g=R),v>S&&(v=S),T<Y&&(T=Y)}return new a(c,v,g-c,T-v)},i.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},i.prototype.getEstimatedSize=function(){if(this.estimatedSize==r.MIN_VALUE)throw"assert failed";return this.estimatedSize},i.prototype.calcEstimatedSize=function(){for(var s=0,c=this.nodes,g=c.length,v=0;v<g;v++){var T=c[v];s+=T.calcEstimatedSize()}return s==0?this.estimatedSize=n.EMPTY_COMPOUND_NODE_SIZE:this.estimatedSize=s/Math.sqrt(this.nodes.length),this.estimatedSize},i.prototype.updateConnected=function(){var s=this;if(this.nodes.length==0){this.isConnected=!0;return}var c=new o,g=new Set,v=this.nodes[0],T,L;for(v.withChildren().forEach(function($){c.push($),g.add($)});c.length!==0;){v=c.shift(),T=v.getEdges();for(var R=T.length,S=0;S<R;S++)L=T[S].getOtherEndInGraph(v,this),L!=null&&!g.has(L)&&L.withChildren().forEach(function($){c.push($),g.add($)})}if(this.isConnected=!1,g.size>=this.nodes.length){var Y=0;g.forEach(function($){$.owner==s&&Y++}),Y==this.nodes.length&&(this.isConnected=!0)}},C.exports=i}),(function(C,M,N){var f,r=N(1);function n(t){f=N(6),this.layout=t,this.graphs=[],this.edges=[]}n.prototype.addRoot=function(){var t=this.layout.newGraph(),e=this.layout.newNode(null),h=this.add(t,e);return this.setRootGraph(h),this.rootGraph},n.prototype.add=function(t,e,h,a,p){if(h==null&&a==null&&p==null){if(t==null)throw"Graph is null!";if(e==null)throw"Parent node is null!";if(this.graphs.indexOf(t)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(t),t.parent!=null)throw"Already has a parent!";if(e.child!=null)throw"Already has a child!";return t.parent=e,e.child=t,t}else{p=h,a=e,h=t;var o=a.getOwner(),i=p.getOwner();if(!(o!=null&&o.getGraphManager()==this))throw"Source not in this graph mgr!";if(!(i!=null&&i.getGraphManager()==this))throw"Target not in this graph mgr!";if(o==i)return h.isInterGraph=!1,o.add(h,a,p);if(h.isInterGraph=!0,h.source=a,h.target=p,this.edges.indexOf(h)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(h),!(h.source!=null&&h.target!=null))throw"Edge source and/or target is null!";if(!(h.source.edges.indexOf(h)==-1&&h.target.edges.indexOf(h)==-1))throw"Edge already in source and/or target incidency list!";return h.source.edges.push(h),h.target.edges.push(h),h}},n.prototype.remove=function(t){if(t instanceof f){var e=t;if(e.getGraphManager()!=this)throw"Graph not in this graph mgr";if(!(e==this.rootGraph||e.parent!=null&&e.parent.graphManager==this))throw"Invalid parent node!";var h=[];h=h.concat(e.getEdges());for(var a,p=h.length,o=0;o<p;o++)a=h[o],e.remove(a);var i=[];i=i.concat(e.getNodes());var d;p=i.length;for(var o=0;o<p;o++)d=i[o],e.remove(d);e==this.rootGraph&&this.setRootGraph(null);var s=this.graphs.indexOf(e);this.graphs.splice(s,1),e.parent=null}else if(t instanceof r){if(a=t,a==null)throw"Edge is null!";if(!a.isInterGraph)throw"Not an inter-graph edge!";if(!(a.source!=null&&a.target!=null))throw"Source and/or target is null!";if(!(a.source.edges.indexOf(a)!=-1&&a.target.edges.indexOf(a)!=-1))throw"Source and/or target doesn't know this edge!";var s=a.source.edges.indexOf(a);if(a.source.edges.splice(s,1),s=a.target.edges.indexOf(a),a.target.edges.splice(s,1),!(a.source.owner!=null&&a.source.owner.getGraphManager()!=null))throw"Edge owner graph or owner graph manager is null!";if(a.source.owner.getGraphManager().edges.indexOf(a)==-1)throw"Not in owner graph manager's edge list!";var s=a.source.owner.getGraphManager().edges.indexOf(a);a.source.owner.getGraphManager().edges.splice(s,1)}},n.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},n.prototype.getGraphs=function(){return this.graphs},n.prototype.getAllNodes=function(){if(this.allNodes==null){for(var t=[],e=this.getGraphs(),h=e.length,a=0;a<h;a++)t=t.concat(e[a].getNodes());this.allNodes=t}return this.allNodes},n.prototype.resetAllNodes=function(){this.allNodes=null},n.prototype.resetAllEdges=function(){this.allEdges=null},n.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},n.prototype.getAllEdges=function(){if(this.allEdges==null){var t=[],e=this.getGraphs();e.length;for(var h=0;h<e.length;h++)t=t.concat(e[h].getEdges());t=t.concat(this.edges),this.allEdges=t}return this.allEdges},n.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},n.prototype.setAllNodesToApplyGravitation=function(t){if(this.allNodesToApplyGravitation!=null)throw"assert failed";this.allNodesToApplyGravitation=t},n.prototype.getRoot=function(){return this.rootGraph},n.prototype.setRootGraph=function(t){if(t.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=t,t.parent??(t.parent=this.layout.newNode("Root node"))},n.prototype.getLayout=function(){return this.layout},n.prototype.isOneAncestorOfOther=function(t,e){if(!(t!=null&&e!=null))throw"assert failed";if(t==e)return!0;var h=t.getOwner(),a;do{if(a=h.getParent(),a==null)break;if(a==e)return!0;if(h=a.getOwner(),h==null)break}while(!0);h=e.getOwner();do{if(a=h.getParent(),a==null)break;if(a==t)return!0;if(h=a.getOwner(),h==null)break}while(!0);return!1},n.prototype.calcLowestCommonAncestors=function(){for(var t,e,h,a,p,o=this.getAllEdges(),i=o.length,d=0;d<i;d++){if(t=o[d],e=t.source,h=t.target,t.lca=null,t.sourceInLca=e,t.targetInLca=h,e==h){t.lca=e.getOwner();continue}for(a=e.getOwner();t.lca==null;){for(t.targetInLca=h,p=h.getOwner();t.lca==null;){if(p==a){t.lca=p;break}if(p==this.rootGraph)break;if(t.lca!=null)throw"assert failed";t.targetInLca=p.getParent(),p=t.targetInLca.getOwner()}if(a==this.rootGraph)break;t.lca??(t.sourceInLca=a.getParent(),a=t.sourceInLca.getOwner())}if(t.lca==null)throw"assert failed"}},n.prototype.calcLowestCommonAncestor=function(t,e){if(t==e)return t.getOwner();var h=t.getOwner();do{if(h==null)break;var a=e.getOwner();do{if(a==null)break;if(a==h)return a;a=a.getParent().getOwner()}while(!0);h=h.getParent().getOwner()}while(!0);return h},n.prototype.calcInclusionTreeDepths=function(t,e){t==null&&e==null&&(t=this.rootGraph,e=1);for(var h,a=t.getNodes(),p=a.length,o=0;o<p;o++)h=a[o],h.inclusionTreeDepth=e,h.child!=null&&this.calcInclusionTreeDepths(h.child,e+1)},n.prototype.includesInvalidEdge=function(){for(var t,e=[],h=this.edges.length,a=0;a<h;a++)t=this.edges[a],this.isOneAncestorOfOther(t.source,t.target)&&e.push(t);for(var a=0;a<e.length;a++)this.remove(e[a]);return!1},C.exports=n}),(function(C,M,N){var f=N(12);function r(){}r.calcSeparationAmount=function(n,t,e,h){if(!n.intersects(t))throw"assert failed";var a=[,,];this.decideDirectionsForOverlappingNodes(n,t,a),e[0]=Math.min(n.getRight(),t.getRight())-Math.max(n.x,t.x),e[1]=Math.min(n.getBottom(),t.getBottom())-Math.max(n.y,t.y),n.getX()<=t.getX()&&n.getRight()>=t.getRight()?e[0]+=Math.min(t.getX()-n.getX(),n.getRight()-t.getRight()):t.getX()<=n.getX()&&t.getRight()>=n.getRight()&&(e[0]+=Math.min(n.getX()-t.getX(),t.getRight()-n.getRight())),n.getY()<=t.getY()&&n.getBottom()>=t.getBottom()?e[1]+=Math.min(t.getY()-n.getY(),n.getBottom()-t.getBottom()):t.getY()<=n.getY()&&t.getBottom()>=n.getBottom()&&(e[1]+=Math.min(n.getY()-t.getY(),t.getBottom()-n.getBottom()));var p=Math.abs((t.getCenterY()-n.getCenterY())/(t.getCenterX()-n.getCenterX()));t.getCenterY()===n.getCenterY()&&t.getCenterX()===n.getCenterX()&&(p=1);var o=p*e[0],i=e[1]/p;e[0]<i?i=e[0]:o=e[1],e[0]=-1*a[0]*(i/2+h),e[1]=-1*a[1]*(o/2+h)},r.decideDirectionsForOverlappingNodes=function(n,t,e){n.getCenterX()<t.getCenterX()?e[0]=-1:e[0]=1,n.getCenterY()<t.getCenterY()?e[1]=-1:e[1]=1},r.getIntersection2=function(n,t,e){var h=n.getCenterX(),a=n.getCenterY(),p=t.getCenterX(),o=t.getCenterY();if(n.intersects(t))return e[0]=h,e[1]=a,e[2]=p,e[3]=o,!0;var i=n.getX(),d=n.getY(),s=n.getRight(),c=n.getX(),g=n.getBottom(),v=n.getRight(),T=n.getWidthHalf(),L=n.getHeightHalf(),R=t.getX(),S=t.getY(),Y=t.getRight(),$=t.getX(),Z=t.getBottom(),D=t.getRight(),J=t.getWidthHalf(),l=t.getHeightHalf(),E=!1,u=!1;if(h===p){if(a>o)return e[0]=h,e[1]=d,e[2]=p,e[3]=Z,!1;if(a<o)return e[0]=h,e[1]=g,e[2]=p,e[3]=S,!1}else if(a===o){if(h>p)return e[0]=i,e[1]=a,e[2]=Y,e[3]=o,!1;if(h<p)return e[0]=s,e[1]=a,e[2]=R,e[3]=o,!1}else{var y=n.height/n.width,m=t.height/t.width,A=(o-a)/(p-h),w=void 0,b=void 0,G=void 0,F=void 0,k=void 0,V=void 0;if(-y===A?h>p?(e[0]=c,e[1]=g,E=!0):(e[0]=s,e[1]=d,E=!0):y===A&&(h>p?(e[0]=i,e[1]=d,E=!0):(e[0]=v,e[1]=g,E=!0)),-m===A?p>h?(e[2]=$,e[3]=Z,u=!0):(e[2]=Y,e[3]=S,u=!0):m===A&&(p>h?(e[2]=R,e[3]=S,u=!0):(e[2]=D,e[3]=Z,u=!0)),E&&u)return!1;if(h>p?a>o?(w=this.getCardinalDirection(y,A,4),b=this.getCardinalDirection(m,A,2)):(w=this.getCardinalDirection(-y,A,3),b=this.getCardinalDirection(-m,A,1)):a>o?(w=this.getCardinalDirection(-y,A,1),b=this.getCardinalDirection(-m,A,3)):(w=this.getCardinalDirection(y,A,2),b=this.getCardinalDirection(m,A,4)),!E)switch(w){case 1:F=d,G=h+-L/A,e[0]=G,e[1]=F;break;case 2:G=v,F=a+T*A,e[0]=G,e[1]=F;break;case 3:F=g,G=h+L/A,e[0]=G,e[1]=F;break;case 4:G=c,F=a+-T*A,e[0]=G,e[1]=F;break}if(!u)switch(b){case 1:V=S,k=p+-l/A,e[2]=k,e[3]=V;break;case 2:k=D,V=o+J*A,e[2]=k,e[3]=V;break;case 3:V=Z,k=p+l/A,e[2]=k,e[3]=V;break;case 4:k=$,V=o+-J*A,e[2]=k,e[3]=V;break}}return!1},r.getCardinalDirection=function(n,t,e){return n>t?e:1+e%4},r.getIntersection=function(n,t,e,h){if(h==null)return this.getIntersection2(n,t,e);var a=n.x,p=n.y,o=t.x,i=t.y,d=e.x,s=e.y,c=h.x,g=h.y,v=void 0,T=void 0,L=void 0,R=void 0,S=void 0,Y=void 0,$=void 0,Z=void 0,D=void 0;return L=i-p,S=a-o,$=o*p-a*i,R=g-s,Y=d-c,Z=c*s-d*g,D=L*Y-R*S,D===0?null:(v=(S*Z-Y*$)/D,T=(R*$-L*Z)/D,new f(v,T))},r.angleOfVector=function(n,t,e,h){var a=void 0;return n===e?a=h<t?this.ONE_AND_HALF_PI:this.HALF_PI:(a=Math.atan((h-t)/(e-n)),e<n?a+=Math.PI:h<t&&(a+=this.TWO_PI)),a},r.doIntersect=function(n,t,e,h){var a=n.x,p=n.y,o=t.x,i=t.y,d=e.x,s=e.y,c=h.x,g=h.y,v=(o-a)*(g-s)-(c-d)*(i-p);if(v===0)return!1;var T=((g-s)*(c-a)+(d-c)*(g-p))/v,L=((p-i)*(c-a)+(o-a)*(g-p))/v;return 0<T&&T<1&&0<L&&L<1},r.findCircleLineIntersections=function(n,t,e,h,a,p,o){var i=(e-n)*(e-n)+(h-t)*(h-t),d=2*((n-a)*(e-n)+(t-p)*(h-t)),s=(n-a)*(n-a)+(t-p)*(t-p)-o*o;if(d*d-4*i*s>=0){var c=(-d+Math.sqrt(d*d-4*i*s))/(2*i),g=(-d-Math.sqrt(d*d-4*i*s))/(2*i);return c>=0&&c<=1?[c]:g>=0&&g<=1?[g]:null}else return null},r.HALF_PI=.5*Math.PI,r.ONE_AND_HALF_PI=1.5*Math.PI,r.TWO_PI=2*Math.PI,r.THREE_PI=3*Math.PI,C.exports=r}),(function(C,M,N){function f(){}f.sign=function(r){return r>0?1:r<0?-1:0},f.floor=function(r){return r<0?Math.ceil(r):Math.floor(r)},f.ceil=function(r){return r<0?Math.floor(r):Math.ceil(r)},C.exports=f}),(function(C,M,N){function f(){}f.MAX_VALUE=2147483647,f.MIN_VALUE=-2147483648,C.exports=f}),(function(C,M,N){var f=(function(){function h(a,p){for(var o=0;o<p.length;o++){var i=p[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}}return function(a,p,o){return p&&h(a.prototype,p),o&&h(a,o),a}})();function r(h,a){if(!(h instanceof a))throw TypeError("Cannot call a class as a function")}var n=function(h){return{value:h,next:null,prev:null}},t=function(h,a,p,o){return h===null?o.head=a:h.next=a,p===null?o.tail=a:p.prev=a,a.prev=h,a.next=p,o.length++,a},e=function(h,a){var p=h.prev,o=h.next;return p===null?a.head=o:p.next=o,o===null?a.tail=p:o.prev=p,h.prev=h.next=null,a.length--,h};C.exports=(function(){function h(a){var p=this;r(this,h),this.length=0,this.head=null,this.tail=null,a==null||a.forEach(function(o){return p.push(o)})}return f(h,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(a,p){return t(p.prev,n(a),p,this)}},{key:"insertAfter",value:function(a,p){return t(p,n(a),p.next,this)}},{key:"insertNodeBefore",value:function(a,p){return t(p.prev,a,p,this)}},{key:"insertNodeAfter",value:function(a,p){return t(p,a,p.next,this)}},{key:"push",value:function(a){return t(this.tail,n(a),null,this)}},{key:"unshift",value:function(a){return t(null,n(a),this.head,this)}},{key:"remove",value:function(a){return e(a,this)}},{key:"pop",value:function(){return e(this.tail,this).value}},{key:"popNode",value:function(){return e(this.tail,this)}},{key:"shift",value:function(){return e(this.head,this).value}},{key:"shiftNode",value:function(){return e(this.head,this)}},{key:"get_object_at",value:function(a){if(a<=this.length()){for(var p=1,o=this.head;p<a;)o=o.next,p++;return o.value}}},{key:"set_object_at",value:function(a,p){if(a<=this.length()){for(var o=1,i=this.head;o<a;)i=i.next,o++;i.value=p}}}]),h})()}),(function(C,M,N){function f(r,n,t){this.x=null,this.y=null,r==null&&n==null&&t==null?(this.x=0,this.y=0):typeof r=="number"&&typeof n=="number"&&t==null?(this.x=r,this.y=n):r.constructor.name=="Point"&&n==null&&t==null&&(t=r,this.x=t.x,this.y=t.y)}f.prototype.getX=function(){return this.x},f.prototype.getY=function(){return this.y},f.prototype.getLocation=function(){return new f(this.x,this.y)},f.prototype.setLocation=function(r,n,t){r.constructor.name=="Point"&&n==null&&t==null?(t=r,this.setLocation(t.x,t.y)):typeof r=="number"&&typeof n=="number"&&t==null&&(parseInt(r)==r&&parseInt(n)==n?this.move(r,n):(this.x=Math.floor(r+.5),this.y=Math.floor(n+.5)))},f.prototype.move=function(r,n){this.x=r,this.y=n},f.prototype.translate=function(r,n){this.x+=r,this.y+=n},f.prototype.equals=function(r){if(r.constructor.name=="Point"){var n=r;return this.x==n.x&&this.y==n.y}return this==r},f.prototype.toString=function(){return new f().constructor.name+"[x="+this.x+",y="+this.y+"]"},C.exports=f}),(function(C,M,N){function f(r,n,t,e){this.x=0,this.y=0,this.width=0,this.height=0,r!=null&&n!=null&&t!=null&&e!=null&&(this.x=r,this.y=n,this.width=t,this.height=e)}f.prototype.getX=function(){return this.x},f.prototype.setX=function(r){this.x=r},f.prototype.getY=function(){return this.y},f.prototype.setY=function(r){this.y=r},f.prototype.getWidth=function(){return this.width},f.prototype.setWidth=function(r){this.width=r},f.prototype.getHeight=function(){return this.height},f.prototype.setHeight=function(r){this.height=r},f.prototype.getRight=function(){return this.x+this.width},f.prototype.getBottom=function(){return this.y+this.height},f.prototype.intersects=function(r){return!(this.getRight()<r.x||this.getBottom()<r.y||r.getRight()<this.x||r.getBottom()<this.y)},f.prototype.getCenterX=function(){return this.x+this.width/2},f.prototype.getMinX=function(){return this.getX()},f.prototype.getMaxX=function(){return this.getX()+this.width},f.prototype.getCenterY=function(){return this.y+this.height/2},f.prototype.getMinY=function(){return this.getY()},f.prototype.getMaxY=function(){return this.getY()+this.height},f.prototype.getWidthHalf=function(){return this.width/2},f.prototype.getHeightHalf=function(){return this.height/2},C.exports=f}),(function(C,M,N){var f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};function r(){}r.lastID=0,r.createID=function(n){return r.isPrimitive(n)?n:(n.uniqueID==null&&(n.uniqueID=r.getString(),r.lastID++),n.uniqueID)},r.getString=function(n){return n??(n=r.lastID),"Object#"+n},r.isPrimitive=function(n){var t=n===void 0?"undefined":f(n);return n==null||t!="object"&&t!="function"},C.exports=r}),(function(C,M,N){function f(d){if(Array.isArray(d)){for(var s=0,c=Array(d.length);s<d.length;s++)c[s]=d[s];return c}else return Array.from(d)}var r=N(0),n=N(7),t=N(3),e=N(1),h=N(6),a=N(5),p=N(17),o=N(29);function i(d){o.call(this),this.layoutQuality=r.QUALITY,this.createBendsAsNeeded=r.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=r.DEFAULT_INCREMENTAL,this.animationOnLayout=r.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=r.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=r.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=r.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new n(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,d!=null&&(this.isRemoteUse=d)}i.RANDOM_SEED=1,i.prototype=Object.create(o.prototype),i.prototype.getGraphManager=function(){return this.graphManager},i.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},i.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},i.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},i.prototype.newGraphManager=function(){var d=new n(this);return this.graphManager=d,d},i.prototype.newGraph=function(d){return new h(null,this.graphManager,d)},i.prototype.newNode=function(d){return new t(this.graphManager,d)},i.prototype.newEdge=function(d){return new e(null,null,d)},i.prototype.checkLayoutSuccess=function(){return this.graphManager.getRoot()==null||this.graphManager.getRoot().getNodes().length==0||this.graphManager.includesInvalidEdge()},i.prototype.runLayout=function(){this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters();var d=this.checkLayoutSuccess()?!1:this.layout();return r.ANIMATE==="during"?!1:(d&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,d)},i.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},i.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var d=this.graphManager.getAllEdges(),s=0;s<d.length;s++)d[s];for(var c=this.graphManager.getRoot().getNodes(),s=0;s<c.length;s++)c[s];this.update(this.graphManager.getRoot())}},i.prototype.update=function(d){if(d==null)this.update2();else if(d instanceof t){var s=d;if(s.getChild()!=null)for(var c=s.getChild().getNodes(),g=0;g<c.length;g++)update(c[g]);s.vGraphObject!=null&&s.vGraphObject.update(s)}else if(d instanceof e){var v=d;v.vGraphObject!=null&&v.vGraphObject.update(v)}else if(d instanceof h){var T=d;T.vGraphObject!=null&&T.vGraphObject.update(T)}},i.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=r.QUALITY,this.animationDuringLayout=r.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=r.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=r.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=r.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=r.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=r.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},i.prototype.transform=function(d){if(d==null)this.transform(new a(0,0));else{var s=new p,c=this.graphManager.getRoot().updateLeftTop();if(c!=null){s.setWorldOrgX(d.x),s.setWorldOrgY(d.y),s.setDeviceOrgX(c.x),s.setDeviceOrgY(c.y);for(var g=this.getAllNodes(),v,T=0;T<g.length;T++)v=g[T],v.transform(s)}}},i.prototype.positionNodesRandomly=function(d){if(d==null)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var s,c,g=d.getNodes(),v=0;v<g.length;v++)s=g[v],c=s.getChild(),c==null||c.getNodes().length==0?s.scatter():(this.positionNodesRandomly(c),s.updateBounds())},i.prototype.getFlatForest=function(){for(var d=[],s=!0,c=this.graphManager.getRoot().getNodes(),g=!0,v=0;v<c.length;v++)c[v].getChild()!=null&&(g=!1);if(!g)return d;var T=new Set,L=[],R=new Map,S=[];for(S=S.concat(c);S.length>0&&s;){for(L.push(S[0]);L.length>0&&s;){var Y=L[0];L.splice(0,1),T.add(Y);for(var $=Y.getEdges(),v=0;v<$.length;v++){var Z=$[v].getOtherEnd(Y);if(R.get(Y)!=Z)if(!T.has(Z))L.push(Z),R.set(Z,Y);else{s=!1;break}}}if(!s)d=[];else{var D=[].concat(f(T));d.push(D);for(var v=0;v<D.length;v++){var J=D[v],l=S.indexOf(J);l>-1&&S.splice(l,1)}T=new Set,R=new Map}}return d},i.prototype.createDummyNodesForBendpoints=function(d){for(var s=[],c=d.source,g=this.graphManager.calcLowestCommonAncestor(d.source,d.target),v=0;v<d.bendpoints.length;v++){var T=this.newNode(null);T.setRect(new Point(0,0),new Dimension(1,1)),g.add(T);var L=this.newEdge(null);this.graphManager.add(L,c,T),s.add(T),c=T}var L=this.newEdge(null);return this.graphManager.add(L,c,d.target),this.edgeToDummyNodes.set(d,s),d.isInterGraph()?this.graphManager.remove(d):g.remove(d),s},i.prototype.createBendpointsFromDummyNodes=function(){var d=[];d=d.concat(this.graphManager.getAllEdges()),d=[].concat(f(this.edgeToDummyNodes.keys()),d);for(var s=0;s<d.length;s++){var c=d[s];if(c.bendpoints.length>0){for(var g=this.edgeToDummyNodes.get(c),v=0;v<g.length;v++){var T=g[v],L=new a(T.getCenterX(),T.getCenterY()),R=c.bendpoints.get(v);R.x=L.x,R.y=L.y,T.getOwner().remove(T)}this.graphManager.add(c,c.source,c.target)}}},i.transform=function(d,s,c,g){if(c!=null&&g!=null){var v=s;if(d<=50){var T=s/c;v-=(s-T)/50*(50-d)}else{var L=s*g;v+=(L-s)/50*(d-50)}return v}else{var R,S;return d<=50?(R=9*s/500,S=s/10):(R=9*s/50,S=-8*s),R*d+S}},i.findCenterOfTree=function(d){var s=[];s=s.concat(d);var c=[],g=new Map,v=!1,T=null;(s.length==1||s.length==2)&&(v=!0,T=s[0]);for(var L=0;L<s.length;L++){var R=s[L],S=R.getNeighborsList().size;g.set(R,R.getNeighborsList().size),S==1&&c.push(R)}var Y=[];for(Y=Y.concat(c);!v;){var $=[];$=$.concat(Y),Y=[];for(var L=0;L<s.length;L++){var R=s[L],Z=s.indexOf(R);Z>=0&&s.splice(Z,1),R.getNeighborsList().forEach(function(l){if(c.indexOf(l)<0){var E=g.get(l)-1;E==1&&Y.push(l),g.set(l,E)}})}c=c.concat(Y),(s.length==1||s.length==2)&&(v=!0,T=s[0])}return T},i.prototype.setGraphManager=function(d){this.graphManager=d},C.exports=i}),(function(C,M,N){function f(){}f.seed=1,f.x=0,f.nextDouble=function(){return f.x=Math.sin(f.seed++)*1e4,f.x-Math.floor(f.x)},C.exports=f}),(function(C,M,N){var f=N(5);function r(n,t){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}r.prototype.getWorldOrgX=function(){return this.lworldOrgX},r.prototype.setWorldOrgX=function(n){this.lworldOrgX=n},r.prototype.getWorldOrgY=function(){return this.lworldOrgY},r.prototype.setWorldOrgY=function(n){this.lworldOrgY=n},r.prototype.getWorldExtX=function(){return this.lworldExtX},r.prototype.setWorldExtX=function(n){this.lworldExtX=n},r.prototype.getWorldExtY=function(){return this.lworldExtY},r.prototype.setWorldExtY=function(n){this.lworldExtY=n},r.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},r.prototype.setDeviceOrgX=function(n){this.ldeviceOrgX=n},r.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},r.prototype.setDeviceOrgY=function(n){this.ldeviceOrgY=n},r.prototype.getDeviceExtX=function(){return this.ldeviceExtX},r.prototype.setDeviceExtX=function(n){this.ldeviceExtX=n},r.prototype.getDeviceExtY=function(){return this.ldeviceExtY},r.prototype.setDeviceExtY=function(n){this.ldeviceExtY=n},r.prototype.transformX=function(n){var t=0,e=this.lworldExtX;return e!=0&&(t=this.ldeviceOrgX+(n-this.lworldOrgX)*this.ldeviceExtX/e),t},r.prototype.transformY=function(n){var t=0,e=this.lworldExtY;return e!=0&&(t=this.ldeviceOrgY+(n-this.lworldOrgY)*this.ldeviceExtY/e),t},r.prototype.inverseTransformX=function(n){var t=0,e=this.ldeviceExtX;return e!=0&&(t=this.lworldOrgX+(n-this.ldeviceOrgX)*this.lworldExtX/e),t},r.prototype.inverseTransformY=function(n){var t=0,e=this.ldeviceExtY;return e!=0&&(t=this.lworldOrgY+(n-this.ldeviceOrgY)*this.lworldExtY/e),t},r.prototype.inverseTransformPoint=function(n){return new f(this.inverseTransformX(n.x),this.inverseTransformY(n.y))},C.exports=r}),(function(C,M,N){function f(o){if(Array.isArray(o)){for(var i=0,d=Array(o.length);i<o.length;i++)d[i]=o[i];return d}else return Array.from(o)}var r=N(15),n=N(4),t=N(0),e=N(8),h=N(9);function a(){r.call(this),this.useSmartIdealEdgeLengthCalculation=n.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=n.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=n.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=n.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=n.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*n.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=n.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=n.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=n.MAX_ITERATIONS}for(var p in a.prototype=Object.create(r.prototype),r)a[p]=r[p];a.prototype.initParameters=function(){r.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=n.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},a.prototype.calcIdealEdgeLengths=function(){for(var o,i,d,s,c,g,v,T=this.getGraphManager().getAllEdges(),L=0;L<T.length;L++)o=T[L],i=o.idealLength,o.isInterGraph&&(s=o.getSource(),c=o.getTarget(),g=o.getSourceInLca().getEstimatedSize(),v=o.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(o.idealLength+=g+v-2*t.SIMPLE_NODE_SIZE),d=o.getLca().getInclusionTreeDepth(),o.idealLength+=i*n.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(s.getInclusionTreeDepth()+c.getInclusionTreeDepth()-2*d))},a.prototype.initSpringEmbedder=function(){var o=this.getAllNodes().length;this.incremental?(o>n.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*n.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(o-n.ADAPTATION_LOWER_NODE_LIMIT)/(n.ADAPTATION_UPPER_NODE_LIMIT-n.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-n.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=n.MAX_NODE_DISPLACEMENT_INCREMENTAL):(o>n.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(n.COOLING_ADAPTATION_FACTOR,1-(o-n.ADAPTATION_LOWER_NODE_LIMIT)/(n.ADAPTATION_UPPER_NODE_LIMIT-n.ADAPTATION_LOWER_NODE_LIMIT)*(1-n.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=n.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(this.getAllNodes().length*5,this.maxIterations),this.displacementThresholdPerNode=3*n.DEFAULT_EDGE_LENGTH/100,this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},a.prototype.calcSpringForces=function(){for(var o=this.getAllEdges(),i,d=0;d<o.length;d++)i=o[d],this.calcSpringForce(i,i.idealLength)},a.prototype.calcRepulsionForces=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,d,s,c,g,v=this.getAllNodes(),T;if(this.useFRGridVariant)for(this.totalIterations%n.GRID_CALCULATION_CHECK_PERIOD==1&&o&&this.updateGrid(),T=new Set,d=0;d<v.length;d++)c=v[d],this.calculateRepulsionForceOfANode(c,T,o,i),T.add(c);else for(d=0;d<v.length;d++)for(c=v[d],s=d+1;s<v.length;s++)g=v[s],c.getOwner()==g.getOwner()&&this.calcRepulsionForce(c,g)},a.prototype.calcGravitationalForces=function(){for(var o,i=this.getAllNodesToApplyGravitation(),d=0;d<i.length;d++)o=i[d],this.calcGravitationalForce(o)},a.prototype.moveNodes=function(){for(var o=this.getAllNodes(),i,d=0;d<o.length;d++)i=o[d],i.move()},a.prototype.calcSpringForce=function(o,i){var d=o.getSource(),s=o.getTarget(),c,g,v,T;if(this.uniformLeafNodeSizes&&d.getChild()==null&&s.getChild()==null)o.updateLengthSimple();else if(o.updateLength(),o.isOverlapingSourceAndTarget)return;c=o.getLength(),c!=0&&(g=o.edgeElasticity*(c-i),v=g*(o.lengthX/c),T=g*(o.lengthY/c),d.springForceX+=v,d.springForceY+=T,s.springForceX-=v,s.springForceY-=T)},a.prototype.calcRepulsionForce=function(o,i){var d=o.getRect(),s=i.getRect(),c=[,,],g=[,,,,],v,T,L,R,S,Y,$;if(d.intersects(s)){e.calcSeparationAmount(d,s,c,n.DEFAULT_EDGE_LENGTH/2),Y=2*c[0],$=2*c[1];var Z=o.noOfChildren*i.noOfChildren/(o.noOfChildren+i.noOfChildren);o.repulsionForceX-=Z*Y,o.repulsionForceY-=Z*$,i.repulsionForceX+=Z*Y,i.repulsionForceY+=Z*$}else this.uniformLeafNodeSizes&&o.getChild()==null&&i.getChild()==null?(v=s.getCenterX()-d.getCenterX(),T=s.getCenterY()-d.getCenterY()):(e.getIntersection(d,s,g),v=g[2]-g[0],T=g[3]-g[1]),Math.abs(v)<n.MIN_REPULSION_DIST&&(v=h.sign(v)*n.MIN_REPULSION_DIST),Math.abs(T)<n.MIN_REPULSION_DIST&&(T=h.sign(T)*n.MIN_REPULSION_DIST),L=v*v+T*T,R=Math.sqrt(L),S=(o.nodeRepulsion/2+i.nodeRepulsion/2)*o.noOfChildren*i.noOfChildren/L,Y=S*v/R,$=S*T/R,o.repulsionForceX-=Y,o.repulsionForceY-=$,i.repulsionForceX+=Y,i.repulsionForceY+=$},a.prototype.calcGravitationalForce=function(o){var i=o.getOwner(),d=(i.getRight()+i.getLeft())/2,s=(i.getTop()+i.getBottom())/2,c=o.getCenterX()-d,g=o.getCenterY()-s,v=Math.abs(c)+o.getWidth()/2,T=Math.abs(g)+o.getHeight()/2,L;o.getOwner()==this.graphManager.getRoot()?(L=i.getEstimatedSize()*this.gravityRangeFactor,(v>L||T>L)&&(o.gravitationForceX=-this.gravityConstant*c,o.gravitationForceY=-this.gravityConstant*g)):(L=i.getEstimatedSize()*this.compoundGravityRangeFactor,(v>L||T>L)&&(o.gravitationForceX=-this.gravityConstant*c*this.compoundGravityConstant,o.gravitationForceY=-this.gravityConstant*g*this.compoundGravityConstant))},a.prototype.isConverged=function(){var o,i=!1;return this.totalIterations>this.maxIterations/3&&(i=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),o=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,o||i},a.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},a.prototype.calcNoOfChildrenForAllNodes=function(){for(var o,i=this.graphManager.getAllNodes(),d=0;d<i.length;d++)o=i[d],o.noOfChildren=o.getNoOfChildren()},a.prototype.calcGrid=function(o){var i=0,d=0;i=parseInt(Math.ceil((o.getRight()-o.getLeft())/this.repulsionRange)),d=parseInt(Math.ceil((o.getBottom()-o.getTop())/this.repulsionRange));for(var s=Array(i),c=0;c<i;c++)s[c]=Array(d);for(var c=0;c<i;c++)for(var g=0;g<d;g++)s[c][g]=[];return s},a.prototype.addNodeToGrid=function(o,i,d){var s=0,c=0,g=0,v=0;s=parseInt(Math.floor((o.getRect().x-i)/this.repulsionRange)),c=parseInt(Math.floor((o.getRect().width+o.getRect().x-i)/this.repulsionRange)),g=parseInt(Math.floor((o.getRect().y-d)/this.repulsionRange)),v=parseInt(Math.floor((o.getRect().height+o.getRect().y-d)/this.repulsionRange));for(var T=s;T<=c;T++)for(var L=g;L<=v;L++)this.grid[T][L].push(o),o.setGridCoordinates(s,c,g,v)},a.prototype.updateGrid=function(){var o,i,d=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),o=0;o<d.length;o++)i=d[o],this.addNodeToGrid(i,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},a.prototype.calculateRepulsionForceOfANode=function(o,i,d,s){if(this.totalIterations%n.GRID_CALCULATION_CHECK_PERIOD==1&&d||s){var c=new Set;o.surrounding=[];for(var g,v=this.grid,T=o.startX-1;T<o.finishX+2;T++)for(var L=o.startY-1;L<o.finishY+2;L++)if(!(T<0||L<0||T>=v.length||L>=v[0].length)){for(var R=0;R<v[T][L].length;R++)if(g=v[T][L][R],!(o.getOwner()!=g.getOwner()||o==g)&&!i.has(g)&&!c.has(g)){var S=Math.abs(o.getCenterX()-g.getCenterX())-(o.getWidth()/2+g.getWidth()/2),Y=Math.abs(o.getCenterY()-g.getCenterY())-(o.getHeight()/2+g.getHeight()/2);S<=this.repulsionRange&&Y<=this.repulsionRange&&c.add(g)}}o.surrounding=[].concat(f(c))}for(T=0;T<o.surrounding.length;T++)this.calcRepulsionForce(o,o.surrounding[T])},a.prototype.calcRepulsionRange=function(){return 0},C.exports=a}),(function(C,M,N){var f=N(1),r=N(4);function n(e,h,a){f.call(this,e,h,a),this.idealLength=r.DEFAULT_EDGE_LENGTH,this.edgeElasticity=r.DEFAULT_SPRING_STRENGTH}for(var t in n.prototype=Object.create(f.prototype),f)n[t]=f[t];C.exports=n}),(function(C,M,N){var f=N(3),r=N(4);function n(e,h,a,p){f.call(this,e,h,a,p),this.nodeRepulsion=r.DEFAULT_REPULSION_STRENGTH,this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}for(var t in n.prototype=Object.create(f.prototype),f)n[t]=f[t];n.prototype.setGridCoordinates=function(e,h,a,p){this.startX=e,this.finishX=h,this.startY=a,this.finishY=p},C.exports=n}),(function(C,M,N){function f(r,n){this.width=0,this.height=0,r!==null&&n!==null&&(this.height=n,this.width=r)}f.prototype.getWidth=function(){return this.width},f.prototype.setWidth=function(r){this.width=r},f.prototype.getHeight=function(){return this.height},f.prototype.setHeight=function(r){this.height=r},C.exports=f}),(function(C,M,N){var f=N(14);function r(){this.map={},this.keys=[]}r.prototype.put=function(n,t){var e=f.createID(n);this.contains(e)||(this.map[e]=t,this.keys.push(n))},r.prototype.contains=function(n){return f.createID(n),this.map[n]!=null},r.prototype.get=function(n){var t=f.createID(n);return this.map[t]},r.prototype.keySet=function(){return this.keys},C.exports=r}),(function(C,M,N){var f=N(14);function r(){this.set={}}r.prototype.add=function(n){var t=f.createID(n);this.contains(t)||(this.set[t]=n)},r.prototype.remove=function(n){delete this.set[f.createID(n)]},r.prototype.clear=function(){this.set={}},r.prototype.contains=function(n){return this.set[f.createID(n)]==n},r.prototype.isEmpty=function(){return this.size()===0},r.prototype.size=function(){return Object.keys(this.set).length},r.prototype.addAllTo=function(n){for(var t=Object.keys(this.set),e=t.length,h=0;h<e;h++)n.push(this.set[t[h]])},r.prototype.size=function(){return Object.keys(this.set).length},r.prototype.addAll=function(n){for(var t=n.length,e=0;e<t;e++){var h=n[e];this.add(h)}},C.exports=r}),(function(C,M,N){function f(){}f.multMat=function(r,n){for(var t=[],e=0;e<r.length;e++){t[e]=[];for(var h=0;h<n[0].length;h++){t[e][h]=0;for(var a=0;a<r[0].length;a++)t[e][h]+=r[e][a]*n[a][h]}}return t},f.transpose=function(r){for(var n=[],t=0;t<r[0].length;t++){n[t]=[];for(var e=0;e<r.length;e++)n[t][e]=r[e][t]}return n},f.multCons=function(r,n){for(var t=[],e=0;e<r.length;e++)t[e]=r[e]*n;return t},f.minusOp=function(r,n){for(var t=[],e=0;e<r.length;e++)t[e]=r[e]-n[e];return t},f.dotProduct=function(r,n){for(var t=0,e=0;e<r.length;e++)t+=r[e]*n[e];return t},f.mag=function(r){return Math.sqrt(this.dotProduct(r,r))},f.normalize=function(r){for(var n=[],t=this.mag(r),e=0;e<r.length;e++)n[e]=r[e]/t;return n},f.multGamma=function(r){for(var n=[],t=0,e=0;e<r.length;e++)t+=r[e];t*=-1/r.length;for(var h=0;h<r.length;h++)n[h]=t+r[h];return n},f.multL=function(r,n,t){for(var e=[],h=[],a=[],p=0;p<n[0].length;p++){for(var o=0,i=0;i<n.length;i++)o+=-.5*n[i][p]*r[i];h[p]=o}for(var d=0;d<t.length;d++){for(var s=0,c=0;c<t.length;c++)s+=t[d][c]*h[c];a[d]=s}for(var g=0;g<n.length;g++){for(var v=0,T=0;T<n[0].length;T++)v+=n[g][T]*a[T];e[g]=v}return e},C.exports=f}),(function(C,M,N){var f=(function(){function t(e,h){for(var a=0;a<h.length;a++){var p=h[a];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(e,p.key,p)}}return function(e,h,a){return h&&t(e.prototype,h),a&&t(e,a),e}})();function r(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}var n=N(11);C.exports=(function(){function t(e,h){r(this,t),(h!==null||h!==void 0)&&(this.compareFunction=this._defaultCompareFunction);var a=void 0;a=e instanceof n?e.size():e.length,this._quicksort(e,0,a-1)}return f(t,[{key:"_quicksort",value:function(e,h,a){if(h<a){var p=this._partition(e,h,a);this._quicksort(e,h,p),this._quicksort(e,p+1,a)}}},{key:"_partition",value:function(e,h,a){for(var p=this._get(e,h),o=h,i=a;;){for(;this.compareFunction(p,this._get(e,i));)i--;for(;this.compareFunction(this._get(e,o),p);)o++;if(o<i)this._swap(e,o,i),o++,i--;else return i}}},{key:"_get",value:function(e,h){return e instanceof n?e.get_object_at(h):e[h]}},{key:"_set",value:function(e,h,a){e instanceof n?e.set_object_at(h,a):e[h]=a}},{key:"_swap",value:function(e,h,a){var p=this._get(e,h);this._set(e,h,this._get(e,a)),this._set(e,a,p)}},{key:"_defaultCompareFunction",value:function(e,h){return h>e}}]),t})()}),(function(C,M,N){function f(){}f.svd=function(r){this.U=null,this.V=null,this.s=null,this.m=0,this.n=0,this.m=r.length,this.n=r[0].length;var n=Math.min(this.m,this.n);this.s=(function(Tt){for(var Nt=[];Tt-- >0;)Nt.push(0);return Nt})(Math.min(this.m+1,this.n)),this.U=(function(Tt){return(function Nt(Mt){if(Mt.length==0)return 0;for(var Pt=[],Xt=0;Xt<Mt[0];Xt++)Pt.push(Nt(Mt.slice(1)));return Pt})(Tt)})([this.m,n]),this.V=(function(Tt){return(function Nt(Mt){if(Mt.length==0)return 0;for(var Pt=[],Xt=0;Xt<Mt[0];Xt++)Pt.push(Nt(Mt.slice(1)));return Pt})(Tt)})([this.n,this.n]);for(var t=(function(Tt){for(var Nt=[];Tt-- >0;)Nt.push(0);return Nt})(this.n),e=(function(Tt){for(var Nt=[];Tt-- >0;)Nt.push(0);return Nt})(this.m),h=!0,a=!0,p=Math.min(this.m-1,this.n),o=Math.max(0,Math.min(this.n-2,this.m)),i=0;i<Math.max(p,o);i++){if(i<p){this.s[i]=0;for(var d=i;d<this.m;d++)this.s[i]=f.hypot(this.s[i],r[d][i]);if(this.s[i]!==0){r[i][i]<0&&(this.s[i]=-this.s[i]);for(var s=i;s<this.m;s++)r[s][i]/=this.s[i];r[i][i]+=1}this.s[i]=-this.s[i]}for(var c=i+1;c<this.n;c++){if((function(Tt,Nt){return Tt&&Nt})(i<p,this.s[i]!==0)){for(var g=0,v=i;v<this.m;v++)g+=r[v][i]*r[v][c];g=-g/r[i][i];for(var T=i;T<this.m;T++)r[T][c]+=g*r[T][i]}t[c]=r[i][c]}if((function(Tt,Nt){return Tt&&Nt})(h,i<p))for(var L=i;L<this.m;L++)this.U[L][i]=r[L][i];if(i<o){t[i]=0;for(var R=i+1;R<this.n;R++)t[i]=f.hypot(t[i],t[R]);if(t[i]!==0){t[i+1]<0&&(t[i]=-t[i]);for(var S=i+1;S<this.n;S++)t[S]/=t[i];t[i+1]+=1}if(t[i]=-t[i],(function(Tt,Nt){return Tt&&Nt})(i+1<this.m,t[i]!==0)){for(var Y=i+1;Y<this.m;Y++)e[Y]=0;for(var $=i+1;$<this.n;$++)for(var Z=i+1;Z<this.m;Z++)e[Z]+=t[$]*r[Z][$];for(var D=i+1;D<this.n;D++)for(var J=-t[D]/t[i+1],l=i+1;l<this.m;l++)r[l][D]+=J*e[l]}if(a)for(var E=i+1;E<this.n;E++)this.V[E][i]=t[E]}}var u=Math.min(this.n,this.m+1);if(p<this.n&&(this.s[p]=r[p][p]),this.m<u&&(this.s[u-1]=0),o+1<u&&(t[o]=r[o][u-1]),t[u-1]=0,h){for(var y=p;y<n;y++){for(var m=0;m<this.m;m++)this.U[m][y]=0;this.U[y][y]=1}for(var A=p-1;A>=0;A--)if(this.s[A]!==0){for(var w=A+1;w<n;w++){for(var b=0,G=A;G<this.m;G++)b+=this.U[G][A]*this.U[G][w];b=-b/this.U[A][A];for(var F=A;F<this.m;F++)this.U[F][w]+=b*this.U[F][A]}for(var k=A;k<this.m;k++)this.U[k][A]=-this.U[k][A];this.U[A][A]=1+this.U[A][A];for(var V=0;V<A-1;V++)this.U[V][A]=0}else{for(var K=0;K<this.m;K++)this.U[K][A]=0;this.U[A][A]=1}}if(a)for(var H=this.n-1;H>=0;H--){if((function(Tt,Nt){return Tt&&Nt})(H<o,t[H]!==0))for(var X=H+1;X<n;X++){for(var O=0,z=H+1;z<this.n;z++)O+=this.V[z][H]*this.V[z][X];O=-O/this.V[H+1][H];for(var et=H+1;et<this.n;et++)this.V[et][X]+=O*this.V[et][H]}for(var U=0;U<this.n;U++)this.V[U][H]=0;this.V[H][H]=1}for(var B=u-1,lt=0,at=2**-52,Lt=2**-966;u>0;){var W=void 0,pt=void 0;for(W=u-2;W>=-1&&W!==-1;W--)if(Math.abs(t[W])<=Lt+at*(Math.abs(this.s[W])+Math.abs(this.s[W+1]))){t[W]=0;break}if(W===u-2)pt=4;else{var mt=void 0;for(mt=u-1;mt>=W&&mt!==W;mt--){var Bt=(mt===u?0:Math.abs(t[mt]))+(mt===W+1?0:Math.abs(t[mt-1]));if(Math.abs(this.s[mt])<=Lt+at*Bt){this.s[mt]=0;break}}mt===W?pt=3:mt===u-1?pt=1:(pt=2,W=mt)}switch(W++,pt){case 1:var Yt=t[u-2];t[u-2]=0;for(var _t=u-2;_t>=W;_t--){var xt=f.hypot(this.s[_t],Yt),kt=this.s[_t]/xt,Ut=Yt/xt;if(this.s[_t]=xt,_t!==W&&(Yt=-Ut*t[_t-1],t[_t-1]=kt*t[_t-1]),a)for(var Rt=0;Rt<this.n;Rt++)xt=kt*this.V[Rt][_t]+Ut*this.V[Rt][u-1],this.V[Rt][u-1]=-Ut*this.V[Rt][_t]+kt*this.V[Rt][u-1],this.V[Rt][_t]=xt}break;case 2:var Vt=t[W-1];t[W-1]=0;for(var Gt=W;Gt<u;Gt++){var st=f.hypot(this.s[Gt],Vt),ot=this.s[Gt]/st,ct=Vt/st;if(this.s[Gt]=st,Vt=-ct*t[Gt],t[Gt]=ot*t[Gt],h)for(var I=0;I<this.m;I++)st=ot*this.U[I][Gt]+ct*this.U[I][W-1],this.U[I][W-1]=-ct*this.U[I][Gt]+ot*this.U[I][W-1],this.U[I][Gt]=st}break;case 3:var P=Math.max(Math.max(Math.max(Math.max(Math.abs(this.s[u-1]),Math.abs(this.s[u-2])),Math.abs(t[u-2])),Math.abs(this.s[W])),Math.abs(t[W])),q=this.s[u-1]/P,j=this.s[u-2]/P,tt=t[u-2]/P,Et=this.s[W]/P,yt=t[W]/P,it=((j+q)*(j-q)+tt*tt)/2,ft=q*tt*(q*tt),It=0;(function(Tt,Nt){return Tt||Nt})(it!==0,ft!==0)&&(It=Math.sqrt(it*it+ft),it<0&&(It=-It),It=ft/(it+It));for(var wt=(Et+q)*(Et-q)+It,vt=Et*yt,ht=W;ht<u-1;ht++){var dt=f.hypot(wt,vt),Q=wt/dt,ut=vt/dt;if(ht!==W&&(t[ht-1]=dt),wt=Q*this.s[ht]+ut*t[ht],t[ht]=Q*t[ht]-ut*this.s[ht],vt=ut*this.s[ht+1],this.s[ht+1]=Q*this.s[ht+1],a)for(var At=0;At<this.n;At++)dt=Q*this.V[At][ht]+ut*this.V[At][ht+1],this.V[At][ht+1]=-ut*this.V[At][ht]+Q*this.V[At][ht+1],this.V[At][ht]=dt;if(dt=f.hypot(wt,vt),Q=wt/dt,ut=vt/dt,this.s[ht]=dt,wt=Q*t[ht]+ut*this.s[ht+1],this.s[ht+1]=-ut*t[ht]+Q*this.s[ht+1],vt=ut*t[ht+1],t[ht+1]=Q*t[ht+1],h&&ht<this.m-1)for(var rt=0;rt<this.m;rt++)dt=Q*this.U[rt][ht]+ut*this.U[rt][ht+1],this.U[rt][ht+1]=-ut*this.U[rt][ht]+Q*this.U[rt][ht+1],this.U[rt][ht]=dt}t[u-2]=wt,lt+=1;break;case 4:if(this.s[W]<=0&&(this.s[W]=this.s[W]<0?-this.s[W]:0,a))for(var bt=0;bt<=B;bt++)this.V[bt][W]=-this.V[bt][W];for(;W<B&&!(this.s[W]>=this.s[W+1]);){var Ot=this.s[W];if(this.s[W]=this.s[W+1],this.s[W+1]=Ot,a&&W<this.n-1)for(var Dt=0;Dt<this.n;Dt++)Ot=this.V[Dt][W+1],this.V[Dt][W+1]=this.V[Dt][W],this.V[Dt][W]=Ot;if(h&&W<this.m-1)for(var Ft=0;Ft<this.m;Ft++)Ot=this.U[Ft][W+1],this.U[Ft][W+1]=this.U[Ft][W],this.U[Ft][W]=Ot;W++}lt=0,u--;break}}return{U:this.U,V:this.V,S:this.s}},f.hypot=function(r,n){var t=void 0;return Math.abs(r)>Math.abs(n)?(t=n/r,t=Math.abs(r)*Math.sqrt(1+t*t)):n==0?t=0:(t=r/n,t=Math.abs(n)*Math.sqrt(1+t*t)),t},C.exports=f}),(function(C,M,N){var f=(function(){function n(t,e){for(var h=0;h<e.length;h++){var a=e[h];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,h){return e&&n(t.prototype,e),h&&n(t,h),t}})();function r(n,t){if(!(n instanceof t))throw TypeError("Cannot call a class as a function")}C.exports=(function(){function n(t,e){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,p=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1;r(this,n),this.sequence1=t,this.sequence2=e,this.match_score=h,this.mismatch_penalty=a,this.gap_penalty=p,this.iMax=t.length+1,this.jMax=e.length+1,this.grid=Array(this.iMax);for(var o=0;o<this.iMax;o++){this.grid[o]=Array(this.jMax);for(var i=0;i<this.jMax;i++)this.grid[o][i]=0}this.tracebackGrid=Array(this.iMax);for(var d=0;d<this.iMax;d++){this.tracebackGrid[d]=Array(this.jMax);for(var s=0;s<this.jMax;s++)this.tracebackGrid[d][s]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return f(n,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var t=1;t<this.jMax;t++)this.grid[0][t]=this.grid[0][t-1]+this.gap_penalty,this.tracebackGrid[0][t]=[!1,!1,!0];for(var e=1;e<this.iMax;e++)this.grid[e][0]=this.grid[e-1][0]+this.gap_penalty,this.tracebackGrid[e][0]=[!1,!0,!1];for(var h=1;h<this.iMax;h++)for(var a=1;a<this.jMax;a++){var p=void 0;p=this.sequence1[h-1]===this.sequence2[a-1]?this.grid[h-1][a-1]+this.match_score:this.grid[h-1][a-1]+this.mismatch_penalty;var o=this.grid[h-1][a]+this.gap_penalty,i=this.grid[h][a-1]+this.gap_penalty,d=[p,o,i],s=this.arrayAllMaxIndexes(d);this.grid[h][a]=d[s[0]],this.tracebackGrid[h][a]=[s.includes(0),s.includes(1),s.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var t=[];for(t.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});t[0];){var e=t[0],h=this.tracebackGrid[e.pos[0]][e.pos[1]];h[0]&&t.push({pos:[e.pos[0]-1,e.pos[1]-1],seq1:this.sequence1[e.pos[0]-1]+e.seq1,seq2:this.sequence2[e.pos[1]-1]+e.seq2}),h[1]&&t.push({pos:[e.pos[0]-1,e.pos[1]],seq1:this.sequence1[e.pos[0]-1]+e.seq1,seq2:"-"+e.seq2}),h[2]&&t.push({pos:[e.pos[0],e.pos[1]-1],seq1:"-"+e.seq1,seq2:this.sequence2[e.pos[1]-1]+e.seq2}),e.pos[0]===0&&e.pos[1]===0&&this.alignments.push({sequence1:e.seq1,sequence2:e.seq2}),t.shift()}return this.alignments}},{key:"getAllIndexes",value:function(t,e){for(var h=[],a=-1;(a=t.indexOf(e,a+1))!==-1;)h.push(a);return h}},{key:"arrayAllMaxIndexes",value:function(t){return this.getAllIndexes(t,Math.max.apply(null,t))}}]),n})()}),(function(C,M,N){var f=function(){};f.FDLayout=N(18),f.FDLayoutConstants=N(4),f.FDLayoutEdge=N(19),f.FDLayoutNode=N(20),f.DimensionD=N(21),f.HashMap=N(22),f.HashSet=N(23),f.IGeometry=N(8),f.IMath=N(9),f.Integer=N(10),f.Point=N(12),f.PointD=N(5),f.RandomSeed=N(16),f.RectangleD=N(13),f.Transform=N(17),f.UniqueIDGeneretor=N(14),f.Quicksort=N(25),f.LinkedList=N(11),f.LGraphObject=N(2),f.LGraph=N(6),f.LEdge=N(1),f.LGraphManager=N(7),f.LNode=N(3),f.Layout=N(15),f.LayoutConstants=N(0),f.NeedlemanWunsch=N(27),f.Matrix=N(24),f.SVD=N(26),C.exports=f}),(function(C,M,N){function f(){this.listeners=[]}var r=f.prototype;r.addListener=function(n,t){this.listeners.push({event:n,callback:t})},r.removeListener=function(n,t){for(var e=this.listeners.length;e>=0;e--){var h=this.listeners[e];h.event===n&&h.callback===t&&this.listeners.splice(e,1)}},r.emit=function(n,t){for(var e=0;e<this.listeners.length;e++){var h=this.listeners[e];n===h.event&&h.callback(t)}},C.exports=f})])})})),we=de(((_,x)=>{(function(C,M){typeof _=="object"&&typeof x=="object"?x.exports=M(Le()):typeof define=="function"&&define.amd?define(["layout-base"],M):typeof _=="object"?_.coseBase=M(Le()):C.coseBase=M(C.layoutBase)})(_,function(C){return(()=>{var M={45:((r,n,t)=>{var e={};e.layoutBase=t(551),e.CoSEConstants=t(806),e.CoSEEdge=t(767),e.CoSEGraph=t(880),e.CoSEGraphManager=t(578),e.CoSELayout=t(765),e.CoSENode=t(991),e.ConstraintHandler=t(902),r.exports=e}),806:((r,n,t)=>{var e=t(551).FDLayoutConstants;function h(){}for(var a in e)h[a]=e[a];h.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,h.DEFAULT_RADIAL_SEPARATION=e.DEFAULT_EDGE_LENGTH,h.DEFAULT_COMPONENT_SEPERATION=60,h.TILE=!0,h.TILING_PADDING_VERTICAL=10,h.TILING_PADDING_HORIZONTAL=10,h.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,h.ENFORCE_CONSTRAINTS=!0,h.APPLY_LAYOUT=!0,h.RELAX_MOVEMENT_ON_CONSTRAINTS=!0,h.TREE_REDUCTION_ON_INCREMENTAL=!0,h.PURE_INCREMENTAL=h.DEFAULT_INCREMENTAL,r.exports=h}),767:((r,n,t)=>{var e=t(551).FDLayoutEdge;function h(p,o,i){e.call(this,p,o,i)}for(var a in h.prototype=Object.create(e.prototype),e)h[a]=e[a];r.exports=h}),880:((r,n,t)=>{var e=t(551).LGraph;function h(p,o,i){e.call(this,p,o,i)}for(var a in h.prototype=Object.create(e.prototype),e)h[a]=e[a];r.exports=h}),578:((r,n,t)=>{var e=t(551).LGraphManager;function h(p){e.call(this,p)}for(var a in h.prototype=Object.create(e.prototype),e)h[a]=e[a];r.exports=h}),765:((r,n,t)=>{var e=t(551).FDLayout,h=t(578),a=t(880),p=t(991),o=t(767),i=t(806),d=t(902),s=t(551).FDLayoutConstants,c=t(551).LayoutConstants,g=t(551).Point,v=t(551).PointD,T=t(551).DimensionD,L=t(551).Layout,R=t(551).Integer,S=t(551).IGeometry,Y=t(551).LGraph,$=t(551).Transform,Z=t(551).LinkedList;function D(){e.call(this),this.toBeTiled={},this.constraints={}}for(var J in D.prototype=Object.create(e.prototype),e)D[J]=e[J];D.prototype.newGraphManager=function(){var l=new h(this);return this.graphManager=l,l},D.prototype.newGraph=function(l){return new a(null,this.graphManager,l)},D.prototype.newNode=function(l){return new p(this.graphManager,l)},D.prototype.newEdge=function(l){return new o(null,null,l)},D.prototype.initParameters=function(){e.prototype.initParameters.call(this,arguments),this.isSubLayout||(i.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=i.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=i.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=s.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=s.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=s.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=s.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1)},D.prototype.initSpringEmbedder=function(){e.prototype.initSpringEmbedder.call(this),this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/s.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=.04,this.coolingAdjuster=1},D.prototype.layout=function(){return c.DEFAULT_CREATE_BENDS_AS_NEEDED&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},D.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(i.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var l=new Set(this.getAllNodes()),E=this.nodesWithGravity.filter(function(y){return l.has(y)});this.graphManager.setAllNodesToApplyGravitation(E)}}else{var u=this.getFlatForest();if(u.length>0)this.positionNodesRadially(u);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var l=new Set(this.getAllNodes()),E=this.nodesWithGravity.filter(function(A){return l.has(A)});this.graphManager.setAllNodesToApplyGravitation(E),this.positionNodesRandomly()}}return Object.keys(this.constraints).length>0&&(d.handleConstraints(this),this.initConstraintVariables()),this.initSpringEmbedder(),i.APPLY_LAYOUT&&this.runSpringEmbedder(),!0},D.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished)if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;if(this.totalIterations%s.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged())if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;this.coolingCycle++,this.layoutQuality==0?this.coolingAdjuster=this.coolingCycle:this.layoutQuality==1&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-this.coolingCycle**+(Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var l=new Set(this.getAllNodes()),E=this.nodesWithGravity.filter(function(m){return l.has(m)});this.graphManager.setAllNodesToApplyGravitation(E),this.graphManager.updateBounds(),this.updateGrid(),i.PURE_INCREMENTAL?this.coolingFactor=s.DEFAULT_COOLING_FACTOR_INCREMENTAL/2:this.coolingFactor=s.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),i.PURE_INCREMENTAL?this.coolingFactor=s.DEFAULT_COOLING_FACTOR_INCREMENTAL/2*((100-this.afterGrowthIterations)/100):this.coolingFactor=s.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var u=!this.isTreeGrowing&&!this.isGrowthFinished,y=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(u,y),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},D.prototype.getPositionsData=function(){for(var l=this.graphManager.getAllNodes(),E={},u=0;u<l.length;u++){var y=l[u].rect,m=l[u].id;E[m]={id:m,x:y.getCenterX(),y:y.getCenterY(),w:y.width,h:y.height}}return E},D.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var l=!1;if(s.ANIMATE==="during")this.emit("layoutstarted");else{for(;!l;)l=this.tick();this.graphManager.updateBounds()}},D.prototype.moveNodes=function(){for(var l=this.getAllNodes(),E,u=0;u<l.length;u++)E=l[u],E.calculateDisplacement();Object.keys(this.constraints).length>0&&this.updateDisplacements();for(var u=0;u<l.length;u++)E=l[u],E.move()},D.prototype.initConstraintVariables=function(){var l=this;this.idToNodeMap=new Map,this.fixedNodeSet=new Set;for(var E=this.graphManager.getAllNodes(),u=0;u<E.length;u++){var y=E[u];this.idToNodeMap.set(y.id,y)}var m=function O(z){for(var et=z.getChild().getNodes(),U,B=0,lt=0;lt<et.length;lt++)U=et[lt],U.getChild()==null?l.fixedNodeSet.has(U.id)&&(B+=100):B+=O(U);return B};if(this.constraints.fixedNodeConstraint){this.constraints.fixedNodeConstraint.forEach(function(O){l.fixedNodeSet.add(O.nodeId)});for(var E=this.graphManager.getAllNodes(),y,u=0;u<E.length;u++)if(y=E[u],y.getChild()!=null){var A=m(y);A>0&&(y.fixedNodeWeight=A)}}if(this.constraints.relativePlacementConstraint){var w=new Map,b=new Map;if(this.dummyToNodeForVerticalAlignment=new Map,this.dummyToNodeForHorizontalAlignment=new Map,this.fixedNodesOnHorizontal=new Set,this.fixedNodesOnVertical=new Set,this.fixedNodeSet.forEach(function(O){l.fixedNodesOnHorizontal.add(O),l.fixedNodesOnVertical.add(O)}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var G=this.constraints.alignmentConstraint.vertical,u=0;u<G.length;u++)this.dummyToNodeForVerticalAlignment.set("dummy"+u,[]),G[u].forEach(function(z){w.set(z,"dummy"+u),l.dummyToNodeForVerticalAlignment.get("dummy"+u).push(z),l.fixedNodeSet.has(z)&&l.fixedNodesOnHorizontal.add("dummy"+u)});if(this.constraints.alignmentConstraint.horizontal)for(var F=this.constraints.alignmentConstraint.horizontal,u=0;u<F.length;u++)this.dummyToNodeForHorizontalAlignment.set("dummy"+u,[]),F[u].forEach(function(z){b.set(z,"dummy"+u),l.dummyToNodeForHorizontalAlignment.get("dummy"+u).push(z),l.fixedNodeSet.has(z)&&l.fixedNodesOnVertical.add("dummy"+u)})}if(i.RELAX_MOVEMENT_ON_CONSTRAINTS)this.shuffle=function(O){var z,et,U;for(U=O.length-1;U>=2*O.length/3;U--)z=Math.floor(Math.random()*(U+1)),et=O[U],O[U]=O[z],O[z]=et;return O},this.nodesInRelativeHorizontal=[],this.nodesInRelativeVertical=[],this.nodeToRelativeConstraintMapHorizontal=new Map,this.nodeToRelativeConstraintMapVertical=new Map,this.nodeToTempPositionMapHorizontal=new Map,this.nodeToTempPositionMapVertical=new Map,this.constraints.relativePlacementConstraint.forEach(function(O){if(O.left){var z=w.has(O.left)?w.get(O.left):O.left,et=w.has(O.right)?w.get(O.right):O.right;l.nodesInRelativeHorizontal.includes(z)||(l.nodesInRelativeHorizontal.push(z),l.nodeToRelativeConstraintMapHorizontal.set(z,[]),l.dummyToNodeForVerticalAlignment.has(z)?l.nodeToTempPositionMapHorizontal.set(z,l.idToNodeMap.get(l.dummyToNodeForVerticalAlignment.get(z)[0]).getCenterX()):l.nodeToTempPositionMapHorizontal.set(z,l.idToNodeMap.get(z).getCenterX())),l.nodesInRelativeHorizontal.includes(et)||(l.nodesInRelativeHorizontal.push(et),l.nodeToRelativeConstraintMapHorizontal.set(et,[]),l.dummyToNodeForVerticalAlignment.has(et)?l.nodeToTempPositionMapHorizontal.set(et,l.idToNodeMap.get(l.dummyToNodeForVerticalAlignment.get(et)[0]).getCenterX()):l.nodeToTempPositionMapHorizontal.set(et,l.idToNodeMap.get(et).getCenterX())),l.nodeToRelativeConstraintMapHorizontal.get(z).push({right:et,gap:O.gap}),l.nodeToRelativeConstraintMapHorizontal.get(et).push({left:z,gap:O.gap})}else{var U=b.has(O.top)?b.get(O.top):O.top,B=b.has(O.bottom)?b.get(O.bottom):O.bottom;l.nodesInRelativeVertical.includes(U)||(l.nodesInRelativeVertical.push(U),l.nodeToRelativeConstraintMapVertical.set(U,[]),l.dummyToNodeForHorizontalAlignment.has(U)?l.nodeToTempPositionMapVertical.set(U,l.idToNodeMap.get(l.dummyToNodeForHorizontalAlignment.get(U)[0]).getCenterY()):l.nodeToTempPositionMapVertical.set(U,l.idToNodeMap.get(U).getCenterY())),l.nodesInRelativeVertical.includes(B)||(l.nodesInRelativeVertical.push(B),l.nodeToRelativeConstraintMapVertical.set(B,[]),l.dummyToNodeForHorizontalAlignment.has(B)?l.nodeToTempPositionMapVertical.set(B,l.idToNodeMap.get(l.dummyToNodeForHorizontalAlignment.get(B)[0]).getCenterY()):l.nodeToTempPositionMapVertical.set(B,l.idToNodeMap.get(B).getCenterY())),l.nodeToRelativeConstraintMapVertical.get(U).push({bottom:B,gap:O.gap}),l.nodeToRelativeConstraintMapVertical.get(B).push({top:U,gap:O.gap})}});else{var k=new Map,V=new Map;this.constraints.relativePlacementConstraint.forEach(function(O){if(O.left){var z=w.has(O.left)?w.get(O.left):O.left,et=w.has(O.right)?w.get(O.right):O.right;k.has(z)?k.get(z).push(et):k.set(z,[et]),k.has(et)?k.get(et).push(z):k.set(et,[z])}else{var U=b.has(O.top)?b.get(O.top):O.top,B=b.has(O.bottom)?b.get(O.bottom):O.bottom;V.has(U)?V.get(U).push(B):V.set(U,[B]),V.has(B)?V.get(B).push(U):V.set(B,[U])}});var K=function(O,z){var et=[],U=[],B=new Z,lt=new Set,at=0;return O.forEach(function(Lt,W){if(!lt.has(W)){et[at]=[],U[at]=!1;var pt=W;for(B.push(pt),lt.add(pt),et[at].push(pt);B.length!=0;)pt=B.shift(),z.has(pt)&&(U[at]=!0),O.get(pt).forEach(function(mt){lt.has(mt)||(B.push(mt),lt.add(mt),et[at].push(mt))});at++}}),{components:et,isFixed:U}},H=K(k,l.fixedNodesOnHorizontal);this.componentsOnHorizontal=H.components,this.fixedComponentsOnHorizontal=H.isFixed;var X=K(V,l.fixedNodesOnVertical);this.componentsOnVertical=X.components,this.fixedComponentsOnVertical=X.isFixed}}},D.prototype.updateDisplacements=function(){var l=this;if(this.constraints.fixedNodeConstraint&&this.constraints.fixedNodeConstraint.forEach(function(X){var O=l.idToNodeMap.get(X.nodeId);O.displacementX=0,O.displacementY=0}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var E=this.constraints.alignmentConstraint.vertical,u=0;u<E.length;u++){for(var y=0,m=0;m<E[u].length;m++){if(this.fixedNodeSet.has(E[u][m])){y=0;break}y+=this.idToNodeMap.get(E[u][m]).displacementX}for(var A=y/E[u].length,m=0;m<E[u].length;m++)this.idToNodeMap.get(E[u][m]).displacementX=A}if(this.constraints.alignmentConstraint.horizontal)for(var w=this.constraints.alignmentConstraint.horizontal,u=0;u<w.length;u++){for(var b=0,m=0;m<w[u].length;m++){if(this.fixedNodeSet.has(w[u][m])){b=0;break}b+=this.idToNodeMap.get(w[u][m]).displacementY}for(var G=b/w[u].length,m=0;m<w[u].length;m++)this.idToNodeMap.get(w[u][m]).displacementY=G}}if(this.constraints.relativePlacementConstraint)if(i.RELAX_MOVEMENT_ON_CONSTRAINTS)this.totalIterations%10==0&&(this.shuffle(this.nodesInRelativeHorizontal),this.shuffle(this.nodesInRelativeVertical)),this.nodesInRelativeHorizontal.forEach(function(X){if(!l.fixedNodesOnHorizontal.has(X)){var O=0;O=l.dummyToNodeForVerticalAlignment.has(X)?l.idToNodeMap.get(l.dummyToNodeForVerticalAlignment.get(X)[0]).displacementX:l.idToNodeMap.get(X).displacementX,l.nodeToRelativeConstraintMapHorizontal.get(X).forEach(function(z){if(z.right){var et=l.nodeToTempPositionMapHorizontal.get(z.right)-l.nodeToTempPositionMapHorizontal.get(X)-O;et<z.gap&&(O-=z.gap-et)}else{var et=l.nodeToTempPositionMapHorizontal.get(X)-l.nodeToTempPositionMapHorizontal.get(z.left)+O;et<z.gap&&(O+=z.gap-et)}}),l.nodeToTempPositionMapHorizontal.set(X,l.nodeToTempPositionMapHorizontal.get(X)+O),l.dummyToNodeForVerticalAlignment.has(X)?l.dummyToNodeForVerticalAlignment.get(X).forEach(function(z){l.idToNodeMap.get(z).displacementX=O}):l.idToNodeMap.get(X).displacementX=O}}),this.nodesInRelativeVertical.forEach(function(X){if(!l.fixedNodesOnHorizontal.has(X)){var O=0;O=l.dummyToNodeForHorizontalAlignment.has(X)?l.idToNodeMap.get(l.dummyToNodeForHorizontalAlignment.get(X)[0]).displacementY:l.idToNodeMap.get(X).displacementY,l.nodeToRelativeConstraintMapVertical.get(X).forEach(function(z){if(z.bottom){var et=l.nodeToTempPositionMapVertical.get(z.bottom)-l.nodeToTempPositionMapVertical.get(X)-O;et<z.gap&&(O-=z.gap-et)}else{var et=l.nodeToTempPositionMapVertical.get(X)-l.nodeToTempPositionMapVertical.get(z.top)+O;et<z.gap&&(O+=z.gap-et)}}),l.nodeToTempPositionMapVertical.set(X,l.nodeToTempPositionMapVertical.get(X)+O),l.dummyToNodeForHorizontalAlignment.has(X)?l.dummyToNodeForHorizontalAlignment.get(X).forEach(function(z){l.idToNodeMap.get(z).displacementY=O}):l.idToNodeMap.get(X).displacementY=O}});else{for(var u=0;u<this.componentsOnHorizontal.length;u++){var F=this.componentsOnHorizontal[u];if(this.fixedComponentsOnHorizontal[u])for(var m=0;m<F.length;m++)this.dummyToNodeForVerticalAlignment.has(F[m])?this.dummyToNodeForVerticalAlignment.get(F[m]).forEach(function(z){l.idToNodeMap.get(z).displacementX=0}):this.idToNodeMap.get(F[m]).displacementX=0;else{for(var k=0,V=0,m=0;m<F.length;m++)if(this.dummyToNodeForVerticalAlignment.has(F[m])){var K=this.dummyToNodeForVerticalAlignment.get(F[m]);k+=K.length*this.idToNodeMap.get(K[0]).displacementX,V+=K.length}else k+=this.idToNodeMap.get(F[m]).displacementX,V++;for(var H=k/V,m=0;m<F.length;m++)this.dummyToNodeForVerticalAlignment.has(F[m])?this.dummyToNodeForVerticalAlignment.get(F[m]).forEach(function(z){l.idToNodeMap.get(z).displacementX=H}):this.idToNodeMap.get(F[m]).displacementX=H}}for(var u=0;u<this.componentsOnVertical.length;u++){var F=this.componentsOnVertical[u];if(this.fixedComponentsOnVertical[u])for(var m=0;m<F.length;m++)this.dummyToNodeForHorizontalAlignment.has(F[m])?this.dummyToNodeForHorizontalAlignment.get(F[m]).forEach(function(et){l.idToNodeMap.get(et).displacementY=0}):this.idToNodeMap.get(F[m]).displacementY=0;else{for(var k=0,V=0,m=0;m<F.length;m++)if(this.dummyToNodeForHorizontalAlignment.has(F[m])){var K=this.dummyToNodeForHorizontalAlignment.get(F[m]);k+=K.length*this.idToNodeMap.get(K[0]).displacementY,V+=K.length}else k+=this.idToNodeMap.get(F[m]).displacementY,V++;for(var H=k/V,m=0;m<F.length;m++)this.dummyToNodeForHorizontalAlignment.has(F[m])?this.dummyToNodeForHorizontalAlignment.get(F[m]).forEach(function(U){l.idToNodeMap.get(U).displacementY=H}):this.idToNodeMap.get(F[m]).displacementY=H}}}},D.prototype.calculateNodesToApplyGravitationTo=function(){var l=[],E,u=this.graphManager.getGraphs(),y=u.length,m;for(m=0;m<y;m++)E=u[m],E.updateConnected(),E.isConnected||(l=l.concat(E.getNodes()));return l},D.prototype.createBendpoints=function(){var l=[];l=l.concat(this.graphManager.getAllEdges());var E=new Set,u;for(u=0;u<l.length;u++){var y=l[u];if(!E.has(y)){var m=y.getSource(),A=y.getTarget();if(m==A)y.getBendpoints().push(new v),y.getBendpoints().push(new v),this.createDummyNodesForBendpoints(y),E.add(y);else{var w=[];if(w=w.concat(m.getEdgeListToNode(A)),w=w.concat(A.getEdgeListToNode(m)),!E.has(w[0])){if(w.length>1){var b;for(b=0;b<w.length;b++){var G=w[b];G.getBendpoints().push(new v),this.createDummyNodesForBendpoints(G)}}w.forEach(function(F){E.add(F)})}}}if(E.size==l.length)break}},D.prototype.positionNodesRadially=function(l){for(var E=new g(0,0),u=Math.ceil(Math.sqrt(l.length)),y=0,m=0,A=0,w=new v(0,0),b=0;b<l.length;b++){b%u==0&&(A=0,m=y,b!=0&&(m+=i.DEFAULT_COMPONENT_SEPERATION),y=0);var G=l[b],F=L.findCenterOfTree(G);E.x=A,E.y=m,w=D.radialLayout(G,F,E),w.y>y&&(y=Math.floor(w.y)),A=Math.floor(w.x+i.DEFAULT_COMPONENT_SEPERATION)}this.transform(new v(c.WORLD_CENTER_X-w.x/2,c.WORLD_CENTER_Y-w.y/2))},D.radialLayout=function(l,E,u){var y=Math.max(this.maxDiagonalInTree(l),i.DEFAULT_RADIAL_SEPARATION);D.branchRadialLayout(E,null,0,359,0,y);var m=Y.calculateBounds(l),A=new $;A.setDeviceOrgX(m.getMinX()),A.setDeviceOrgY(m.getMinY()),A.setWorldOrgX(u.x),A.setWorldOrgY(u.y);for(var w=0;w<l.length;w++)l[w].transform(A);var b=new v(m.getMaxX(),m.getMaxY());return A.inverseTransformPoint(b)},D.branchRadialLayout=function(l,E,u,y,m,A){var w=(y-u+1)/2;w<0&&(w+=180);var b=(w+u)%360*S.TWO_PI/360,G=m*Math.cos(b),F=m*Math.sin(b);l.setCenter(G,F);var k=[];k=k.concat(l.getEdges());var V=k.length;E!=null&&V--;for(var K=0,H=k.length,X,O=l.getEdgesBetween(E);O.length>1;){var z=O[0];O.splice(0,1);var et=k.indexOf(z);et>=0&&k.splice(et,1),H--,V--}X=E==null?0:(k.indexOf(O[0])+1)%H;for(var U=Math.abs(y-u)/V,B=X;K!=V;B=++B%H){var lt=k[B].getOtherEnd(l);if(lt!=E){var at=(u+K*U)%360,Lt=(at+U)%360;D.branchRadialLayout(lt,l,at,Lt,m+A,A),K++}}},D.maxDiagonalInTree=function(l){for(var E=R.MIN_VALUE,u=0;u<l.length;u++){var y=l[u].getDiagonal();y>E&&(E=y)}return E},D.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},D.prototype.groupZeroDegreeMembers=function(){var l=this,E={};this.memberGroups={},this.idToDummyNode={};for(var u=[],y=this.graphManager.getAllNodes(),m=0;m<y.length;m++){var A=y[m],w=A.getParent();this.getNodeDegreeWithChildren(A)===0&&(w.id==null||!this.getToBeTiled(w))&&u.push(A)}for(var m=0;m<u.length;m++){var A=u[m],b=A.getParent().id;E[b]===void 0&&(E[b]=[]),E[b]=E[b].concat(A)}Object.keys(E).forEach(function(G){if(E[G].length>1){var F="DummyCompound_"+G;l.memberGroups[F]=E[G];var k=E[G][0].getParent(),V=new p(l.graphManager);V.id=F,V.paddingLeft=k.paddingLeft||0,V.paddingRight=k.paddingRight||0,V.paddingBottom=k.paddingBottom||0,V.paddingTop=k.paddingTop||0,l.idToDummyNode[F]=V;var K=l.getGraphManager().add(l.newGraph(),V),H=k.getChild();H.add(V);for(var X=0;X<E[G].length;X++){var O=E[G][X];H.remove(O),K.add(O)}}})},D.prototype.clearCompounds=function(){var l={},E={};this.performDFSOnCompounds();for(var u=0;u<this.compoundOrder.length;u++)E[this.compoundOrder[u].id]=this.compoundOrder[u],l[this.compoundOrder[u].id]=[].concat(this.compoundOrder[u].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[u].getChild()),this.compoundOrder[u].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(l,E)},D.prototype.clearZeroDegreeMembers=function(){var l=this,E=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(u){var y=l.idToDummyNode[u];if(E[u]=l.tileNodes(l.memberGroups[u],y.paddingLeft+y.paddingRight),y.rect.width=E[u].width,y.rect.height=E[u].height,y.setCenter(E[u].centerX,E[u].centerY),y.labelMarginLeft=0,y.labelMarginTop=0,i.NODE_DIMENSIONS_INCLUDE_LABELS){var m=y.rect.width,A=y.rect.height;y.labelWidth&&(y.labelPosHorizontal=="left"?(y.rect.x-=y.labelWidth,y.setWidth(m+y.labelWidth),y.labelMarginLeft=y.labelWidth):y.labelPosHorizontal=="center"&&y.labelWidth>m?(y.rect.x-=(y.labelWidth-m)/2,y.setWidth(y.labelWidth),y.labelMarginLeft=(y.labelWidth-m)/2):y.labelPosHorizontal=="right"&&y.setWidth(m+y.labelWidth)),y.labelHeight&&(y.labelPosVertical=="top"?(y.rect.y-=y.labelHeight,y.setHeight(A+y.labelHeight),y.labelMarginTop=y.labelHeight):y.labelPosVertical=="center"&&y.labelHeight>A?(y.rect.y-=(y.labelHeight-A)/2,y.setHeight(y.labelHeight),y.labelMarginTop=(y.labelHeight-A)/2):y.labelPosVertical=="bottom"&&y.setHeight(A+y.labelHeight))}})},D.prototype.repopulateCompounds=function(){for(var l=this.compoundOrder.length-1;l>=0;l--){var E=this.compoundOrder[l],u=E.id,y=E.paddingLeft,m=E.paddingTop,A=E.labelMarginLeft,w=E.labelMarginTop;this.adjustLocations(this.tiledMemberPack[u],E.rect.x,E.rect.y,y,m,A,w)}},D.prototype.repopulateZeroDegreeMembers=function(){var l=this,E=this.tiledZeroDegreePack;Object.keys(E).forEach(function(u){var y=l.idToDummyNode[u],m=y.paddingLeft,A=y.paddingTop,w=y.labelMarginLeft,b=y.labelMarginTop;l.adjustLocations(E[u],y.rect.x,y.rect.y,m,A,w,b)})},D.prototype.getToBeTiled=function(l){var E=l.id;if(this.toBeTiled[E]!=null)return this.toBeTiled[E];var u=l.getChild();if(u==null)return this.toBeTiled[E]=!1,!1;for(var y=u.getNodes(),m=0;m<y.length;m++){var A=y[m];if(this.getNodeDegree(A)>0)return this.toBeTiled[E]=!1,!1;if(A.getChild()==null){this.toBeTiled[A.id]=!1;continue}if(!this.getToBeTiled(A))return this.toBeTiled[E]=!1,!1}return this.toBeTiled[E]=!0,!0},D.prototype.getNodeDegree=function(l){l.id;for(var E=l.getEdges(),u=0,y=0;y<E.length;y++){var m=E[y];m.getSource().id!==m.getTarget().id&&(u+=1)}return u},D.prototype.getNodeDegreeWithChildren=function(l){var E=this.getNodeDegree(l);if(l.getChild()==null)return E;for(var u=l.getChild().getNodes(),y=0;y<u.length;y++){var m=u[y];E+=this.getNodeDegreeWithChildren(m)}return E},D.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},D.prototype.fillCompexOrderByDFS=function(l){for(var E=0;E<l.length;E++){var u=l[E];u.getChild()!=null&&this.fillCompexOrderByDFS(u.getChild().getNodes()),this.getToBeTiled(u)&&this.compoundOrder.push(u)}},D.prototype.adjustLocations=function(l,E,u,y,m,A,w){E+=y+A,u+=m+w;for(var b=E,G=0;G<l.rows.length;G++){var F=l.rows[G];E=b;for(var k=0,V=0;V<F.length;V++){var K=F[V];K.rect.x=E,K.rect.y=u,E+=K.rect.width+l.horizontalPadding,K.rect.height>k&&(k=K.rect.height)}u+=k+l.verticalPadding}},D.prototype.tileCompoundMembers=function(l,E){var u=this;this.tiledMemberPack=[],Object.keys(l).forEach(function(y){var m=E[y];if(u.tiledMemberPack[y]=u.tileNodes(l[y],m.paddingLeft+m.paddingRight),m.rect.width=u.tiledMemberPack[y].width,m.rect.height=u.tiledMemberPack[y].height,m.setCenter(u.tiledMemberPack[y].centerX,u.tiledMemberPack[y].centerY),m.labelMarginLeft=0,m.labelMarginTop=0,i.NODE_DIMENSIONS_INCLUDE_LABELS){var A=m.rect.width,w=m.rect.height;m.labelWidth&&(m.labelPosHorizontal=="left"?(m.rect.x-=m.labelWidth,m.setWidth(A+m.labelWidth),m.labelMarginLeft=m.labelWidth):m.labelPosHorizontal=="center"&&m.labelWidth>A?(m.rect.x-=(m.labelWidth-A)/2,m.setWidth(m.labelWidth),m.labelMarginLeft=(m.labelWidth-A)/2):m.labelPosHorizontal=="right"&&m.setWidth(A+m.labelWidth)),m.labelHeight&&(m.labelPosVertical=="top"?(m.rect.y-=m.labelHeight,m.setHeight(w+m.labelHeight),m.labelMarginTop=m.labelHeight):m.labelPosVertical=="center"&&m.labelHeight>w?(m.rect.y-=(m.labelHeight-w)/2,m.setHeight(m.labelHeight),m.labelMarginTop=(m.labelHeight-w)/2):m.labelPosVertical=="bottom"&&m.setHeight(w+m.labelHeight))}})},D.prototype.tileNodes=function(l,E){var u=this.tileNodesByFavoringDim(l,E,!0),y=this.tileNodesByFavoringDim(l,E,!1),m=this.getOrgRatio(u);return this.getOrgRatio(y)<m?y:u},D.prototype.getOrgRatio=function(l){var E=l.width/l.height;return E<1&&(E=1/E),E},D.prototype.calcIdealRowWidth=function(l,E){var u=i.TILING_PADDING_VERTICAL,y=i.TILING_PADDING_HORIZONTAL,m=l.length,A=0,w=0,b=0;l.forEach(function(X){A+=X.getWidth(),w+=X.getHeight(),X.getWidth()>b&&(b=X.getWidth())});var G=A/m,F=w/m,k=(u-y)**2+4*(G+y)*(F+u)*m,V=(y-u+Math.sqrt(k))/(2*(G+y)),K;E?(K=Math.ceil(V),K==V&&K++):K=Math.floor(V);var H=K*(G+y)-y;return b>H&&(H=b),H+=y*2,H},D.prototype.tileNodesByFavoringDim=function(l,E,u){var y=i.TILING_PADDING_VERTICAL,m=i.TILING_PADDING_HORIZONTAL,A=i.TILING_COMPARE_BY,w={rows:[],rowWidth:[],rowHeight:[],width:0,height:E,verticalPadding:y,horizontalPadding:m,centerX:0,centerY:0};A&&(w.idealRowWidth=this.calcIdealRowWidth(l,u));var b=function(X){return X.rect.width*X.rect.height},G=function(X,O){return b(O)-b(X)};l.sort(function(X,O){var z=G;return w.idealRowWidth?(z=A,z(X.id,O.id)):z(X,O)});for(var F=0,k=0,V=0;V<l.length;V++){var K=l[V];F+=K.getCenterX(),k+=K.getCenterY()}w.centerX=F/l.length,w.centerY=k/l.length;for(var V=0;V<l.length;V++){var K=l[V];if(w.rows.length==0)this.insertNodeToRow(w,K,0,E);else if(this.canAddHorizontal(w,K.rect.width,K.rect.height)){var H=w.rows.length-1;w.idealRowWidth||(H=this.getShortestRowIndex(w)),this.insertNodeToRow(w,K,H,E)}else this.insertNodeToRow(w,K,w.rows.length,E);this.shiftToLastRow(w)}return w},D.prototype.insertNodeToRow=function(l,E,u,y){var m=y;u==l.rows.length&&(l.rows.push([]),l.rowWidth.push(m),l.rowHeight.push(0));var A=l.rowWidth[u]+E.rect.width;l.rows[u].length>0&&(A+=l.horizontalPadding),l.rowWidth[u]=A,l.width<A&&(l.width=A);var w=E.rect.height;u>0&&(w+=l.verticalPadding);var b=0;w>l.rowHeight[u]&&(b=l.rowHeight[u],l.rowHeight[u]=w,b=l.rowHeight[u]-b),l.height+=b,l.rows[u].push(E)},D.prototype.getShortestRowIndex=function(l){for(var E=-1,u=Number.MAX_VALUE,y=0;y<l.rows.length;y++)l.rowWidth[y]<u&&(E=y,u=l.rowWidth[y]);return E},D.prototype.getLongestRowIndex=function(l){for(var E=-1,u=Number.MIN_VALUE,y=0;y<l.rows.length;y++)l.rowWidth[y]>u&&(E=y,u=l.rowWidth[y]);return E},D.prototype.canAddHorizontal=function(l,E,u){if(l.idealRowWidth){var y=l.rows.length-1;return l.rowWidth[y]+E+l.horizontalPadding<=l.idealRowWidth}var m=this.getShortestRowIndex(l);if(m<0)return!0;var A=l.rowWidth[m];if(A+l.horizontalPadding+E<=l.width)return!0;var w=0;l.rowHeight[m]<u&&m>0&&(w=u+l.verticalPadding-l.rowHeight[m]);var b=l.width-A>=E+l.horizontalPadding?(l.height+w)/(A+E+l.horizontalPadding):(l.height+w)/l.width;w=u+l.verticalPadding;var G=l.width<E?(l.height+w)/E:(l.height+w)/l.width;return G<1&&(G=1/G),b<1&&(b=1/b),b<G},D.prototype.shiftToLastRow=function(l){var E=this.getLongestRowIndex(l),u=l.rowWidth.length-1,y=l.rows[E],m=y[y.length-1],A=m.width+l.horizontalPadding;if(l.width-l.rowWidth[u]>A&&E!=u){y.splice(-1,1),l.rows[u].push(m),l.rowWidth[E]=l.rowWidth[E]-A,l.rowWidth[u]=l.rowWidth[u]+A,l.width=l.rowWidth[instance.getLongestRowIndex(l)];for(var w=Number.MIN_VALUE,b=0;b<y.length;b++)y[b].height>w&&(w=y[b].height);E>0&&(w+=l.verticalPadding);var G=l.rowHeight[E]+l.rowHeight[u];l.rowHeight[E]=w,l.rowHeight[u]<m.height+l.verticalPadding&&(l.rowHeight[u]=m.height+l.verticalPadding);var F=l.rowHeight[E]+l.rowHeight[u];l.height+=F-G,this.shiftToLastRow(l)}},D.prototype.tilingPreLayout=function(){i.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},D.prototype.tilingPostLayout=function(){i.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},D.prototype.reduceTrees=function(){for(var l=[],E=!0,u;E;){var y=this.graphManager.getAllNodes(),m=[];E=!1;for(var A=0;A<y.length;A++)if(u=y[A],u.getEdges().length==1&&!u.getEdges()[0].isInterGraph&&u.getChild()==null){if(i.PURE_INCREMENTAL){var w=u.getEdges()[0].getOtherEnd(u),b=new T(u.getCenterX()-w.getCenterX(),u.getCenterY()-w.getCenterY());m.push([u,u.getEdges()[0],u.getOwner(),b])}else m.push([u,u.getEdges()[0],u.getOwner()]);E=!0}if(E==1){for(var G=[],F=0;F<m.length;F++)m[F][0].getEdges().length==1&&(G.push(m[F]),m[F][0].getOwner().remove(m[F][0]));l.push(G),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=l},D.prototype.growTree=function(l){for(var E=l[l.length-1],u,y=0;y<E.length;y++)u=E[y],this.findPlaceforPrunedNode(u),u[2].add(u[0]),u[2].add(u[1],u[1].source,u[1].target);l.splice(l.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},D.prototype.findPlaceforPrunedNode=function(l){var E,u,y=l[0];if(u=y==l[1].source?l[1].target:l[1].source,i.PURE_INCREMENTAL)y.setCenter(u.getCenterX()+l[3].getWidth(),u.getCenterY()+l[3].getHeight());else{var m=u.startX,A=u.finishX,w=u.startY,b=u.finishY,G=[0,0,0,0];if(w>0)for(var F=m;F<=A;F++)G[0]+=this.grid[F][w-1].length+this.grid[F][w].length-1;if(A<this.grid.length-1)for(var F=w;F<=b;F++)G[1]+=this.grid[A+1][F].length+this.grid[A][F].length-1;if(b<this.grid[0].length-1)for(var F=m;F<=A;F++)G[2]+=this.grid[F][b+1].length+this.grid[F][b].length-1;if(m>0)for(var F=w;F<=b;F++)G[3]+=this.grid[m-1][F].length+this.grid[m][F].length-1;for(var k=R.MAX_VALUE,V,K,H=0;H<G.length;H++)G[H]<k?(k=G[H],V=1,K=H):G[H]==k&&V++;if(V==3&&k==0)G[0]==0&&G[1]==0&&G[2]==0?E=1:G[0]==0&&G[1]==0&&G[3]==0?E=0:G[0]==0&&G[2]==0&&G[3]==0?E=3:G[1]==0&&G[2]==0&&G[3]==0&&(E=2);else if(V==2&&k==0){var X=Math.floor(Math.random()*2);E=G[0]==0&&G[1]==0?X==0?0:1:G[0]==0&&G[2]==0?X==0?0:2:G[0]==0&&G[3]==0?X==0?0:3:G[1]==0&&G[2]==0?X==0?1:2:G[1]==0&&G[3]==0?X==0?1:3:X==0?2:3}else if(V==4&&k==0){var X=Math.floor(Math.random()*4);E=X}else E=K;E==0?y.setCenter(u.getCenterX(),u.getCenterY()-u.getHeight()/2-s.DEFAULT_EDGE_LENGTH-y.getHeight()/2):E==1?y.setCenter(u.getCenterX()+u.getWidth()/2+s.DEFAULT_EDGE_LENGTH+y.getWidth()/2,u.getCenterY()):E==2?y.setCenter(u.getCenterX(),u.getCenterY()+u.getHeight()/2+s.DEFAULT_EDGE_LENGTH+y.getHeight()/2):y.setCenter(u.getCenterX()-u.getWidth()/2-s.DEFAULT_EDGE_LENGTH-y.getWidth()/2,u.getCenterY())}},r.exports=D}),991:((r,n,t)=>{var e=t(551).FDLayoutNode,h=t(551).IMath;function a(o,i,d,s){e.call(this,o,i,d,s)}for(var p in a.prototype=Object.create(e.prototype),e)a[p]=e[p];a.prototype.calculateDisplacement=function(){var o=this.graphManager.getLayout();this.getChild()!=null&&this.fixedNodeWeight?(this.displacementX+=o.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.fixedNodeWeight,this.displacementY+=o.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.fixedNodeWeight):(this.displacementX+=o.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY+=o.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren),Math.abs(this.displacementX)>o.coolingFactor*o.maxNodeDisplacement&&(this.displacementX=o.coolingFactor*o.maxNodeDisplacement*h.sign(this.displacementX)),Math.abs(this.displacementY)>o.coolingFactor*o.maxNodeDisplacement&&(this.displacementY=o.coolingFactor*o.maxNodeDisplacement*h.sign(this.displacementY)),this.child&&this.child.getNodes().length>0&&this.propogateDisplacementToChildren(this.displacementX,this.displacementY)},a.prototype.propogateDisplacementToChildren=function(o,i){for(var d=this.getChild().getNodes(),s,c=0;c<d.length;c++)s=d[c],s.getChild()==null?(s.displacementX+=o,s.displacementY+=i):s.propogateDisplacementToChildren(o,i)},a.prototype.move=function(){var o=this.graphManager.getLayout();(this.child==null||this.child.getNodes().length==0)&&(this.moveBy(this.displacementX,this.displacementY),o.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY)),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},a.prototype.setPred1=function(o){this.pred1=o},a.prototype.getPred1=function(){return pred1},a.prototype.getPred2=function(){return pred2},a.prototype.setNext=function(o){this.next=o},a.prototype.getNext=function(){return next},a.prototype.setProcessed=function(o){this.processed=o},a.prototype.isProcessed=function(){return processed},r.exports=a}),902:((r,n,t)=>{function e(d){if(Array.isArray(d)){for(var s=0,c=Array(d.length);s<d.length;s++)c[s]=d[s];return c}else return Array.from(d)}var h=t(806),a=t(551).LinkedList,p=t(551).Matrix,o=t(551).SVD;function i(){}i.handleConstraints=function(d){var s={};s.fixedNodeConstraint=d.constraints.fixedNodeConstraint,s.alignmentConstraint=d.constraints.alignmentConstraint,s.relativePlacementConstraint=d.constraints.relativePlacementConstraint;for(var c=new Map,g=new Map,v=[],T=[],L=d.getAllNodes(),R=0,S=0;S<L.length;S++){var Y=L[S];Y.getChild()??(g.set(Y.id,R++),v.push(Y.getCenterX()),T.push(Y.getCenterY()),c.set(Y.id,Y))}s.relativePlacementConstraint&&s.relativePlacementConstraint.forEach(function(I){!I.gap&&I.gap!=0&&(I.left?I.gap=h.DEFAULT_EDGE_LENGTH+c.get(I.left).getWidth()/2+c.get(I.right).getWidth()/2:I.gap=h.DEFAULT_EDGE_LENGTH+c.get(I.top).getHeight()/2+c.get(I.bottom).getHeight()/2)});var $=function(I,P){return{x:I.x-P.x,y:I.y-P.y}},Z=function(I){var P=0,q=0;return I.forEach(function(j){P+=v[g.get(j)],q+=T[g.get(j)]}),{x:P/I.size,y:q/I.size}},D=function(I,P,q,j,tt){function Et(dt,Q){var ut=new Set(dt),At=!0,rt=!1,bt=void 0;try{for(var Ot=Q[Symbol.iterator](),Dt;!(At=(Dt=Ot.next()).done);At=!0){var Ft=Dt.value;ut.add(Ft)}}catch(Tt){rt=!0,bt=Tt}finally{try{!At&&Ot.return&&Ot.return()}finally{if(rt)throw bt}}return ut}var yt=new Map;I.forEach(function(dt,Q){yt.set(Q,0)}),I.forEach(function(dt,Q){dt.forEach(function(ut){yt.set(ut.id,yt.get(ut.id)+1)})});var it=new Map,ft=new Map,It=new a;yt.forEach(function(dt,Q){dt==0?(It.push(Q),q||(P=="horizontal"?it.set(Q,g.has(Q)?v[g.get(Q)]:j.get(Q)):it.set(Q,g.has(Q)?T[g.get(Q)]:j.get(Q)))):it.set(Q,-1/0),q&&ft.set(Q,new Set([Q]))}),q&&tt.forEach(function(dt){var Q=[];if(dt.forEach(function(rt){q.has(rt)&&Q.push(rt)}),Q.length>0){var ut=0;Q.forEach(function(rt){P=="horizontal"?(it.set(rt,g.has(rt)?v[g.get(rt)]:j.get(rt)),ut+=it.get(rt)):(it.set(rt,g.has(rt)?T[g.get(rt)]:j.get(rt)),ut+=it.get(rt))}),ut/=Q.length,dt.forEach(function(rt){q.has(rt)||it.set(rt,ut)})}else{var At=0;dt.forEach(function(rt){P=="horizontal"?At+=g.has(rt)?v[g.get(rt)]:j.get(rt):At+=g.has(rt)?T[g.get(rt)]:j.get(rt)}),At/=dt.length,dt.forEach(function(rt){it.set(rt,At)})}});for(var wt=function(){var dt=It.shift();I.get(dt).forEach(function(Q){if(it.get(Q.id)<it.get(dt)+Q.gap)if(q&&q.has(Q.id)){var ut=void 0;if(ut=P=="horizontal"?g.has(Q.id)?v[g.get(Q.id)]:j.get(Q.id):g.has(Q.id)?T[g.get(Q.id)]:j.get(Q.id),it.set(Q.id,ut),ut<it.get(dt)+Q.gap){var At=it.get(dt)+Q.gap-ut;ft.get(dt).forEach(function(rt){it.set(rt,it.get(rt)-At)})}}else it.set(Q.id,it.get(dt)+Q.gap);yt.set(Q.id,yt.get(Q.id)-1),yt.get(Q.id)==0&&It.push(Q.id),q&&ft.set(Q.id,Et(ft.get(dt),ft.get(Q.id)))})};It.length!=0;)wt();if(q){var vt=new Set;I.forEach(function(dt,Q){dt.length==0&&vt.add(Q)});var ht=[];ft.forEach(function(dt,Q){if(vt.has(Q)){var ut=!1,At=!0,rt=!1,bt=void 0;try{for(var Ot=dt[Symbol.iterator](),Dt;!(At=(Dt=Ot.next()).done);At=!0){var Ft=Dt.value;q.has(Ft)&&(ut=!0)}}catch(Mt){rt=!0,bt=Mt}finally{try{!At&&Ot.return&&Ot.return()}finally{if(rt)throw bt}}if(!ut){var Tt=!1,Nt=void 0;ht.forEach(function(Mt,Pt){Mt.has([].concat(e(dt))[0])&&(Tt=!0,Nt=Pt)}),Tt?dt.forEach(function(Mt){ht[Nt].add(Mt)}):ht.push(new Set(dt))}}}),ht.forEach(function(dt,Q){var ut=1/0,At=1/0,rt=-1/0,bt=-1/0,Ot=!0,Dt=!1,Ft=void 0;try{for(var Tt=dt[Symbol.iterator](),Nt;!(Ot=(Nt=Tt.next()).done);Ot=!0){var Mt=Nt.value,Pt=void 0;Pt=P=="horizontal"?g.has(Mt)?v[g.get(Mt)]:j.get(Mt):g.has(Mt)?T[g.get(Mt)]:j.get(Mt);var Xt=it.get(Mt);Pt<ut&&(ut=Pt),Pt>rt&&(rt=Pt),Xt<At&&(At=Xt),Xt>bt&&(bt=Xt)}}catch($t){Dt=!0,Ft=$t}finally{try{!Ot&&Tt.return&&Tt.return()}finally{if(Dt)throw Ft}}var ne=(ut+rt)/2-(At+bt)/2,ee=!0,qt=!1,Zt=void 0;try{for(var jt=dt[Symbol.iterator](),Jt;!(ee=(Jt=jt.next()).done);ee=!0){var re=Jt.value;it.set(re,it.get(re)+ne)}}catch($t){qt=!0,Zt=$t}finally{try{!ee&&jt.return&&jt.return()}finally{if(qt)throw Zt}}})}return it},J=function(I){var P=0,q=0,j=0,tt=0;if(I.forEach(function(ft){ft.left?v[g.get(ft.left)]-v[g.get(ft.right)]>=0?P++:q++:T[g.get(ft.top)]-T[g.get(ft.bottom)]>=0?j++:tt++}),P>q&&j>tt)for(var Et=0;Et<g.size;Et++)v[Et]=-1*v[Et],T[Et]=-1*T[Et];else if(P>q)for(var yt=0;yt<g.size;yt++)v[yt]=-1*v[yt];else if(j>tt)for(var it=0;it<g.size;it++)T[it]=-1*T[it]},l=function(I){var P=[],q=new a,j=new Set,tt=0;return I.forEach(function(Et,yt){if(!j.has(yt)){P[tt]=[];var it=yt;for(q.push(it),j.add(it),P[tt].push(it);q.length!=0;)it=q.shift(),I.get(it).forEach(function(ft){j.has(ft.id)||(q.push(ft.id),j.add(ft.id),P[tt].push(ft.id))});tt++}}),P},E=function(I){var P=new Map;return I.forEach(function(q,j){P.set(j,[])}),I.forEach(function(q,j){q.forEach(function(tt){P.get(j).push(tt),P.get(tt.id).push({id:j,gap:tt.gap,direction:tt.direction})})}),P},u=function(I){var P=new Map;return I.forEach(function(q,j){P.set(j,[])}),I.forEach(function(q,j){q.forEach(function(tt){P.get(tt.id).push({id:j,gap:tt.gap,direction:tt.direction})})}),P},y=[],m=[],A=!1,w=!1,b=new Set,G=new Map,F=new Map,k=[];if(s.fixedNodeConstraint&&s.fixedNodeConstraint.forEach(function(I){b.add(I.nodeId)}),s.relativePlacementConstraint&&(s.relativePlacementConstraint.forEach(function(I){I.left?(G.has(I.left)?G.get(I.left).push({id:I.right,gap:I.gap,direction:"horizontal"}):G.set(I.left,[{id:I.right,gap:I.gap,direction:"horizontal"}]),G.has(I.right)||G.set(I.right,[])):(G.has(I.top)?G.get(I.top).push({id:I.bottom,gap:I.gap,direction:"vertical"}):G.set(I.top,[{id:I.bottom,gap:I.gap,direction:"vertical"}]),G.has(I.bottom)||G.set(I.bottom,[]))}),F=E(G),k=l(F)),h.TRANSFORM_ON_CONSTRAINT_HANDLING){if(s.fixedNodeConstraint&&s.fixedNodeConstraint.length>1)s.fixedNodeConstraint.forEach(function(I,P){y[P]=[I.position.x,I.position.y],m[P]=[v[g.get(I.nodeId)],T[g.get(I.nodeId)]]}),A=!0;else if(s.alignmentConstraint)(function(){var I=0;if(s.alignmentConstraint.vertical){for(var P=s.alignmentConstraint.vertical,q=function(it){var ft=new Set;P[it].forEach(function(vt){ft.add(vt)});var It=new Set([].concat(e(ft)).filter(function(vt){return b.has(vt)})),wt=void 0;wt=It.size>0?v[g.get(It.values().next().value)]:Z(ft).x,P[it].forEach(function(vt){y[I]=[wt,T[g.get(vt)]],m[I]=[v[g.get(vt)],T[g.get(vt)]],I++})},j=0;j<P.length;j++)q(j);A=!0}if(s.alignmentConstraint.horizontal){for(var tt=s.alignmentConstraint.horizontal,Et=function(it){var ft=new Set;tt[it].forEach(function(vt){ft.add(vt)});var It=new Set([].concat(e(ft)).filter(function(vt){return b.has(vt)})),wt=void 0;wt=It.size>0?v[g.get(It.values().next().value)]:Z(ft).y,tt[it].forEach(function(vt){y[I]=[v[g.get(vt)],wt],m[I]=[v[g.get(vt)],T[g.get(vt)]],I++})},yt=0;yt<tt.length;yt++)Et(yt);A=!0}s.relativePlacementConstraint&&(w=!0)})();else if(s.relativePlacementConstraint){for(var V=0,K=0,H=0;H<k.length;H++)k[H].length>V&&(V=k[H].length,K=H);if(V<F.size/2)J(s.relativePlacementConstraint),A=!1,w=!1;else{var X=new Map,O=new Map,z=[];k[K].forEach(function(I){G.get(I).forEach(function(P){P.direction=="horizontal"?(X.has(I)?X.get(I).push(P):X.set(I,[P]),X.has(P.id)||X.set(P.id,[]),z.push({left:I,right:P.id})):(O.has(I)?O.get(I).push(P):O.set(I,[P]),O.has(P.id)||O.set(P.id,[]),z.push({top:I,bottom:P.id}))})}),J(z),w=!1;var et=D(X,"horizontal"),U=D(O,"vertical");k[K].forEach(function(I,P){m[P]=[v[g.get(I)],T[g.get(I)]],y[P]=[],et.has(I)?y[P][0]=et.get(I):y[P][0]=v[g.get(I)],U.has(I)?y[P][1]=U.get(I):y[P][1]=T[g.get(I)]}),A=!0}}if(A){for(var B=void 0,lt=p.transpose(y),at=p.transpose(m),Lt=0;Lt<lt.length;Lt++)lt[Lt]=p.multGamma(lt[Lt]),at[Lt]=p.multGamma(at[Lt]);var W=p.multMat(lt,p.transpose(at)),pt=o.svd(W);B=p.multMat(pt.V,p.transpose(pt.U));for(var mt=0;mt<g.size;mt++){var Bt=[v[mt],T[mt]],Yt=[B[0][0],B[1][0]],_t=[B[0][1],B[1][1]];v[mt]=p.dotProduct(Bt,Yt),T[mt]=p.dotProduct(Bt,_t)}w&&J(s.relativePlacementConstraint)}}if(h.ENFORCE_CONSTRAINTS){if(s.fixedNodeConstraint&&s.fixedNodeConstraint.length>0){var xt={x:0,y:0};s.fixedNodeConstraint.forEach(function(I,P){var q={x:v[g.get(I.nodeId)],y:T[g.get(I.nodeId)]},j=I.position,tt=$(j,q);xt.x+=tt.x,xt.y+=tt.y}),xt.x/=s.fixedNodeConstraint.length,xt.y/=s.fixedNodeConstraint.length,v.forEach(function(I,P){v[P]+=xt.x}),T.forEach(function(I,P){T[P]+=xt.y}),s.fixedNodeConstraint.forEach(function(I){v[g.get(I.nodeId)]=I.position.x,T[g.get(I.nodeId)]=I.position.y})}if(s.alignmentConstraint){if(s.alignmentConstraint.vertical)for(var kt=s.alignmentConstraint.vertical,Ut=function(I){var P=new Set;kt[I].forEach(function(tt){P.add(tt)});var q=new Set([].concat(e(P)).filter(function(tt){return b.has(tt)})),j=void 0;j=q.size>0?v[g.get(q.values().next().value)]:Z(P).x,P.forEach(function(tt){b.has(tt)||(v[g.get(tt)]=j)})},Rt=0;Rt<kt.length;Rt++)Ut(Rt);if(s.alignmentConstraint.horizontal)for(var Vt=s.alignmentConstraint.horizontal,Gt=function(I){var P=new Set;Vt[I].forEach(function(tt){P.add(tt)});var q=new Set([].concat(e(P)).filter(function(tt){return b.has(tt)})),j=void 0;j=q.size>0?T[g.get(q.values().next().value)]:Z(P).y,P.forEach(function(tt){b.has(tt)||(T[g.get(tt)]=j)})},st=0;st<Vt.length;st++)Gt(st)}s.relativePlacementConstraint&&(function(){var I=new Map,P=new Map,q=new Map,j=new Map,tt=new Map,Et=new Map,yt=new Set,it=new Set;if(b.forEach(function(nt){yt.add(nt),it.add(nt)}),s.alignmentConstraint){if(s.alignmentConstraint.vertical)for(var ft=s.alignmentConstraint.vertical,It=function(nt){q.set("dummy"+nt,[]),ft[nt].forEach(function(Ct){I.set(Ct,"dummy"+nt),q.get("dummy"+nt).push(Ct),b.has(Ct)&&yt.add("dummy"+nt)}),tt.set("dummy"+nt,v[g.get(ft[nt][0])])},wt=0;wt<ft.length;wt++)It(wt);if(s.alignmentConstraint.horizontal)for(var vt=s.alignmentConstraint.horizontal,ht=function(nt){j.set("dummy"+nt,[]),vt[nt].forEach(function(Ct){P.set(Ct,"dummy"+nt),j.get("dummy"+nt).push(Ct),b.has(Ct)&&it.add("dummy"+nt)}),Et.set("dummy"+nt,T[g.get(vt[nt][0])])},dt=0;dt<vt.length;dt++)ht(dt)}var Q=new Map,ut=new Map,At=function(nt){G.get(nt).forEach(function(Ct){var Ht=void 0,zt=void 0;Ct.direction=="horizontal"?(Ht=I.get(nt)?I.get(nt):nt,zt=I.get(Ct.id)?{id:I.get(Ct.id),gap:Ct.gap,direction:Ct.direction}:Ct,Q.has(Ht)?Q.get(Ht).push(zt):Q.set(Ht,[zt]),Q.has(zt.id)||Q.set(zt.id,[])):(Ht=P.get(nt)?P.get(nt):nt,zt=P.get(Ct.id)?{id:P.get(Ct.id),gap:Ct.gap,direction:Ct.direction}:Ct,ut.has(Ht)?ut.get(Ht).push(zt):ut.set(Ht,[zt]),ut.has(zt.id)||ut.set(zt.id,[]))})},rt=!0,bt=!1,Ot=void 0;try{for(var Dt=G.keys()[Symbol.iterator](),Ft;!(rt=(Ft=Dt.next()).done);rt=!0){var Tt=Ft.value;At(Tt)}}catch(nt){bt=!0,Ot=nt}finally{try{!rt&&Dt.return&&Dt.return()}finally{if(bt)throw Ot}}var Nt=E(Q),Mt=E(ut),Pt=l(Nt),Xt=l(Mt),ne=u(Q),ee=u(ut),qt=[],Zt=[];Pt.forEach(function(nt,Ct){qt[Ct]=[],nt.forEach(function(Ht){ne.get(Ht).length==0&&qt[Ct].push(Ht)})}),Xt.forEach(function(nt,Ct){Zt[Ct]=[],nt.forEach(function(Ht){ee.get(Ht).length==0&&Zt[Ct].push(Ht)})});var jt=D(Q,"horizontal",yt,tt,qt),Jt=D(ut,"vertical",it,Et,Zt),re=function(nt){q.get(nt)?q.get(nt).forEach(function(Ct){v[g.get(Ct)]=jt.get(nt)}):v[g.get(nt)]=jt.get(nt)},$t=!0,ve=!1,me=void 0;try{for(var ae=jt.keys()[Symbol.iterator](),ye;!($t=(ye=ae.next()).done);$t=!0){var se=ye.value;re(se)}}catch(nt){ve=!0,me=nt}finally{try{!$t&&ae.return&&ae.return()}finally{if(ve)throw me}}var He=function(nt){j.get(nt)?j.get(nt).forEach(function(Ct){T[g.get(Ct)]=Jt.get(nt)}):T[g.get(nt)]=Jt.get(nt)},he=!0,Ee=!1,Te=void 0;try{for(var le=Jt.keys()[Symbol.iterator](),Ne;!(he=(Ne=le.next()).done);he=!0){var se=Ne.value;He(se)}}catch(nt){Ee=!0,Te=nt}finally{try{!he&&le.return&&le.return()}finally{if(Ee)throw Te}}})()}for(var ot=0;ot<L.length;ot++){var ct=L[ot];ct.getChild()??ct.setCenter(v[g.get(ct.id)],T[g.get(ct.id)])}},r.exports=i}),551:(r=>{r.exports=C})},N={};function f(r){var n=N[r];if(n!==void 0)return n.exports;var t=N[r]={exports:{}};return M[r](t,t.exports,f),t.exports}return f(45)})()})})),si=Ue(de(((_,x)=>{(function(C,M){typeof _=="object"&&typeof x=="object"?x.exports=M(we()):typeof define=="function"&&define.amd?define(["cose-base"],M):typeof _=="object"?_.cytoscapeFcose=M(we()):C.cytoscapeFcose=M(C.coseBase)})(_,function(C){return(()=>{var M={658:(r=>{r.exports=Object.assign==null?function(n){return[...arguments].slice(1).forEach(function(t){Object.keys(t).forEach(function(e){return n[e]=t[e]})}),n}:Object.assign.bind(Object)}),548:((r,n,t)=>{var e=(function(){function p(o,i){var d=[],s=!0,c=!1,g=void 0;try{for(var v=o[Symbol.iterator](),T;!(s=(T=v.next()).done)&&(d.push(T.value),!(i&&d.length===i));s=!0);}catch(L){c=!0,g=L}finally{try{!s&&v.return&&v.return()}finally{if(c)throw g}}return d}return function(o,i){if(Array.isArray(o))return o;if(Symbol.iterator in Object(o))return p(o,i);throw TypeError("Invalid attempt to destructure non-iterable instance")}})(),h=t(140).layoutBase.LinkedList,a={};a.getTopMostNodes=function(p){for(var o={},i=0;i<p.length;i++)o[p[i].id()]=!0;return p.filter(function(d,s){typeof d=="number"&&(d=s);for(var c=d.parent()[0];c!=null;){if(o[c.id()])return!1;c=c.parent()[0]}return!0})},a.connectComponents=function(p,o,i,d){var s=new h,c=new Set,g=[],v=void 0,T=void 0,L=void 0,R=!1,S=1,Y=[],$=[],Z=function(){var D=p.collection();$.push(D);var J=i[0],l=p.collection();l.merge(J).merge(J.descendants().intersection(o)),g.push(J),l.forEach(function(y){s.push(y),c.add(y),D.merge(y)});for(var E=function(){J=s.shift();var y=p.collection();J.neighborhood().nodes().forEach(function(w){o.intersection(J.edgesWith(w)).length>0&&y.merge(w)});for(var m=0;m<y.length;m++){var A=y[m];v=i.intersection(A.union(A.ancestors())),v!=null&&!c.has(v[0])&&v.union(v.descendants()).forEach(function(w){s.push(w),c.add(w),D.merge(w),i.has(w)&&g.push(w)})}};s.length!=0;)E();if(D.forEach(function(y){o.intersection(y.connectedEdges()).forEach(function(m){D.has(m.source())&&D.has(m.target())&&D.merge(m)})}),g.length==i.length&&(R=!0),!R||R&&S>1){T=g[0],L=T.connectedEdges().length,g.forEach(function(y){y.connectedEdges().length<L&&(L=y.connectedEdges().length,T=y)}),Y.push(T.id());var u=p.collection();u.merge(g[0]),g.forEach(function(y){u.merge(y)}),g=[],i=i.difference(u),S++}};do Z();while(!R);return d&&Y.length>0&&d.set("dummy"+(d.size+1),Y),$},a.relocateComponent=function(p,o,i){if(!i.fixedNodeConstraint){var d=1/0,s=-1/0,c=1/0,g=-1/0;if(i.quality=="draft"){var v=!0,T=!1,L=void 0;try{for(var R=o.nodeIndexes[Symbol.iterator](),S;!(v=(S=R.next()).done);v=!0){var Y=S.value,$=e(Y,2),Z=$[0],D=$[1],J=i.cy.getElementById(Z);if(J){var l=J.boundingBox(),E=o.xCoords[D]-l.w/2,u=o.xCoords[D]+l.w/2,y=o.yCoords[D]-l.h/2,m=o.yCoords[D]+l.h/2;E<d&&(d=E),u>s&&(s=u),y<c&&(c=y),m>g&&(g=m)}}}catch(F){T=!0,L=F}finally{try{!v&&R.return&&R.return()}finally{if(T)throw L}}var A=p.x-(s+d)/2,w=p.y-(g+c)/2;o.xCoords=o.xCoords.map(function(F){return F+A}),o.yCoords=o.yCoords.map(function(F){return F+w})}else{Object.keys(o).forEach(function(F){var k=o[F],V=k.getRect().x,K=k.getRect().x+k.getRect().width,H=k.getRect().y,X=k.getRect().y+k.getRect().height;V<d&&(d=V),K>s&&(s=K),H<c&&(c=H),X>g&&(g=X)});var b=p.x-(s+d)/2,G=p.y-(g+c)/2;Object.keys(o).forEach(function(F){var k=o[F];k.setCenter(k.getCenterX()+b,k.getCenterY()+G)})}}},a.calcBoundingBox=function(p,o,i,d){for(var s=9007199254740991,c=-9007199254740991,g=9007199254740991,v=-9007199254740991,T=void 0,L=void 0,R=void 0,S=void 0,Y=p.descendants().not(":parent"),$=Y.length,Z=0;Z<$;Z++){var D=Y[Z];T=o[d.get(D.id())]-D.width()/2,L=o[d.get(D.id())]+D.width()/2,R=i[d.get(D.id())]-D.height()/2,S=i[d.get(D.id())]+D.height()/2,s>T&&(s=T),c<L&&(c=L),g>R&&(g=R),v<S&&(v=S)}var J={};return J.topLeftX=s,J.topLeftY=g,J.width=c-s,J.height=v-g,J},a.calcParentsWithoutChildren=function(p,o){var i=p.collection();return o.nodes(":parent").forEach(function(d){var s=!1;d.children().forEach(function(c){c.css("display")!="none"&&(s=!0)}),s||i.merge(d)}),i},r.exports=a}),816:((r,n,t)=>{var e=t(548),h=t(140).CoSELayout,a=t(140).CoSENode,p=t(140).layoutBase.PointD,o=t(140).layoutBase.DimensionD,i=t(140).layoutBase.LayoutConstants,d=t(140).layoutBase.FDLayoutConstants,s=t(140).CoSEConstants;r.exports={coseLayout:function(c,g){var v=c.cy,T=c.eles,L=T.nodes(),R=T.edges(),S=void 0,Y=void 0,$=void 0,Z={};c.randomize&&(S=g.nodeIndexes,Y=g.xCoords,$=g.yCoords);var D=function(w){return typeof w=="function"},J=function(w,b){return D(w)?w(b):w},l=e.calcParentsWithoutChildren(v,T),E=function w(b,G,F,k){for(var V=G.length,K=0;K<V;K++){var H=G[K],X=null;H.intersection(l).length==0&&(X=H.children());var O=void 0,z=H.layoutDimensions({nodeDimensionsIncludeLabels:k.nodeDimensionsIncludeLabels});if(H.outerWidth()!=null&&H.outerHeight()!=null)if(k.randomize)if(!H.isParent())O=b.add(new a(F.graphManager,new p(Y[S.get(H.id())]-z.w/2,$[S.get(H.id())]-z.h/2),new o(parseFloat(z.w),parseFloat(z.h))));else{var et=e.calcBoundingBox(H,Y,$,S);O=H.intersection(l).length==0?b.add(new a(F.graphManager,new p(et.topLeftX,et.topLeftY),new o(et.width,et.height))):b.add(new a(F.graphManager,new p(et.topLeftX,et.topLeftY),new o(parseFloat(z.w),parseFloat(z.h))))}else O=b.add(new a(F.graphManager,new p(H.position("x")-z.w/2,H.position("y")-z.h/2),new o(parseFloat(z.w),parseFloat(z.h))));else O=b.add(new a(this.graphManager));if(O.id=H.data("id"),O.nodeRepulsion=J(k.nodeRepulsion,H),O.paddingLeft=parseInt(H.css("padding")),O.paddingTop=parseInt(H.css("padding")),O.paddingRight=parseInt(H.css("padding")),O.paddingBottom=parseInt(H.css("padding")),k.nodeDimensionsIncludeLabels&&(O.labelWidth=H.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).w,O.labelHeight=H.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).h,O.labelPosVertical=H.css("text-valign"),O.labelPosHorizontal=H.css("text-halign")),Z[H.data("id")]=O,isNaN(O.rect.x)&&(O.rect.x=0),isNaN(O.rect.y)&&(O.rect.y=0),X!=null&&X.length>0){var U=void 0;U=F.getGraphManager().add(F.newGraph(),O),w(U,X,F,k)}}},u=function(w,b,G){for(var F=0,k=0,V=0;V<G.length;V++){var K=G[V],H=Z[K.data("source")],X=Z[K.data("target")];if(H&&X&&H!==X&&H.getEdgesBetween(X).length==0){var O=b.add(w.newEdge(),H,X);O.id=K.id(),O.idealLength=J(c.idealEdgeLength,K),O.edgeElasticity=J(c.edgeElasticity,K),F+=O.idealLength,k++}}c.idealEdgeLength!=null&&(k>0?s.DEFAULT_EDGE_LENGTH=d.DEFAULT_EDGE_LENGTH=F/k:D(c.idealEdgeLength)?s.DEFAULT_EDGE_LENGTH=d.DEFAULT_EDGE_LENGTH=50:s.DEFAULT_EDGE_LENGTH=d.DEFAULT_EDGE_LENGTH=c.idealEdgeLength,s.MIN_REPULSION_DIST=d.MIN_REPULSION_DIST=d.DEFAULT_EDGE_LENGTH/10,s.DEFAULT_RADIAL_SEPARATION=d.DEFAULT_EDGE_LENGTH)},y=function(w,b){b.fixedNodeConstraint&&(w.constraints.fixedNodeConstraint=b.fixedNodeConstraint),b.alignmentConstraint&&(w.constraints.alignmentConstraint=b.alignmentConstraint),b.relativePlacementConstraint&&(w.constraints.relativePlacementConstraint=b.relativePlacementConstraint)};c.nestingFactor!=null&&(s.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=d.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=c.nestingFactor),c.gravity!=null&&(s.DEFAULT_GRAVITY_STRENGTH=d.DEFAULT_GRAVITY_STRENGTH=c.gravity),c.numIter!=null&&(s.MAX_ITERATIONS=d.MAX_ITERATIONS=c.numIter),c.gravityRange!=null&&(s.DEFAULT_GRAVITY_RANGE_FACTOR=d.DEFAULT_GRAVITY_RANGE_FACTOR=c.gravityRange),c.gravityCompound!=null&&(s.DEFAULT_COMPOUND_GRAVITY_STRENGTH=d.DEFAULT_COMPOUND_GRAVITY_STRENGTH=c.gravityCompound),c.gravityRangeCompound!=null&&(s.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=d.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=c.gravityRangeCompound),c.initialEnergyOnIncremental!=null&&(s.DEFAULT_COOLING_FACTOR_INCREMENTAL=d.DEFAULT_COOLING_FACTOR_INCREMENTAL=c.initialEnergyOnIncremental),c.tilingCompareBy!=null&&(s.TILING_COMPARE_BY=c.tilingCompareBy),c.quality=="proof"?i.QUALITY=2:i.QUALITY=0,s.NODE_DIMENSIONS_INCLUDE_LABELS=d.NODE_DIMENSIONS_INCLUDE_LABELS=i.NODE_DIMENSIONS_INCLUDE_LABELS=c.nodeDimensionsIncludeLabels,s.DEFAULT_INCREMENTAL=d.DEFAULT_INCREMENTAL=i.DEFAULT_INCREMENTAL=!c.randomize,s.ANIMATE=d.ANIMATE=i.ANIMATE=c.animate,s.TILE=c.tile,s.TILING_PADDING_VERTICAL=typeof c.tilingPaddingVertical=="function"?c.tilingPaddingVertical.call():c.tilingPaddingVertical,s.TILING_PADDING_HORIZONTAL=typeof c.tilingPaddingHorizontal=="function"?c.tilingPaddingHorizontal.call():c.tilingPaddingHorizontal,s.DEFAULT_INCREMENTAL=d.DEFAULT_INCREMENTAL=i.DEFAULT_INCREMENTAL=!0,s.PURE_INCREMENTAL=!c.randomize,i.DEFAULT_UNIFORM_LEAF_NODE_SIZES=c.uniformNodeDimensions,c.step=="transformed"&&(s.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,s.ENFORCE_CONSTRAINTS=!1,s.APPLY_LAYOUT=!1),c.step=="enforced"&&(s.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,s.ENFORCE_CONSTRAINTS=!0,s.APPLY_LAYOUT=!1),c.step=="cose"&&(s.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,s.ENFORCE_CONSTRAINTS=!1,s.APPLY_LAYOUT=!0),c.step=="all"&&(c.randomize?s.TRANSFORM_ON_CONSTRAINT_HANDLING=!0:s.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,s.ENFORCE_CONSTRAINTS=!0,s.APPLY_LAYOUT=!0),c.fixedNodeConstraint||c.alignmentConstraint||c.relativePlacementConstraint?s.TREE_REDUCTION_ON_INCREMENTAL=!1:s.TREE_REDUCTION_ON_INCREMENTAL=!0;var m=new h,A=m.newGraphManager();return E(A.addRoot(),e.getTopMostNodes(L),m,c),u(m,A,R),y(m,c),m.runLayout(),Z}}}),212:((r,n,t)=>{var e=(function(){function s(c,g){for(var v=0;v<g.length;v++){var T=g[v];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(c,T.key,T)}}return function(c,g,v){return g&&s(c.prototype,g),v&&s(c,v),c}})();function h(s,c){if(!(s instanceof c))throw TypeError("Cannot call a class as a function")}var a=t(658),p=t(548),o=t(657).spectralLayout,i=t(816).coseLayout,d=Object.freeze({quality:"default",randomize:!0,animate:!0,animationDuration:1e3,animationEasing:void 0,fit:!0,padding:30,nodeDimensionsIncludeLabels:!1,uniformNodeDimensions:!1,packComponents:!0,step:"all",samplingType:!0,sampleSize:25,nodeSeparation:75,piTol:1e-7,nodeRepulsion:function(s){return 4500},idealEdgeLength:function(s){return 50},edgeElasticity:function(s){return .45},nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,tilingCompareBy:void 0,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.3,fixedNodeConstraint:void 0,alignmentConstraint:void 0,relativePlacementConstraint:void 0,ready:function(){},stop:function(){}});r.exports=(function(){function s(c){h(this,s),this.options=a({},d,c)}return e(s,[{key:"run",value:function(){var c=this,g=this.options,v=g.cy,T=g.eles,L=[],R=[],S=void 0,Y=[];g.fixedNodeConstraint&&(!Array.isArray(g.fixedNodeConstraint)||g.fixedNodeConstraint.length==0)&&(g.fixedNodeConstraint=void 0),g.alignmentConstraint&&(g.alignmentConstraint.vertical&&(!Array.isArray(g.alignmentConstraint.vertical)||g.alignmentConstraint.vertical.length==0)&&(g.alignmentConstraint.vertical=void 0),g.alignmentConstraint.horizontal&&(!Array.isArray(g.alignmentConstraint.horizontal)||g.alignmentConstraint.horizontal.length==0)&&(g.alignmentConstraint.horizontal=void 0)),g.relativePlacementConstraint&&(!Array.isArray(g.relativePlacementConstraint)||g.relativePlacementConstraint.length==0)&&(g.relativePlacementConstraint=void 0),(g.fixedNodeConstraint||g.alignmentConstraint||g.relativePlacementConstraint)&&(g.tile=!1,g.packComponents=!1);var $=void 0,Z=!1;if(v.layoutUtilities&&g.packComponents&&($=v.layoutUtilities("get"),$||($=v.layoutUtilities()),Z=!0),T.nodes().length>0)if(Z){var D=p.getTopMostNodes(g.eles.nodes());if(S=p.connectComponents(v,g.eles,D),S.forEach(function(U){var B=U.boundingBox();Y.push({x:B.x1+B.w/2,y:B.y1+B.h/2})}),g.randomize&&S.forEach(function(U){g.eles=U,L.push(o(g))}),g.quality=="default"||g.quality=="proof"){var J=v.collection();if(g.tile){var l=new Map,E=[],u=[],y=0,m={nodeIndexes:l,xCoords:E,yCoords:u},A=[];if(S.forEach(function(U,B){U.edges().length==0&&(U.nodes().forEach(function(lt,at){J.merge(U.nodes()[at]),lt.isParent()||(m.nodeIndexes.set(U.nodes()[at].id(),y++),m.xCoords.push(U.nodes()[0].position().x),m.yCoords.push(U.nodes()[0].position().y))}),A.push(B))}),J.length>1){var w=J.boundingBox();Y.push({x:w.x1+w.w/2,y:w.y1+w.h/2}),S.push(J),L.push(m);for(var b=A.length-1;b>=0;b--)S.splice(A[b],1),L.splice(A[b],1),Y.splice(A[b],1)}}S.forEach(function(U,B){g.eles=U,R.push(i(g,L[B])),p.relocateComponent(Y[B],R[B],g)})}else S.forEach(function(U,B){p.relocateComponent(Y[B],L[B],g)});var G=new Set;if(S.length>1){var F=[],k=T.filter(function(U){return U.css("display")=="none"});S.forEach(function(U,B){var lt=void 0;if(g.quality=="draft"&&(lt=L[B].nodeIndexes),U.nodes().not(k).length>0){var at={};at.edges=[],at.nodes=[];var Lt=void 0;U.nodes().not(k).forEach(function(W){if(g.quality=="draft")if(!W.isParent())Lt=lt.get(W.id()),at.nodes.push({x:L[B].xCoords[Lt]-W.boundingbox().w/2,y:L[B].yCoords[Lt]-W.boundingbox().h/2,width:W.boundingbox().w,height:W.boundingbox().h});else{var pt=p.calcBoundingBox(W,L[B].xCoords,L[B].yCoords,lt);at.nodes.push({x:pt.topLeftX,y:pt.topLeftY,width:pt.width,height:pt.height})}else R[B][W.id()]&&at.nodes.push({x:R[B][W.id()].getLeft(),y:R[B][W.id()].getTop(),width:R[B][W.id()].getWidth(),height:R[B][W.id()].getHeight()})}),U.edges().forEach(function(W){var pt=W.source(),mt=W.target();if(pt.css("display")!="none"&&mt.css("display")!="none")if(g.quality=="draft"){var Bt=lt.get(pt.id()),Yt=lt.get(mt.id()),_t=[],xt=[];if(pt.isParent()){var kt=p.calcBoundingBox(pt,L[B].xCoords,L[B].yCoords,lt);_t.push(kt.topLeftX+kt.width/2),_t.push(kt.topLeftY+kt.height/2)}else _t.push(L[B].xCoords[Bt]),_t.push(L[B].yCoords[Bt]);if(mt.isParent()){var Ut=p.calcBoundingBox(mt,L[B].xCoords,L[B].yCoords,lt);xt.push(Ut.topLeftX+Ut.width/2),xt.push(Ut.topLeftY+Ut.height/2)}else xt.push(L[B].xCoords[Yt]),xt.push(L[B].yCoords[Yt]);at.edges.push({startX:_t[0],startY:_t[1],endX:xt[0],endY:xt[1]})}else R[B][pt.id()]&&R[B][mt.id()]&&at.edges.push({startX:R[B][pt.id()].getCenterX(),startY:R[B][pt.id()].getCenterY(),endX:R[B][mt.id()].getCenterX(),endY:R[B][mt.id()].getCenterY()})}),at.nodes.length>0&&(F.push(at),G.add(B))}});var V=$.packComponents(F,g.randomize).shifts;if(g.quality=="draft")L.forEach(function(U,B){var lt=U.xCoords.map(function(Lt){return Lt+V[B].dx}),at=U.yCoords.map(function(Lt){return Lt+V[B].dy});U.xCoords=lt,U.yCoords=at});else{var K=0;G.forEach(function(U){Object.keys(R[U]).forEach(function(B){var lt=R[U][B];lt.setCenter(lt.getCenterX()+V[K].dx,lt.getCenterY()+V[K].dy)}),K++})}}}else{var H=g.eles.boundingBox();if(Y.push({x:H.x1+H.w/2,y:H.y1+H.h/2}),g.randomize){var X=o(g);L.push(X)}g.quality=="default"||g.quality=="proof"?(R.push(i(g,L[0])),p.relocateComponent(Y[0],R[0],g)):p.relocateComponent(Y[0],L[0],g)}var O=function(U,B){if(g.quality=="default"||g.quality=="proof"){typeof U=="number"&&(U=B);var lt=void 0,at=void 0,Lt=U.data("id");return R.forEach(function(pt){Lt in pt&&(lt={x:pt[Lt].getRect().getCenterX(),y:pt[Lt].getRect().getCenterY()},at=pt[Lt])}),g.nodeDimensionsIncludeLabels&&(at.labelWidth&&(at.labelPosHorizontal=="left"?lt.x+=at.labelWidth/2:at.labelPosHorizontal=="right"&&(lt.x-=at.labelWidth/2)),at.labelHeight&&(at.labelPosVertical=="top"?lt.y+=at.labelHeight/2:at.labelPosVertical=="bottom"&&(lt.y-=at.labelHeight/2))),lt??(lt={x:U.position("x"),y:U.position("y")}),{x:lt.x,y:lt.y}}else{var W=void 0;return L.forEach(function(pt){var mt=pt.nodeIndexes.get(U.id());mt!=null&&(W={x:pt.xCoords[mt],y:pt.yCoords[mt]})}),W??(W={x:U.position("x"),y:U.position("y")}),{x:W.x,y:W.y}}};if(g.quality=="default"||g.quality=="proof"||g.randomize){var z=p.calcParentsWithoutChildren(v,T),et=T.filter(function(U){return U.css("display")=="none"});g.eles=T.not(et),T.nodes().not(":parent").not(et).layoutPositions(c,g,O),z.length>0&&z.forEach(function(U){U.position(O(U))})}else console.log("If randomize option is set to false, then quality option must be 'default' or 'proof'.")}}]),s})()}),657:((r,n,t)=>{var e=t(548),h=t(140).layoutBase.Matrix,a=t(140).layoutBase.SVD;r.exports={spectralLayout:function(p){var o=p.cy,i=p.eles,d=i.nodes(),s=i.nodes(":parent"),c=new Map,g=new Map,v=new Map,T=[],L=[],R=[],S=[],Y=[],$=[],Z=[],D=[],J=void 0,l=1e8,E=1e-9,u=p.piTol,y=p.samplingType,m=p.nodeSeparation,A=void 0,w=function(){for(var st=0,ot=0,ct=!1;ot<A;){st=Math.floor(Math.random()*J),ct=!1;for(var I=0;I<ot;I++)if(S[I]==st){ct=!0;break}if(!ct)S[ot]=st,ot++;else continue}},b=function(st,ot,ct){for(var I=[],P=0,q=0,j=0,tt=void 0,Et=[],yt=0,it=1,ft=0;ft<J;ft++)Et[ft]=l;for(I[q]=st,Et[st]=0;q>=P;){j=I[P++];for(var It=T[j],wt=0;wt<It.length;wt++)tt=g.get(It[wt]),Et[tt]==l&&(Et[tt]=Et[j]+1,I[++q]=tt);$[j][ot]=Et[j]*m}if(ct){for(var vt=0;vt<J;vt++)$[vt][ot]<Y[vt]&&(Y[vt]=$[vt][ot]);for(var ht=0;ht<J;ht++)Y[ht]>yt&&(yt=Y[ht],it=ht)}return it},G=function(st){var ot=void 0;if(st){ot=Math.floor(Math.random()*J);for(var ct=0;ct<J;ct++)Y[ct]=l;for(var I=0;I<A;I++)S[I]=ot,ot=b(ot,I,st)}else{w();for(var P=0;P<A;P++)b(S[P],P,st,!1)}for(var q=0;q<J;q++)for(var j=0;j<A;j++)$[q][j]*=$[q][j];for(var tt=0;tt<A;tt++)Z[tt]=[];for(var Et=0;Et<A;Et++)for(var yt=0;yt<A;yt++)Z[Et][yt]=$[S[yt]][Et]},F=function(){for(var st=a.svd(Z),ot=st.S,ct=st.U,I=st.V,P=ot[0]*ot[0]*ot[0],q=[],j=0;j<A;j++){q[j]=[];for(var tt=0;tt<A;tt++)q[j][tt]=0,j==tt&&(q[j][tt]=ot[j]/(ot[j]*ot[j]+P/(ot[j]*ot[j])))}D=h.multMat(h.multMat(I,q),h.transpose(ct))},k=function(){for(var st=void 0,ot=void 0,ct=[],I=[],P=[],q=[],j=0;j<J;j++)ct[j]=Math.random(),I[j]=Math.random();ct=h.normalize(ct),I=h.normalize(I);for(var tt=0,Et=E,yt=E,it=void 0;;){tt++;for(var ft=0;ft<J;ft++)P[ft]=ct[ft];if(ct=h.multGamma(h.multL(h.multGamma(P),$,D)),st=h.dotProduct(P,ct),ct=h.normalize(ct),Et=h.dotProduct(P,ct),it=Math.abs(Et/yt),it<=1+u&&it>=1)break;yt=Et}for(var It=0;It<J;It++)P[It]=ct[It];for(tt=0,yt=E;;){tt++;for(var wt=0;wt<J;wt++)q[wt]=I[wt];if(q=h.minusOp(q,h.multCons(P,h.dotProduct(P,q))),I=h.multGamma(h.multL(h.multGamma(q),$,D)),ot=h.dotProduct(q,I),I=h.normalize(I),Et=h.dotProduct(q,I),it=Math.abs(Et/yt),it<=1+u&&it>=1)break;yt=Et}for(var vt=0;vt<J;vt++)q[vt]=I[vt];L=h.multCons(P,Math.sqrt(Math.abs(st))),R=h.multCons(q,Math.sqrt(Math.abs(ot)))};e.connectComponents(o,i,e.getTopMostNodes(d),c),s.forEach(function(st){e.connectComponents(o,i,e.getTopMostNodes(st.descendants().intersection(i)),c)});for(var V=0,K=0;K<d.length;K++)d[K].isParent()||g.set(d[K].id(),V++);var H=!0,X=!1,O=void 0;try{for(var z=c.keys()[Symbol.iterator](),et;!(H=(et=z.next()).done);H=!0){var U=et.value;g.set(U,V++)}}catch(st){X=!0,O=st}finally{try{!H&&z.return&&z.return()}finally{if(X)throw O}}for(var B=0;B<g.size;B++)T[B]=[];s.forEach(function(st){for(var ot=st.children().intersection(i);ot.nodes(":childless").length==0;)ot=ot.nodes()[0].children().intersection(i);var ct=0,I=ot.nodes(":childless")[0].connectedEdges().length;ot.nodes(":childless").forEach(function(P,q){P.connectedEdges().length<I&&(I=P.connectedEdges().length,ct=q)}),v.set(st.id(),ot.nodes(":childless")[ct].id())}),d.forEach(function(st){var ot=void 0;ot=st.isParent()?g.get(v.get(st.id())):g.get(st.id()),st.neighborhood().nodes().forEach(function(ct){i.intersection(st.edgesWith(ct)).length>0&&(ct.isParent()?T[ot].push(v.get(ct.id())):T[ot].push(ct.id()))})});var lt=function(st){var ot=g.get(st),ct=void 0;c.get(st).forEach(function(I){ct=o.getElementById(I).isParent()?v.get(I):I,T[ot].push(ct),T[g.get(ct)].push(st)})},at=!0,Lt=!1,W=void 0;try{for(var pt=c.keys()[Symbol.iterator](),mt;!(at=(mt=pt.next()).done);at=!0){var Bt=mt.value;lt(Bt)}}catch(st){Lt=!0,W=st}finally{try{!at&&pt.return&&pt.return()}finally{if(Lt)throw W}}J=g.size;var Yt=void 0;if(J>2){A=J<p.sampleSize?J:p.sampleSize;for(var _t=0;_t<J;_t++)$[_t]=[];for(var xt=0;xt<A;xt++)D[xt]=[];return p.quality=="draft"||p.step=="all"?(G(y),F(),k(),Yt={nodeIndexes:g,xCoords:L,yCoords:R}):(g.forEach(function(st,ot){L.push(o.getElementById(ot).position("x")),R.push(o.getElementById(ot).position("y"))}),Yt={nodeIndexes:g,xCoords:L,yCoords:R}),Yt}else{var kt=g.keys(),Ut=o.getElementById(kt.next().value),Rt=Ut.position(),Vt=Ut.outerWidth();if(L.push(Rt.x),R.push(Rt.y),J==2){var Gt=o.getElementById(kt.next().value).outerWidth();L.push(Rt.x+Vt/2+Gt/2+p.idealEdgeLength),R.push(Rt.y)}return Yt={nodeIndexes:g,xCoords:L,yCoords:R},Yt}}}}),579:((r,n,t)=>{var e=t(212),h=function(a){a&&a("layout","fcose",e)};typeof cytoscape<"u"&&h(cytoscape),r.exports=h}),140:(r=>{r.exports=C})},N={};function f(r){var n=N[r];if(n!==void 0)return n.exports;var t=N[r]={exports:{}};return M[r](t,t.exports,f),t.exports}return f(579)})()})}))(),1),Ie={L:"left",R:"right",T:"top",B:"bottom"},_e={L:gt(_=>`${_},${_/2} 0,${_} 0,0`,"L"),R:gt(_=>`0,${_/2} ${_},0 ${_},${_}`,"R"),T:gt(_=>`0,0 ${_},0 ${_/2},${_}`,"T"),B:gt(_=>`${_/2},0 ${_},${_} 0,${_}`,"B")},oe={L:gt((_,x)=>_-x+2,"L"),R:gt((_,x)=>_-2,"R"),T:gt((_,x)=>_-x+2,"T"),B:gt((_,x)=>_-2,"B")},hi=gt(function(_){return St(_)?_==="L"?"R":"L":_==="T"?"B":"T"},"getOppositeArchitectureDirection"),xe=gt(function(_){let x=_;return x==="L"||x==="R"||x==="T"||x==="B"},"isArchitectureDirection"),St=gt(function(_){let x=_;return x==="L"||x==="R"},"isArchitectureDirectionX"),Wt=gt(function(_){let x=_;return x==="T"||x==="B"},"isArchitectureDirectionY"),fe=gt(function(_,x){let C=St(_)&&Wt(x),M=Wt(_)&&St(x);return C||M},"isArchitectureDirectionXY"),li=gt(function(_){let x=_[0],C=_[1],M=St(x)&&Wt(C),N=Wt(x)&&St(C);return M||N},"isArchitecturePairXY"),di=gt(function(_){return _!=="LL"&&_!=="RR"&&_!=="TT"&&_!=="BB"},"isValidArchitectureDirectionPair"),pe=gt(function(_,x){let C=`${_}${x}`;return di(C)?C:void 0},"getArchitectureDirectionPair"),gi=gt(function([_,x],C){let M=C[0],N=C[1];return St(M)?Wt(N)?[_+(M==="L"?-1:1),x+(N==="T"?1:-1)]:[_+(M==="L"?-1:1),x]:St(N)?[_+(N==="L"?1:-1),x+(M==="T"?1:-1)]:[_,x+(M==="T"?1:-1)]},"shiftPositionByArchitectureDirectionPair"),ci=gt(function(_){return _==="LT"||_==="TL"?[1,1]:_==="BL"||_==="LB"?[1,-1]:_==="BR"||_==="RB"?[-1,-1]:[-1,1]},"getArchitectureDirectionXYFactors"),ui=gt(function(_,x){return fe(_,x)?"bend":St(_)?"horizontal":"vertical"},"getArchitectureDirectionAlignment"),fi=gt(function(_){return _.type==="service"},"isArchitectureService"),pi=gt(function(_){return _.type==="junction"},"isArchitectureJunction"),Me=gt(_=>_.data(),"edgeData"),Kt=gt(_=>_.data(),"nodeData"),vi=Ke.architecture,Oe=(te=class{constructor(){this.nodes={},this.groups={},this.edges=[],this.registeredIds={},this.elements={},this.setAccTitle=Ve,this.getAccTitle=Qe,this.setDiagramTitle=qe,this.getDiagramTitle=We,this.getAccDescription=Ze,this.setAccDescription=ei,this.clear()}clear(){this.nodes={},this.groups={},this.edges=[],this.registeredIds={},this.dataStructures=void 0,this.elements={},Je()}addService({id:x,icon:C,in:M,title:N,iconText:f}){if(this.registeredIds[x]!==void 0)throw Error(`The service id [${x}] is already in use by another ${this.registeredIds[x]}`);if(M!==void 0){if(x===M)throw Error(`The service [${x}] cannot be placed within itself`);if(this.registeredIds[M]===void 0)throw Error(`The service [${x}]'s parent does not exist. Please make sure the parent is created before this service`);if(this.registeredIds[M]==="node")throw Error(`The service [${x}]'s parent is not a group`)}this.registeredIds[x]="node",this.nodes[x]={id:x,type:"service",icon:C,iconText:f,title:N,edges:[],in:M}}getServices(){return Object.values(this.nodes).filter(fi)}addJunction({id:x,in:C}){this.registeredIds[x]="node",this.nodes[x]={id:x,type:"junction",edges:[],in:C}}getJunctions(){return Object.values(this.nodes).filter(pi)}getNodes(){return Object.values(this.nodes)}getNode(x){return this.nodes[x]??null}addGroup({id:x,icon:C,in:M,title:N}){var f,r,n;if(((f=this.registeredIds)==null?void 0:f[x])!==void 0)throw Error(`The group id [${x}] is already in use by another ${this.registeredIds[x]}`);if(M!==void 0){if(x===M)throw Error(`The group [${x}] cannot be placed within itself`);if(((r=this.registeredIds)==null?void 0:r[M])===void 0)throw Error(`The group [${x}]'s parent does not exist. Please make sure the parent is created before this group`);if(((n=this.registeredIds)==null?void 0:n[M])==="node")throw Error(`The group [${x}]'s parent is not a group`)}this.registeredIds[x]="group",this.groups[x]={id:x,icon:C,title:N,in:M}}getGroups(){return Object.values(this.groups)}addEdge({lhsId:x,rhsId:C,lhsDir:M,rhsDir:N,lhsInto:f,rhsInto:r,lhsGroup:n,rhsGroup:t,title:e}){if(!xe(M))throw Error(`Invalid direction given for left hand side of edge ${x}--${C}. Expected (L,R,T,B) got ${String(M)}`);if(!xe(N))throw Error(`Invalid direction given for right hand side of edge ${x}--${C}. Expected (L,R,T,B) got ${String(N)}`);if(this.nodes[x]===void 0&&this.groups[x]===void 0)throw Error(`The left-hand id [${x}] does not yet exist. Please create the service/group before declaring an edge to it.`);if(this.nodes[C]===void 0&&this.groups[C]===void 0)throw Error(`The right-hand id [${C}] does not yet exist. Please create the service/group before declaring an edge to it.`);let h=this.nodes[x].in,a=this.nodes[C].in;if(n&&h&&a&&h==a)throw Error(`The left-hand id [${x}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);if(t&&h&&a&&h==a)throw Error(`The right-hand id [${C}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);let p={lhsId:x,lhsDir:M,lhsInto:f,lhsGroup:n,rhsId:C,rhsDir:N,rhsInto:r,rhsGroup:t,title:e};this.edges.push(p),this.nodes[x]&&this.nodes[C]&&(this.nodes[x].edges.push(this.edges[this.edges.length-1]),this.nodes[C].edges.push(this.edges[this.edges.length-1]))}getEdges(){return this.edges}getDataStructures(){if(this.dataStructures===void 0){let x={},C=Object.entries(this.nodes).reduce((t,[e,h])=>(t[e]=h.edges.reduce((a,p)=>{var d,s;let o=(d=this.getNode(p.lhsId))==null?void 0:d.in,i=(s=this.getNode(p.rhsId))==null?void 0:s.in;if(o&&i&&o!==i){let c=ui(p.lhsDir,p.rhsDir);c!=="bend"&&(x[o]??(x[o]={}),x[o][i]=c,x[i]??(x[i]={}),x[i][o]=c)}if(p.lhsId===e){let c=pe(p.lhsDir,p.rhsDir);c&&(a[c]=p.rhsId)}else{let c=pe(p.rhsDir,p.lhsDir);c&&(a[c]=p.lhsId)}return a},{}),t),{}),M=Object.keys(C)[0],N={[M]:1},f=Object.keys(C).reduce((t,e)=>e===M?t:{...t,[e]:1},{}),r=gt(t=>{let e={[t]:[0,0]},h=[t];for(;h.length>0;){let a=h.shift();if(a){N[a]=1,delete f[a];let p=C[a],[o,i]=e[a];Object.entries(p).forEach(([d,s])=>{N[s]||(e[s]=gi([o,i],d),h.push(s))})}}return e},"BFS"),n=[r(M)];for(;Object.keys(f).length>0;)n.push(r(Object.keys(f)[0]));this.dataStructures={adjList:C,spatialMaps:n,groupAlignments:x}}return this.dataStructures}setElementForId(x,C){this.elements[x]=C}getElementById(x){return this.elements[x]}getConfig(){return Be({...vi,...ti().architecture})}getConfigField(x){return this.getConfig()[x]}},gt(te,"ArchitectureDB"),te),mi=gt((_,x)=>{ni(_,x),_.groups.map(C=>x.addGroup(C)),_.services.map(C=>x.addService({...C,type:"service"})),_.junctions.map(C=>x.addJunction({...C,type:"junction"})),_.edges.map(C=>x.addEdge(C))},"populateDb"),De={parser:{yy:void 0},parse:gt(async _=>{var M;let x=await ai("architecture",_);Ae.debug(x);let C=(M=De.parser)==null?void 0:M.yy;if(!(C instanceof Oe))throw Error("parser.parser?.yy was not a ArchitectureDB. This is due to a bug within Mermaid, please report this issue at https://github.com/mermaid-js/mermaid/issues.");mi(x,C)},"parse")},yi=gt(_=>`
  .edge {
    stroke-width: ${_.archEdgeWidth};
    stroke: ${_.archEdgeColor};
    fill: none;
  }

  .arrow {
    fill: ${_.archEdgeArrowColor};
  }

  .node-bkg {
    fill: none;
    stroke: ${_.archGroupBorderColor};
    stroke-width: ${_.archGroupBorderWidth};
    stroke-dasharray: 8;
  }
  .node-icon-text {
    display: flex; 
    align-items: center;
  }
  
  .node-icon-text > div {
    color: #fff;
    margin: 1px;
    height: fit-content;
    text-align: center;
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
  }
`,"getStyles"),Qt=gt(_=>`<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/>${_}</g>`,"wrapIcon"),ie={prefix:"mermaid-architecture",height:80,width:80,icons:{database:{body:Qt('<path id="b" data-name="4" d="m20,57.86c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="c" data-name="3" d="m20,45.95c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="d" data-name="2" d="m20,34.05c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse id="e" data-name="1" cx="40" cy="22.14" rx="20" ry="7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="20" y1="57.86" x2="20" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="60" y1="57.86" x2="60" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},server:{body:Qt('<rect x="17.5" y="17.5" width="45" height="45" rx="2" ry="2" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="32.5" x2="62.5" y2="32.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="47.5" x2="62.5" y2="47.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><g><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g>')},disk:{body:Qt('<rect x="20" y="15" width="40" height="50" rx="1" ry="1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="14" ry="14.58" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="4" ry="4.17" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m37.51,42.52l-4.83,13.22c-.26.71-1.1,1.02-1.76.64l-4.18-2.42c-.66-.38-.81-1.26-.33-1.84l9.01-10.8c.88-1.05,2.56-.08,2.09,1.2Z" style="fill: #fff; stroke-width: 0px;"/>')},internet:{body:Qt('<circle cx="40" cy="40" r="22.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="40" y1="17.5" x2="40" y2="62.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="40" x2="62.5" y2="40" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m39.99,17.51c-15.28,11.1-15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m40.01,17.51c15.28,11.1,15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="30.1" x2="60.25" y2="30.1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="49.9" x2="60.25" y2="49.9" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},cloud:{body:Qt('<path d="m65,47.5c0,2.76-2.24,5-5,5H20c-2.76,0-5-2.24-5-5,0-1.87,1.03-3.51,2.56-4.36-.04-.21-.06-.42-.06-.64,0-2.6,2.48-4.74,5.65-4.97,1.65-4.51,6.34-7.76,11.85-7.76.86,0,1.69.08,2.5.23,2.09-1.57,4.69-2.5,7.5-2.5,6.1,0,11.19,4.38,12.28,10.17,2.14.56,3.72,2.51,3.72,4.83,0,.03,0,.07-.01.1,2.29.46,4.01,2.48,4.01,4.9Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},unknown:oi,blank:{body:Qt("")}}},Ei=gt(async function(_,x,C){let M=C.getConfigField("padding"),N=C.getConfigField("iconSize"),f=N/2,r=N/6,n=r/2;await Promise.all(x.edges().map(async t=>{var $,Z;let{source:e,sourceDir:h,sourceArrow:a,sourceGroup:p,target:o,targetDir:i,targetArrow:d,targetGroup:s,label:c}=Me(t),{x:g,y:v}=t[0].sourceEndpoint(),{x:T,y:L}=t[0].midpoint(),{x:R,y:S}=t[0].targetEndpoint(),Y=M+4;if(p&&(St(h)?g+=h==="L"?-Y:Y:v+=h==="T"?-Y:Y+18),s&&(St(i)?R+=i==="L"?-Y:Y:S+=i==="T"?-Y:Y+18),!p&&(($=C.getNode(e))==null?void 0:$.type)==="junction"&&(St(h)?g+=h==="L"?f:-f:v+=h==="T"?f:-f),!s&&((Z=C.getNode(o))==null?void 0:Z.type)==="junction"&&(St(i)?R+=i==="L"?f:-f:S+=i==="T"?f:-f),t[0]._private.rscratch){let D=_.insert("g");if(D.insert("path").attr("d",`M ${g},${v} L ${T},${L} L${R},${S} `).attr("class","edge").attr("id",ze(e,o,{prefix:"L"})),a){let J=St(h)?oe[h](g,r):g-n,l=Wt(h)?oe[h](v,r):v-n;D.insert("polygon").attr("points",_e[h](r)).attr("transform",`translate(${J},${l})`).attr("class","arrow")}if(d){let J=St(i)?oe[i](R,r):R-n,l=Wt(i)?oe[i](S,r):S-n;D.insert("polygon").attr("points",_e[i](r)).attr("transform",`translate(${J},${l})`).attr("class","arrow")}if(c){let J=fe(h,i)?"XY":St(h)?"X":"Y",l=0;l=J==="X"?Math.abs(g-R):J==="Y"?Math.abs(v-S)/1.5:Math.abs(g-R)/2;let E=D.append("g");if(await ce(E,c,{useHtmlLabels:!1,width:l,classes:"architecture-service-label"},ge()),E.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),J==="X")E.attr("transform","translate("+T+", "+L+")");else if(J==="Y")E.attr("transform","translate("+T+", "+L+") rotate(-90)");else if(J==="XY"){let u=pe(h,i);if(u&&li(u)){let y=E.node().getBoundingClientRect(),[m,A]=ci(u);E.attr("dominant-baseline","auto").attr("transform",`rotate(${-1*m*A*45})`);let w=E.node().getBoundingClientRect();E.attr("transform",`
                translate(${T}, ${L-y.height/2})
                translate(${m*w.width/2}, ${A*w.height/2})
                rotate(${-1*m*A*45}, 0, ${y.height/2})
              `)}}}}}))},"drawEdges"),Ti=gt(async function(_,x,C){let M=C.getConfigField("padding")*.75,N=C.getConfigField("fontSize"),f=C.getConfigField("iconSize")/2;await Promise.all(x.nodes().map(async r=>{let n=Kt(r);if(n.type==="group"){let{h:t,w:e,x1:h,y1:a}=r.boundingBox(),p=_.append("rect");p.attr("id",`group-${n.id}`).attr("x",h+f).attr("y",a+f).attr("width",e).attr("height",t).attr("class","node-bkg");let o=_.append("g"),i=h,d=a;if(n.icon){let s=o.append("g");s.html(`<g>${await ue(n.icon,{height:M,width:M,fallbackPrefix:ie.prefix})}</g>`),s.attr("transform","translate("+(i+f+1)+", "+(d+f+1)+")"),i+=M,d+=N/2-1-2}if(n.label){let s=o.append("g");await ce(s,n.label,{useHtmlLabels:!1,width:e,classes:"architecture-service-label"},ge()),s.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","start").attr("text-anchor","start"),s.attr("transform","translate("+(i+f+4)+", "+(d+f+2)+")")}C.setElementForId(n.id,p)}}))},"drawGroups"),Ni=gt(async function(_,x,C){let M=ge();for(let N of C){let f=x.append("g"),r=_.getConfigField("iconSize");if(N.title){let h=f.append("g");await ce(h,N.title,{useHtmlLabels:!1,width:r*1.5,classes:"architecture-service-label"},M),h.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),h.attr("transform","translate("+r/2+", "+r+")")}let n=f.append("g");if(N.icon)n.html(`<g>${await ue(N.icon,{height:r,width:r,fallbackPrefix:ie.prefix})}</g>`);else if(N.iconText){n.html(`<g>${await ue("blank",{height:r,width:r,fallbackPrefix:ie.prefix})}</g>`);let h=n.append("g").append("foreignObject").attr("width",r).attr("height",r).append("div").attr("class","node-icon-text").attr("style",`height: ${r}px;`).append("div").html($e(N.iconText,M)),a=parseInt(window.getComputedStyle(h.node(),null).getPropertyValue("font-size").replace(/\D/g,""))??16;h.attr("style",`-webkit-line-clamp: ${Math.floor((r-2)/a)};`)}else n.append("path").attr("class","node-bkg").attr("id","node-"+N.id).attr("d",`M0 ${r} v${-r} q0,-5 5,-5 h${r} q5,0 5,5 v${r} H0 Z`);f.attr("id",`service-${N.id}`).attr("class","architecture-service");let{width:t,height:e}=f.node().getBBox();N.width=t,N.height=e,_.setElementForId(N.id,f)}return 0},"drawServices"),Ai=gt(function(_,x,C){C.forEach(M=>{let N=x.append("g"),f=_.getConfigField("iconSize");N.append("g").append("rect").attr("id","node-"+M.id).attr("fill-opacity","0").attr("width",f).attr("height",f),N.attr("class","architecture-junction");let{width:r,height:n}=N._groups[0][0].getBBox();N.width=r,N.height=n,_.setElementForId(M.id,N)})},"drawJunctions");ri([{name:ie.prefix,icons:ie}]),Ce.use(si.default);function Re(_,x,C){_.forEach(M=>{x.add({group:"nodes",data:{type:"service",id:M.id,icon:M.icon,label:M.title,parent:M.in,width:C.getConfigField("iconSize"),height:C.getConfigField("iconSize")},classes:"node-service"})})}gt(Re,"addServices");function be(_,x,C){_.forEach(M=>{x.add({group:"nodes",data:{type:"junction",id:M.id,parent:M.in,width:C.getConfigField("iconSize"),height:C.getConfigField("iconSize")},classes:"node-junction"})})}gt(be,"addJunctions");function Fe(_,x){x.nodes().map(C=>{let M=Kt(C);M.type!=="group"&&(M.x=C.position().x,M.y=C.position().y,_.getElementById(M.id).attr("transform","translate("+(M.x||0)+","+(M.y||0)+")"))})}gt(Fe,"positionNodes");function Ge(_,x){_.forEach(C=>{x.add({group:"nodes",data:{type:"group",id:C.id,icon:C.icon,label:C.title,parent:C.in},classes:"node-group"})})}gt(Ge,"addGroups");function Pe(_,x){_.forEach(C=>{let{lhsId:M,rhsId:N,lhsInto:f,lhsGroup:r,rhsInto:n,lhsDir:t,rhsDir:e,rhsGroup:h,title:a}=C,p=fe(C.lhsDir,C.rhsDir)?"segments":"straight",o={id:`${M}-${N}`,label:a,source:M,sourceDir:t,sourceArrow:f,sourceGroup:r,sourceEndpoint:t==="L"?"0 50%":t==="R"?"100% 50%":t==="T"?"50% 0":"50% 100%",target:N,targetDir:e,targetArrow:n,targetGroup:h,targetEndpoint:e==="L"?"0 50%":e==="R"?"100% 50%":e==="T"?"50% 0":"50% 100%"};x.add({group:"edges",data:o,classes:p})})}gt(Pe,"addEdges");function Se(_,x,C){let M=gt((r,n)=>Object.entries(r).reduce((t,[e,h])=>{var o;let a=0,p=Object.entries(h);if(p.length===1)return t[e]=p[0][1],t;for(let i=0;i<p.length-1;i++)for(let d=i+1;d<p.length;d++){let[s,c]=p[i],[g,v]=p[d];if(((o=C[s])==null?void 0:o[g])===n)t[e]??(t[e]=[]),t[e]=[...t[e],...c,...v];else if(s==="default"||g==="default")t[e]??(t[e]=[]),t[e]=[...t[e],...c,...v];else{let T=`${e}-${a++}`;t[T]=c;let L=`${e}-${a++}`;t[L]=v}}return t},{}),"flattenAlignments"),[N,f]=x.map(r=>{let n={},t={};return Object.entries(r).forEach(([e,[h,a]])=>{var o,i,d;let p=((o=_.getNode(e))==null?void 0:o.in)??"default";n[a]??(n[a]={}),(i=n[a])[p]??(i[p]=[]),n[a][p].push(e),t[h]??(t[h]={}),(d=t[h])[p]??(d[p]=[]),t[h][p].push(e)}),{horiz:Object.values(M(n,"horizontal")).filter(e=>e.length>1),vert:Object.values(M(t,"vertical")).filter(e=>e.length>1)}}).reduce(([r,n],{horiz:t,vert:e})=>[[...r,...t],[...n,...e]],[[],[]]);return{horizontal:N,vertical:f}}gt(Se,"getAlignments");function Ye(_,x){let C=[],M=gt(f=>`${f[0]},${f[1]}`,"posToStr"),N=gt(f=>f.split(",").map(r=>parseInt(r)),"strToPos");return _.forEach(f=>{let r=Object.fromEntries(Object.entries(f).map(([h,a])=>[M(a),h])),n=[M([0,0])],t={},e={L:[-1,0],R:[1,0],T:[0,1],B:[0,-1]};for(;n.length>0;){let h=n.shift();if(h){t[h]=1;let a=r[h];if(a){let p=N(h);Object.entries(e).forEach(([o,i])=>{let d=M([p[0]+i[0],p[1]+i[1]]),s=r[d];s&&!t[d]&&(n.push(d),C.push({[Ie[o]]:s,[Ie[hi(o)]]:a,gap:1.5*x.getConfigField("iconSize")}))})}}}}),C}gt(Ye,"getRelativeConstraints");function ke(_,x,C,M,N,{spatialMaps:f,groupAlignments:r}){return new Promise(n=>{let t=Xe("body").append("div").attr("id","cy").attr("style","display:none"),e=Ce({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"straight",label:"data(label)","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"edge.segments",style:{"curve-style":"segments","segment-weights":"0","segment-distances":[.5],"edge-distances":"endpoints","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"node",style:{"compound-sizing-wrt-labels":"include"}},{selector:"node[label]",style:{"text-valign":"bottom","text-halign":"center","font-size":`${N.getConfigField("fontSize")}px`}},{selector:".node-service",style:{label:"data(label)",width:"data(width)",height:"data(height)"}},{selector:".node-junction",style:{width:"data(width)",height:"data(height)"}},{selector:".node-group",style:{padding:`${N.getConfigField("padding")}px`}}],layout:{name:"grid",boundingBox:{x1:0,x2:100,y1:0,y2:100}}});t.remove(),Ge(C,e),Re(_,e,N),be(x,e,N),Pe(M,e);let h=Se(N,f,r),a=Ye(f,N),p=e.layout({name:"fcose",quality:"proof",styleEnabled:!1,animate:!1,nodeDimensionsIncludeLabels:!1,idealEdgeLength(o){let[i,d]=o.connectedNodes(),{parent:s}=Kt(i),{parent:c}=Kt(d);return s===c?1.5*N.getConfigField("iconSize"):.5*N.getConfigField("iconSize")},edgeElasticity(o){let[i,d]=o.connectedNodes(),{parent:s}=Kt(i),{parent:c}=Kt(d);return s===c?.45:.001},alignmentConstraint:h,relativePlacementConstraint:a});p.one("layoutstop",()=>{var i;function o(d,s,c,g){let v,T,{x:L,y:R}=d,{x:S,y:Y}=s;T=(g-R+(L-c)*(R-Y)/(L-S))/Math.sqrt(1+((R-Y)/(L-S))**2),v=Math.sqrt((g-R)**2+(c-L)**2-T**2);let $=Math.sqrt((S-L)**2+(Y-R)**2);v/=$;let Z=(S-L)*(g-R)-(Y-R)*(c-L);switch(!0){case Z>=0:Z=1;break;case Z<0:Z=-1;break}let D=(S-L)*(c-L)+(Y-R)*(g-R);switch(!0){case D>=0:D=1;break;case D<0:D=-1;break}return T=Math.abs(T)*Z,v*=D,{distances:T,weights:v}}gt(o,"getSegmentWeights"),e.startBatch();for(let d of Object.values(e.edges()))if((i=d.data)!=null&&i.call(d)){let{x:s,y:c}=d.source().position(),{x:g,y:v}=d.target().position();if(s!==g&&c!==v){let T=d.sourceEndpoint(),L=d.targetEndpoint(),{sourceDir:R}=Me(d),[S,Y]=Wt(R)?[T.x,L.y]:[L.x,T.y],{weights:$,distances:Z}=o(T,L,S,Y);d.style("segment-distances",Z),d.style("segment-weights",$)}}e.endBatch(),p.run()}),p.run(),e.ready(o=>{Ae.info("Ready",o),n(e)})})}gt(ke,"layoutArchitecture");var Ci={parser:De,get db(){return new Oe},renderer:{draw:gt(async(_,x,C,M)=>{let N=M.db,f=N.getServices(),r=N.getJunctions(),n=N.getGroups(),t=N.getEdges(),e=N.getDataStructures(),h=ii(x),a=h.append("g");a.attr("class","architecture-edges");let p=h.append("g");p.attr("class","architecture-services");let o=h.append("g");o.attr("class","architecture-groups"),await Ni(N,p,f),Ai(N,p,r);let i=await ke(f,r,n,t,N,e);await Ei(a,i,N),await Ti(o,i,N),Fe(N,i),je(void 0,h,N.getConfigField("padding"),N.getConfigField("useMaxWidth"))},"draw")},styles:yi};export{Ci as diagram};
