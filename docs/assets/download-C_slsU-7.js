import{t as R}from"./chunk-LvLJmgfZ.js";import{t as G}from"./react-BGmjiNul.js";import{ii as I,zt as M}from"./cells-CmJW_FeD.js";import{d as N}from"./hotkeys-uKX61F1_.js";import{t as B}from"./requests-C0HaHO6a.js";import{t as W}from"./createLucideIcon-CW2xpJ57.js";import{t as j}from"./use-toast-Bzf3rpev.js";import{s as q}from"./popover-DtnzNVk-.js";import{r as z}from"./errors-z7WpYca5.js";import{t as k}from"./es-BJsT6vfZ.js";var C=W("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),T=t=>{let e,n=new Set,o=(f,L)=>{let d=typeof f=="function"?f(e):f;if(!Object.is(d,e)){let a=e;e=L??(typeof d!="object"||!d)?d:Object.assign({},e,d),n.forEach(i=>i(e,a))}},r=()=>e,c={setState:o,getState:r,getInitialState:()=>u,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{n.clear()}},u=e=t(o,r,c);return c},H=t=>t?T(t):T,Y=R((t=>{var e=G(),n=q();function o(a,i){return a===i&&(a!==0||1/a==1/i)||a!==a&&i!==i}var r=typeof Object.is=="function"?Object.is:o,c=n.useSyncExternalStore,u=e.useRef,f=e.useEffect,L=e.useMemo,d=e.useDebugValue;t.useSyncExternalStoreWithSelector=function(a,i,E,S,v){var m=u(null);if(m.current===null){var p={hasValue:!1,value:null};m.current=p}else p=m.current;m=L(function(){function O(l){if(!P){if(P=!0,b=l,l=S(l),v!==void 0&&p.hasValue){var y=p.value;if(v(y,l))return g=y}return g=l}if(y=g,r(b,l))return y;var D=S(l);return v!==void 0&&v(y,D)?(b=l,y):(b=l,g=D)}var P=!1,b,g,F=E===void 0?null:E;return[function(){return O(i())},F===null?void 0:function(){return O(F())}]},[i,E,S,v]);var w=c(a,m[0],m[1]);return f(function(){p.hasValue=!0,p.value=w},[w]),d(w),w}})),_=R(((t,e)=>{e.exports=Y()}));const s={toMarkdown:t=>s.replace(t,"md"),toHTML:t=>s.replace(t,"html"),toPNG:t=>s.replace(t,"png"),toPDF:t=>s.replace(t,"pdf"),toPY:t=>s.replace(t,"py"),withoutExtension:t=>{let e=t.split(".");return e.length===1?t:e.slice(0,-1).join(".")},replace:(t,e)=>t.endsWith(`.${e}`)?t:`${s.withoutExtension(t)}.${e}`};async function J(t,e){let n=j({title:t,duration:1/0});try{let o=await e();return n.dismiss(),o}catch(o){throw n.dismiss(),o}}function U(t){let e=document.getElementById(I.create(t));if(!e){N.error(`Output element not found for cell ${t}`);return}return e}var h=0;function K(){h++,h===1&&document.body.classList.add("printing")}function Q(){h--,h===0&&document.body.classList.remove("printing")}function V(t){t.classList.add("printing-output"),K();let e=t.style.overflow;return t.style.overflow="auto",()=>{t.classList.remove("printing-output"),Q(),t.style.overflow=e}}async function X(t){let e=U(t);if(!e)return;let n=V(e);try{return await k(e)}finally{n()}}async function Z(t,e){let n=U(t);n&&await $({element:n,filename:e,prepare:V})}async function $(t){let{element:e,filename:n,prepare:o}=t,r=document.getElementById("App"),c=(r==null?void 0:r.scrollTop)??0,u;o?u=o(e):document.body.classList.add("printing");try{x(await k(e),s.toPNG(n))}catch{j({title:"Error",description:"Failed to download as PNG.",variant:"danger"})}finally{u==null||u(),document.body.classList.contains("printing")&&document.body.classList.remove("printing"),requestAnimationFrame(()=>{r==null||r.scrollTo(0,c)})}}function x(t,e){let n=document.createElement("a");n.href=t,n.download=e,n.click(),n.remove()}function A(t,e){let n=URL.createObjectURL(t);x(n,e),URL.revokeObjectURL(n)}async function tt(t){let e=B(),{filename:n,webpdf:o}=t;try{let r=await e.exportAsPDF({webpdf:o}),c=M.basename(n);A(r,s.toPDF(c))}catch(r){throw j({title:"Failed to download",description:z(r),variant:"danger"}),r}}export{$ as a,s as c,C as d,Z as i,_ as l,A as n,X as o,x as r,J as s,tt as t,H as u};
