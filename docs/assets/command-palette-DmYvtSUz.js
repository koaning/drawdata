import{s as z}from"./chunk-LvLJmgfZ.js";import{l as X,u as B}from"./useEvent-DlWF5OMa.js";import{t as Y}from"./react-BGmjiNul.js";import{Wr as Z}from"./cells-CmJW_FeD.js";import"./react-dom-C9fstfnp.js";import{t as U}from"./compiler-runtime-DeeZ7FnK.js";import"./tooltip-CrRUCOBw.js";import{a as ee,i as le,l as te}from"./hotkeys-uKX61F1_.js";import{p as ie,v as ae,y as oe}from"./utils-Czt8B2GX.js";import"./config-CENq_7Pd.js";import{i as re}from"./switch-C5jvDmuG.js";import{t as ne}from"./useEventListener-COkmyg1v.js";import{t as pe}from"./jsx-runtime-DN_bIXfG.js";import"./dist-CAcX026F.js";import"./JsonOutput-DlwRx3jE.js";import"./cjs-Bj40p_Np.js";import"./main-CwSdzVhm.js";import"./useNonce-EAuSVK-5.js";import{r as se}from"./requests-C0HaHO6a.js";import"./layout-CBI2c778.js";import"./download-C_slsU-7.js";import{t as de}from"./useCellActionButton-DmwKwroH.js";import"./markdown-renderer-DjqhqmES.js";import{i as me,t as he}from"./useNotebookActions-DaM9w6Je.js";import{f as ce}from"./state-BphSR6sx.js";import"./dist-HGZzCB0y.js";import"./dist-CVj-_Iiz.js";import"./dist-BVf1IY4_.js";import"./dist-Cq_4nPfh.js";import"./dist-RKnr9SNh.js";import"./Combination-D1TsGrBC.js";import"./dates-CdsE1R40.js";import"./popover-DtnzNVk-.js";import"./share-CXQVxivL.js";import"./vega-loader.browser-C8wT63Va.js";import"./defaultLocale-BLUna9fQ.js";import"./defaultLocale-DzliDDTm.js";import"./purify.es-N-2faAGj.js";import{a as ye,c as fe,i as L,l as W,n as ue,o as J,r as be,s as ge}from"./command-B1zRJT1a.js";import"./chunk-OGVTOU66-DQphfHw1.js";import"./katex-dFZM4X_7.js";import"./marked.esm-BZNXs5FA.js";import"./es-BJsT6vfZ.js";import{r as ke}from"./focus-KGgBDCvb.js";import{t as K}from"./renderShortcut-BzTDKVab.js";import"./esm-D2_Kx6xF.js";import"./name-cell-input-Dc5Oz84d.js";import"./multi-icon-6ulZXArq.js";import"./dist-cDyKKhtR.js";import"./dist-CsayQVA2.js";import"./dist-CebZ69Am.js";import"./dist-gkLBSkCp.js";import"./dist-ClsPkyB_.js";import"./dist-BZPaM2NB.js";import"./dist-CAJqQUSI.js";import"./dist-CGGpiWda.js";import"./dist-BsIAU6bk.js";import"./esm-BranOiPJ.js";var Ce=U(),je=z(Y(),1);function xe(e,l){let t=(0,Ce.c)(11),n;t[0]===l?n=t[1]:(n=new Z(l),t[0]=l,t[1]=n);let p=n,r;t[2]!==e||t[3]!==p?(r=()=>p.get(e),t[2]=e,t[3]=p,t[4]=r):r=t[4];let[m,g]=(0,je.useState)(r),i;t[5]!==e||t[6]!==p?(i=k=>{g(k),p.set(e,k)},t[5]=e,t[6]=p,t[7]=i):i=t[7];let f=i,h;return t[8]!==f||t[9]!==m?(h=[m,f],t[8]=f,t[9]=m,t[10]=h):h=t[10],h}var ve=U(),we=3;function Se(){let e=(0,ve.c)(7),l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=[],e[0]=l):l=e[0];let[t,n]=xe("marimo:commands",l),p;e[1]!==t||e[2]!==n?(p=m=>{n(_e([m,...t]).slice(0,we))},e[1]=t,e[2]=n,e[3]=p):p=e[3];let r;return e[4]!==t||e[5]!==p?(r={recentCommands:t,addRecentCommand:p},e[4]=t,e[5]=p,e[6]=r):r=e[6],r}function _e(e){return[...new Set(e)]}function Q(e){return e.dropdown!==void 0}function V(e,l=""){return e.flatMap(t=>t.label?Q(t)?V(t.dropdown,`${l+t.label} > `):{...t,label:l+t.label}:[])}var He=U();function Ae(){let e=(0,He.c)(75),[l,t]=oe(),[n,p]=ae(),{saveAppConfig:r,saveUserConfig:m}=se(),g;e[0]!==m||e[1]!==t?(g=async d=>{await m({config:d}).then(()=>{t(c=>({...c,...d}))})},e[0]=m,e[1]=t,e[2]=g):g=e[2];let i=g,f;e[3]!==r||e[4]!==p?(f=async d=>{await r({config:d}).then(()=>{p(d)})},e[3]=r,e[4]=p,e[5]=f):f=e[5];let h=f,k;if(e[6]!==n||e[7]!==l.completion||e[8]!==l.display||e[9]!==l.keymap||e[10]!==h||e[11]!==i){let d;e[13]===n?d=e[14]:(d=T=>T!==n.width,e[13]=n,e[14]=d);let c;e[15]!==n||e[16]!==h?(c=T=>({label:`App config > Set width=${T}`,handle:()=>{h({...n,width:T})}}),e[15]=n,e[16]=h,e[17]=c):c=e[17];let H;e[18]!==l.display||e[19]!==i?(H={label:"Config > Set theme: dark",handle:()=>{i({display:{...l.display,theme:"dark"}})}},e[18]=l.display,e[19]=i,e[20]=H):H=e[20];let C;e[21]!==l.display||e[22]!==i?(C={label:"Config > Set theme: light",handle:()=>{i({display:{...l.display,theme:"light"}})}},e[21]=l.display,e[22]=i,e[23]=C):C=e[23];let A;e[24]!==l.display||e[25]!==i?(A={label:"Config > Set theme: system",handle:()=>{i({display:{...l.display,theme:"system"}})}},e[24]=l.display,e[25]=i,e[26]=A):A=e[26];let R=l.keymap.preset==="vim",M;e[27]!==l.keymap||e[28]!==i?(M=()=>{i({keymap:{...l.keymap,preset:"vim"}})},e[27]=l.keymap,e[28]=i,e[29]=M):M=e[29];let N;e[30]!==R||e[31]!==M?(N={label:"Config > Switch keymap to VIM",hidden:R,handle:M},e[30]=R,e[31]=M,e[32]=N):N=e[32];let D=l.keymap.preset==="default",j;e[33]!==l.keymap||e[34]!==i?(j=()=>{i({keymap:{...l.keymap,preset:"default"}})},e[33]=l.keymap,e[34]=i,e[35]=j):j=e[35];let u;e[36]!==D||e[37]!==j?(u={label:"Config > Switch keymap to default (current: VIM)",hidden:D,handle:j},e[36]=D,e[37]=j,e[38]=u):u=e[38];let x;e[39]!==l.completion||e[40]!==i?(x=()=>{i({completion:{...l.completion,copilot:!1}})},e[39]=l.completion,e[40]=i,e[41]=x):x=e[41];let v=l.completion.copilot!=="github",$;e[42]!==x||e[43]!==v?($={label:"Config > Disable GitHub Copilot",handle:x,hidden:v},e[42]=x,e[43]=v,e[44]=$):$=e[44];let w;e[45]!==l.completion||e[46]!==i?(w=()=>{i({completion:{...l.completion,copilot:"github"}})},e[45]=l.completion,e[46]=i,e[47]=w):w=e[47];let P=l.completion.copilot==="github",q;e[48]!==w||e[49]!==P?(q={label:"Config > Enable GitHub Copilot",handle:w,hidden:P},e[48]=w,e[49]=P,e[50]=q):q=e[50];let G=!l.display.reference_highlighting,S;e[51]!==l.display||e[52]!==i?(S=()=>{i({display:{...l.display,reference_highlighting:!1}})},e[51]=l.display,e[52]=i,e[53]=S):S=e[53];let b;e[54]!==G||e[55]!==S?(b={label:"Config > Disable reference highlighting",hidden:G,handle:S},e[54]=G,e[55]=S,e[56]=b):b=e[56];let y;e[57]!==l.display||e[58]!==i?(y=()=>{i({display:{...l.display,reference_highlighting:!0}})},e[57]=l.display,e[58]=i,e[59]=y):y=e[59];let E;e[60]!==l.display.reference_highlighting||e[61]!==y?(E={label:"Config > Enable reference highlighting",hidden:l.display.reference_highlighting,handle:y},e[60]=l.display.reference_highlighting,e[61]=y,e[62]=E):E=e[62];let o=l.display.cell_output==="above",a;e[63]!==l.display||e[64]!==i?(a=()=>{i({display:{...l.display,cell_output:"above"}})},e[63]=l.display,e[64]=i,e[65]=a):a=e[65];let F;e[66]!==o||e[67]!==a?(F={label:"Config > Set cell output area: above",hidden:o,handle:a},e[66]=o,e[67]=a,e[68]=F):F=e[68];let _=l.display.cell_output==="below",I;e[69]!==l.display||e[70]!==i?(I=()=>{i({display:{...l.display,cell_output:"below"}})},e[69]=l.display,e[70]=i,e[71]=I):I=e[71];let O;e[72]!==_||e[73]!==I?(O={label:"Config > Set cell output area: below",hidden:_,handle:I},e[72]=_,e[73]=I,e[74]=O):O=e[74],k=[...ce().filter(d).map(c),H,C,A,N,u,$,q,b,E,F,O].filter(Me),e[6]=n,e[7]=l.completion,e[8]=l.display,e[9]=l.keymap,e[10]=h,e[11]=i,e[12]=k}else k=e[12];return k}function Me(e){return!e.hidden}var Ne=U(),s=z(pe(),1),De=()=>{let e=(0,Ne.c)(37),[l,t]=X(me),n=re(),p=B(ke),r=B(ie),m;e[0]===p?m=e[1]:(m={cell:p},e[0]=p,e[1]=m);let g=de(m).flat();g=V(g);let i=Ae(),f=he();f=[...V(f),...V(i)];let h=f.filter(Ee),k=ee.keyBy(h,Fe),{recentCommands:d,addRecentCommand:c}=Se(),H;e[2]===d?H=e[3]:(H=new Set(d),e[2]=d,e[3]=H);let C=H,A;e[4]!==r||e[5]!==t?(A=o=>{te(r.getHotkey("global.commandPalette").key)(o)&&(o.preventDefault(),t(Ie))},e[4]=r,e[5]=t,e[6]=A):A=e[6],ne(document,"keydown",A);let R;e[7]!==c||e[8]!==r||e[9]!==n||e[10]!==t?(R=(o,a)=>{let F=n[o];if(!F)return null;let _=r.getHotkey(o);return(0,s.jsxs)(J,{disabled:a.disabled,onSelect:()=>{c(o),t(!1),requestAnimationFrame(()=>{F()})},value:_.name,children:[(0,s.jsxs)("span",{children:[_.name,a.tooltip&&(0,s.jsx)("span",{className:"ml-2",children:a.tooltip})]}),(0,s.jsx)(W,{children:(0,s.jsx)(K,{shortcut:_.key})})]},o)},e[7]=c,e[8]=r,e[9]=n,e[10]=t,e[11]=R):R=e[11];let M=R,N;e[12]!==c||e[13]!==r||e[14]!==t?(N=o=>{let{label:a,handle:F,props:_,hotkey:I}=o,O=_===void 0?{}:_;return(0,s.jsxs)(J,{disabled:O.disabled,onSelect:()=>{c(a),t(!1),requestAnimationFrame(()=>{F()})},value:a,children:[(0,s.jsxs)("span",{children:[a,O.tooltip&&(0,s.jsxs)("span",{className:"ml-2",children:["(",O.tooltip,")"]})]}),I&&(0,s.jsx)(W,{children:(0,s.jsx)(K,{shortcut:r.getHotkey(I).key})})]},a)},e[12]=c,e[13]=r,e[14]=t,e[15]=N):N=e[15];let D=N,j=ue,u;e[16]===Symbol.for("react.memo_cache_sentinel")?(u=(0,s.jsx)(ye,{placeholder:"Type to search..."}),e[16]=u):u=e[16];let x=ge,v;e[17]===Symbol.for("react.memo_cache_sentinel")?(v=(0,s.jsx)(be,{children:"No results found."}),e[17]=v):v=e[17];let $=d.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(L,{heading:"Recently Used",children:d.map(o=>{let a=k[o];return le(o)?M(o,{disabled:a==null?void 0:a.disabled,tooltip:a==null?void 0:a.tooltip}):a&&!Q(a)?D({label:a.label,handle:a.handleHeadless||a.handle,props:{disabled:a.disabled,tooltip:a.tooltip}}):null})}),(0,s.jsx)(fe,{})]}),w=L,P=r.iterate().map(o=>{if(C.has(o))return null;let a=k[o];return M(o,{disabled:a==null?void 0:a.disabled,tooltip:a==null?void 0:a.tooltip})}),q=h.map(o=>C.has(o.label)?null:D({label:o.label,handle:o.handleHeadless||o.handle,props:{disabled:o.disabled,tooltip:o.tooltip}})),G;e[18]!==C||e[19]!==D?(G=o=>C.has(o.label)?null:D({label:`Cell > ${o.label}`,handle:o.handleHeadless||o.handle,props:{disabled:o.disabled,tooltip:o.tooltip}}),e[18]=C,e[19]=D,e[20]=G):G=e[20];let S=g.map(G),b;e[21]!==w||e[22]!==q||e[23]!==S||e[24]!==P?(b=(0,s.jsxs)(w,{heading:"Commands",children:[P,q,S]}),e[21]=w,e[22]=q,e[23]=S,e[24]=P,e[25]=b):b=e[25];let y;e[26]!==x||e[27]!==b||e[28]!==v||e[29]!==$?(y=(0,s.jsxs)(x,{children:[v,$,b]}),e[26]=x,e[27]=b,e[28]=v,e[29]=$,e[30]=y):y=e[30];let E;return e[31]!==j||e[32]!==l||e[33]!==t||e[34]!==y||e[35]!==u?(E=(0,s.jsxs)(j,{open:l,onOpenChange:t,children:[u,y]}),e[31]=j,e[32]=l,e[33]=t,e[34]=y,e[35]=u,e[36]=E):E=e[36],E};function Ee(e){return!e.hotkey}function Fe(e){return e.label}function Ie(e){return!e}export{De as default};
